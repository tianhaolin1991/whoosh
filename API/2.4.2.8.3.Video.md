# Video

用于播放视频文件并控制其播放状态的组件。

## Component Constructors

### public init( src!: String = "", currentProgressRate!: Float64 = 1.0, previewUri!: String = "", controller!: VideoController = VideoController() )

```cangjie
public init( src!: String = "", currentProgressRate!: Float64 = 1.0, previewUri!: String = "", controller!: VideoController = VideoController() )
```
功能： 根据视频的数据源，播放倍速，预览图片和视频控制器创建一个 video 组件。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| String | 否 | 命名参数。 视频的数据源，支持本地视频和网络视频。 string格式可用于加载网络视频和本地视频，常用于加载网络视频。 - 支持网络视频地址。 - 支持file://路径前缀的字符串，即应用沙箱URI：file://<bundleName>/<sandboxPath>。用于读取应用沙箱路径内的资源。需要保证目录包路径下的文件有可读权限。 视频支持的格式是：mp4、mkv、TS。 | src | "" |
| Float64 | 否 | 命名参数。 视频播放倍速。 取值仅支持：0.75，1.0，1.25，1.75，2.0。 | currentProgressRate | 1.0 |
| String | 否 | 命名参数。 视频未播放时的预览图片路径。 | previewUri | "" |
| VideoController | 否 | 命名参数。 设置视频控制器，可以控制视频的播放状态。 | controller | VideoController() |

### public init( src!: String = "", currentProgressRate!: PlaybackSpeed, previewUri!: String = "", controller!: VideoController = VideoController() )

```cangjie
public init( src!: String = "", currentProgressRate!: PlaybackSpeed, previewUri!: String = "", controller!: VideoController = VideoController() )
```
功能： 根据视频的数据源，播放倍速，预览图片和视频控制器创建一个 video 组件。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| String | 否 | 命名参数。 视频的数据源，支持本地视频和网络视频。 string格式可用于加载网络视频和本地视频，常用于加载网络视频。 - 支持网络视频地址。 - 支持file://路径前缀的字符串，即应用沙箱URI：file://<bundleName>/<sandboxPath>。用于读取应用沙箱路径内的资源。需要保证目录包路径下的文件有可读权限。 视频支持的格式是：mp4、mkv、TS。 | src | "" |
| PlaybackSpeed | 是 | 命名参数。 视频播放倍速。 取值仅支持：Speed_Forward_0_75_X，Speed_Forward_1_00_X，Speed_Forward_1_25_X，Speed_Forward_1_75_X，Speed_Forward_2_00_X。 | currentProgressRate | - |
| String | 否 | 命名参数。 视频未播放时的预览图片路径。 | previewUri | "" |
| VideoController | 否 | 命名参数。 设置视频控制器，可以控制视频的播放状态。 | controller | VideoController() |

### public init( src!: AppResource, currentProgressRate!: Float64 = 1.0, previewUri!: AppResource, controller!: VideoController = VideoController() )

```cangjie
public init( src!: AppResource, currentProgressRate!: Float64 = 1.0, previewUri!: AppResource, controller!: VideoController = VideoController() )
```
功能： 根据视频的数据源，播放倍速，预览图片和视频控制器创建一个 video 组件。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| AppResource | 是 | 命名参数。 视频的数据源，支持本地视频和网络视频。 Resource格式可以跨包/跨模块访问资源文件，常用于访问本地视频。 - 支持rawfile文件下的资源，即通过@rawfile引用视频文件。 视频支持的格式是：mp4、mkv、TS。 | src | - |
| Float64 | 否 | 命名参数。 视频播放倍速。 取值仅支持：0.75，1.0，1.25，1.75，2.0。 | currentProgressRate | 1.0 |
| AppResource | 是 | 命名参数。 视频未播放时的预览图片路径。 | previewUri | - |
| VideoController | 否 | 命名参数。 设置视频控制器，可以控制视频的播放状态。 | controller | VideoController() |

### public init( src!: AppResource, currentProgressRate!: PlaybackSpeed, previewUri!: AppResource, controller!: VideoController = VideoController() )

```cangjie
public init( src!: AppResource, currentProgressRate!: PlaybackSpeed, previewUri!: AppResource, controller!: VideoController = VideoController() )
```
功能： 根据视频的数据源，播放倍速，预览图片和视频控制器创建一个 video 组件。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| AppResource | 是 | 命名参数。 视频的数据源，支持本地视频和网络视频。 Resource格式可以跨包/跨模块访问资源文件，常用于访问本地视频。 - 支持rawfile文件下的资源，即通过@rawfile引用视频文件。 视频支持的格式是：mp4、mkv、TS。 | src | - |
| PlaybackSpeed | 是 | 命名参数。 视频播放倍速。 取值仅支持：Speed_Forward_0_75_X，Speed_Forward_1_00_X，Speed_Forward_1_25_X，Speed_Forward_1_75_X，Speed_Forward_2_00_X。 | currentProgressRate | - |
| AppResource | 是 | 命名参数。 视频未播放时的预览图片路径。 | previewUri | - |
| VideoController | 否 | 命名参数。 设置视频控制器，可以控制视频的播放状态。 | controller | VideoController() |

### public init( src!: String = "", currentProgressRate!: Float64 = 1.0, previewUri!: AppResource, controller!: VideoController = VideoController() )

```cangjie
public init( src!: String = "", currentProgressRate!: Float64 = 1.0, previewUri!: AppResource, controller!: VideoController = VideoController() )
```
功能： 根据视频的数据源，播放倍速，预览图片和视频控制器创建一个 video 组件。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| String | 否 | 命名参数。 视频的数据源，支持本地视频和网络视频。 string格式可用于加载网络视频和本地视频，常用于加载网络视频。 - 支持网络视频地址。 - 支持file://路径前缀的字符串，即应用沙箱URI：file://<bundleName>/<sandboxPath>。用于读取应用沙箱路径内的资源。需要保证目录包路径下的文件有可读权限。 视频支持的格式是：mp4、mkv、TS。 | src | "" |
| Float64 | 否 | 命名参数。 视频播放倍速。 取值仅支持：0.75，1.0，1.25，1.75，2.0。 | currentProgressRate | 1.0 |
| AppResource | 是 | 命名参数。 视频未播放时的预览图片路径。 | previewUri | - |
| VideoController | 否 | 命名参数。 设置视频控制器，可以控制视频的播放状态。 | controller | VideoController() |

### public init( src!: String = "", currentProgressRate!: PlaybackSpeed, previewUri!: AppResource, controller!: VideoController = VideoController() )

```cangjie
public init( src!: String = "", currentProgressRate!: PlaybackSpeed, previewUri!: AppResource, controller!: VideoController = VideoController() )
```
功能： 根据视频的数据源，播放倍速，预览图片和视频控制器创建一个 video 组件。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| String | 否 | 命名参数。 视频的数据源，支持本地视频和网络视频。 string格式可用于加载网络视频和本地视频，常用于加载网络视频。 - 支持网络视频地址。 - 支持file://路径前缀的字符串，即应用沙箱URI：file://<bundleName>/<sandboxPath>。用于读取应用沙箱路径内的资源。需要保证目录包路径下的文件有可读权限。 视频支持的格式是：mp4、mkv、TS。 | src | "" |
| PlaybackSpeed | 是 | 命名参数。 视频播放倍速。 取值仅支持：Speed_Forward_0_75_X，Speed_Forward_1_00_X，Speed_Forward_1_25_X，Speed_Forward_1_75_X，Speed_Forward_2_00_X。 | currentProgressRate | - |
| AppResource | 是 | 命名参数。 视频未播放时的预览图片路径。 | previewUri | - |
| VideoController | 否 | 命名参数。 设置视频控制器，可以控制视频的播放状态。 | controller | VideoController() |

### public init( src!: AppResource, currentProgressRate!: Float64 = 1.0, previewUri!: String = "", controller!: VideoController = VideoController() )

```cangjie
public init( src!: AppResource, currentProgressRate!: Float64 = 1.0, previewUri!: String = "", controller!: VideoController = VideoController() )
```
功能： 根据视频的数据源，播放倍速，预览图片和视频控制器创建一个 video 组件。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| AppResource | 是 | 命名参数。 视频的数据源，支持本地视频和网络视频。 Resource格式可以跨包/跨模块访问资源文件，常用于访问本地视频。 - 支持rawfile文件下的资源，即通过@rawfile引用视频文件。 视频支持的格式是：mp4、mkv、TS。 | src | - |
| Float64 | 否 | 命名参数。 视频播放倍速。 取值仅支持：0.75，1.0，1.25，1.75，2.0。 | currentProgressRate | 1.0 |
| String | 否 | 命名参数。 视频未播放时的预览图片路径。 | previewUri | "" |
| VideoController | 否 | 命名参数。 设置视频控制器，可以控制视频的播放状态。 | controller | VideoController() |

### public init( src!: AppResource, currentProgressRate!: PlaybackSpeed, previewUri!: String = "", controller!: VideoController = VideoController() )

```cangjie
public init( src!: AppResource, currentProgressRate!: PlaybackSpeed, previewUri!: String = "", controller!: VideoController = VideoController() )
```
功能： 根据视频的数据源，播放倍速，预览图片和视频控制器创建一个 video 组件。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| AppResource | 是 | 命名参数。 视频的数据源，支持本地视频和网络视频。 Resource格式可以跨包/跨模块访问资源文件，常用于访问本地视频。 - 支持rawfile文件下的资源，即通过@rawfile引用视频文件。 视频支持的格式是：mp4、mkv、TS。 | src | - |
| PlaybackSpeed | 是 | 命名参数。 视频播放倍速。 取值仅支持：Speed_Forward_0_75_X，Speed_Forward_1_00_X，Speed_Forward_1_25_X，Speed_Forward_1_75_X，Speed_Forward_2_00_X。 | currentProgressRate | - |
| String | 否 | 命名参数。 视频未播放时的预览图片路径。 | previewUri | "" |
| VideoController | 否 | 命名参数。 设置视频控制器，可以控制视频的播放状态。 | controller | VideoController() |


## Functions

### public func autoPlay(value: Bool): This

```cangjie
public func autoPlay(value: Bool): This
```
功能： 设置是否自动播放。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| Bool | 是 | 是否自动播放。 初始值：false。 | value | - |

### public func controls(value: Bool): This

```cangjie
public func controls(value: Bool): This
```
功能： 设置控制视频播放的控制栏是否显示。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| Bool | 是 | 控制视频播放的控制栏是否显示。 初始值：true。 | value | - |

### public func enableAnalyzer(enable: Bool): This

```cangjie
public func enableAnalyzer(enable: Bool): This
```
功能： 设置组件支持AI分析，当前支持主体识别、文字识别和对象查找等功能。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| Bool | 是 | 是否启用AI分析功能。 | enable | - |

### public func loop(value: Bool): This

```cangjie
public func loop(value: Bool): This
```
功能： 设置是否单个视频循环播放。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| Bool | 是 | 是否单个视频循环播放。 初始值：false。 | value | - |

### public func muted(value: Bool): This

```cangjie
public func muted(value: Bool): This
```
功能： 设置是否静音。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| Bool | 是 | 是否静音。 初始值：false。 | value | - |

### public func objectFit(value: ImageFit): This

```cangjie
public func objectFit(value: ImageFit): This
```
功能： 设置视频显示模式。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| ImageFit | 是 | 视频显示模式。 初始值：Cover。 | value | - |

### public func onError(callback: ()-> Unit): This

```cangjie
public func onError(callback: ()-> Unit): This
```
功能： 播放失败时触发该事件。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| ()->Unit | 是 | 回调函数，播放失败时触发。 | callback | - |

### public func onFinish(callback: ()-> Unit): This

```cangjie
public func onFinish(callback: ()-> Unit): This
```
功能： 播放结束时触发该事件。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| ()->Unit | 是 | 回调函数，播放结束时触发。 | callback | - |

### public func onFullscreenChange(callback: (Bool)-> Unit): This

```cangjie
public func onFullscreenChange(callback: (Bool)-> Unit): This
```
功能： 在全屏播放与非全屏播放状态之间切换时触发该事件。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| (Bool)->Unit | 是 | 回调函数，在全屏播放与非全屏播放状态之间切换时触发。 | callback | - |

### public func onPause(callback: ()-> Unit): This

```cangjie
public func onPause(callback: ()-> Unit): This
```
功能： 暂停播放时触发该事件。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| ()->Unit | 是 | 回调函数，暂停播放时触发。 | callback | - |

### public func onPrepared(callback: (Int32)-> Unit): This

```cangjie
public func onPrepared(callback: (Int32)-> Unit): This
```
功能： 视频准备完成时触发该事件。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| (Int32)->Unit | 是 | 回调函数，视频准备完成时触发。 | callback | - |

### public func onSeeked(callback: (Int32)-> Unit): This

```cangjie
public func onSeeked(callback: (Int32)-> Unit): This
```
功能： 操作进度条完成后触发该事件，上报播放时间信息。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| (Int32)->Unit | 是 | 回调函数，操作进度条完成后触发。 | callback | - |

### public func onSeeking(callback: (Int32)-> Unit): This

```cangjie
public func onSeeking(callback: (Int32)-> Unit): This
```
功能： 操作进度条过程时触发该事件，上报时间信息。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| (Int32)->Unit | 是 | 回调函数，操作进度条过程时触发。 参数值：当前视频的时长，单位为秒。 | callback | - |

### public func onStart(callback: ()-> Unit): This

```cangjie
public func onStart(callback: ()-> Unit): This
```
功能： 播放时触发该事件。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| ()->Unit | 是 | 回调函数，播放时触发。 | callback | - |

### public func onStop(callback: ()-> Unit): This

```cangjie
public func onStop(callback: ()-> Unit): This
```
功能： 播放停止时触发该事件（当stop()方法被调用后触发）。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| ()->Unit | 是 | 回调函数，播放停止时触发 | callback | - |

### public func onUpdate(callback: (Int32)-> Unit): This

```cangjie
public func onUpdate(callback: (Int32)-> Unit): This
```
功能： 说明播放进度变化时触发该事件。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| (Int32)->Unit | 是 | 回调函数，说明播放进度变化时触发。 | callback | - |


## Classes

### VideoController

class VideoController
```cangjie
public class VideoController { public init() }
```
功能： VideoController对象可以控制一个或多个video，可用视频播放实例请参考 ohos.multimedia_media 。



## Enums

### PlaybackSpeed

enum PlaybackSpeed
```cangjie
public enum PlaybackSpeed { | Speed_Forward_0_75_X | Speed_Forward_1_00_X | Speed_Forward_1_25_X | Speed_Forward_1_75_X | Speed_Forward_2_00_X }
```
功能： 定义播放速度。

#### Speed_Forward_0_75_X

```cangjie
Speed_Forward_0_75_X
```
功能： 0.75倍速播放。

#### Speed_Forward_1_00_X

```cangjie
Speed_Forward_1_00_X
```
功能： 1倍速播放。

#### Speed_Forward_1_25_X

```cangjie
Speed_Forward_1_25_X
```
功能： 1.25倍速播放。

#### Speed_Forward_1_75_X

```cangjie
Speed_Forward_1_75_X
```
功能： 1.75倍速播放。

#### Speed_Forward_2_00_X

```cangjie
Speed_Forward_2_00_X
```
功能： 2倍速播放。


### SeekMode

enum SeekMode
```cangjie
public enum SeekMode { | PreviousKeyframe | NextKeyframe | ClosestKeyframe | Accurate }
```
功能： 跳转模式。

#### PreviousKeyframe

```cangjie
PreviousKeyframe
```
功能： 跳转到前一个最近的关键帧。

#### NextKeyframe

```cangjie
NextKeyframe
```
功能： 跳转到后一个最近的关键帧。

#### ClosestKeyframe

```cangjie
ClosestKeyframe
```
功能： 跳转到最近的关键帧。

#### Accurate

```cangjie
Accurate
```
功能： 精准跳转，不论是否为关键帧。



## Examples

```cangjie
package ohos_app_cangjie_entry
import kit.UIKit.*
import kit.LocalizationKit.*
import ohos.state_macro_manage.*

@Entry
@Component
class EntryView {
 var videoSrc: AppResource = @rawfile("video.mp4")
 var previewUri: AppResource = @r(app.media.preview)
 var controller: VideoController = VideoController()
 @State var curRate: PlaybackSpeed = PlaybackSpeed.Speed_Forward_1_00_X
 @State var isAutoPlay: Bool = false
 @State var showControls: Bool = true

 func build() {
 Column() {
 Video(
 src: this.videoSrc,
 previewUri: this.previewUri,
 currentProgressRate: this.curRate,
 controller: this.controller
 )
 .width(100.percent)
 .height(600)
 .autoPlay(this.isAutoPlay)
 .controls(this.showControls)

 Row() {
 Button("start")
 .onClick({
 => this.controller.start() // 开始播放
 })
 .margin(5)
 .id("start")
 Button("pause")
 .onClick({
 => this.controller.pause() // 暂停播放
 })
 .margin(5)
 .id("pause")
 Button("stop")
 .onClick({
 => this.controller.stop() // 暂停播放
 this.controller.exitFullscreen()
 }
 )
 .margin(5)
 .id("stop")
 }
 Row() {
 Button("Fullscreen")
 .onClick({
 => this.controller.requestFullscreen(true)
 })
 .margin(5)
 .id("Fullscreen")
 Button("at 10s")
 .onClick({
 => this.controller.setCurrentTime(10, SeekMode.ClosestKeyframe)
 })
 .margin(5)
 .id("at 10s")
 Button("exitFull")
 .onClick({
 => this.controller.exitFullscreen()
 })
 .margin(5)
 .id("exitFull")
 }
 Row() {
 Button("rate 0.75")
 .onClick({
 => this.curRate = PlaybackSpeed.Speed_Forward_0_75_X
 })
 .margin(5)
 .id("rate 0.75")
 Button("rate 1")
 .onClick({
 => this.curRate = PlaybackSpeed.Speed_Forward_1_00_X
 })
 .margin(5)
 .id("rate 1")
 Button("rate 2")
 .onClick({
 => this.curRate = PlaybackSpeed.Speed_Forward_2_00_X
 })
 .margin(5)
 .id("rate 2")
 }
 }
 }
}
```

