# 绑定手势方法

为组件绑定不同类型的手势事件，并设置事件的响应方法。

## Functions

### public func gesture(gesture: GestureType): This

```cangjie
public func gesture(gesture: GestureType): This
```
功能： 绑定手势。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| GestureType | 是 | 绑定的手势类型。 | gesture | - |

### public func gesture(gesture: GestureType, mask: GestureMask): This

```cangjie
public func gesture(gesture: GestureType, mask: GestureMask): This
```
功能： 绑定手势。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| GestureType | 是 | 绑定的手势类型。 | gesture | - |
| GestureMask | 是 | 事件响应设置。 | mask | - |

### public func priorityGesture(gesture: GestureType): This

```cangjie
public func priorityGesture(gesture: GestureType): This
```
功能： 绑定可与子组件手势同时触发的手势。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| GestureType | 是 | 绑定的手势类型。 | gesture | - |

### public func priorityGesture(gesture: GestureType, mask: GestureMask): This

```cangjie
public func priorityGesture(gesture: GestureType, mask: GestureMask): This
```
功能： 绑定可与子组件手势同时触发的手势。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| GestureType | 是 | 绑定的手势类型。 | gesture | - |
| GestureMask | 是 | 事件响应设置。 | mask | - |

### public func priorityGesture(gesture: GestureType): This

```cangjie
public func priorityGesture(gesture: GestureType): This
```
功能： 绑定优先识别手势。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| GestureType | 是 | 绑定的手势类型。 | gesture | - |

### public func priorityGesture(gesture: GestureType, mask: GestureMask): This

```cangjie
public func priorityGesture(gesture: GestureType, mask: GestureMask): This
```
功能： 绑定优先识别手势。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| GestureType | 是 | 绑定的手势类型。 | gesture | - |
| GestureMask | 是 | 事件响应设置。 | mask | - |

### public func onAction(callback: (GestureEvent) -> Unit): This

```cangjie
public func onAction(callback: (GestureEvent) -> Unit): This
```
功能： Tap手势识别成功触发该事件。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| GestureEvent | 是 | 回调函数，Tap手势识别成功后触发该回调。 | callback | - |


## Classes

### GestureEvent

class GestureEvent
```cangjie
public class GestureEvent <: BaseEvent { public let repeat: Bool public let fingerList: ArrayList<FingerInfo> public let offsetX: Float64 public let offsetY: Float64 public let scale: Float64 public let pinchCenterX: Float64 public let pinchCenterY: Float64 public let angle: Float64 public let speed: Float64 public let velocityX: Float64 public let velocityY: Float64 public let velocity: Float64 public init( target: EventTarget, timestamp: Int64, source: SourceType, pressure: Float64, tiltX: Int64, tiltY: Int64, sourceTool: SourceTool, axisHorizontal: Option<Float32>, axisVertical: Option<Float32>, getModifierKeyState: Option<(Array<String>) -> Bool>, deviveId: Int64, repeat: Bool, offsetX: Float64, offsetY: Float64, angle: Float64, scale: Float64, pinchCenterX: Float64, pinchCenterY: Float64, speed: Float64, fingerList: ArrayList<FingerInfo>, velocityX: Float64, velocityY: Float64, velocity: Float64 ) }
```
功能： 用于描述手势事件的类型。

#### let angle

```cangjie
public let angle: Float64
```
功能： 用于RotationGesture手势触发场景时，表示旋转角度。用于SwipeGesture手势触发场景时，表示滑动手势的角度，即两根手指间的线段与水平方向的夹角变化的度数。
Type: Float64; Readable: true; Writable: false

#### let fingerList

```cangjie
public let fingerList: ArrayList<FingerInfo>
```
功能： 输入源为触屏产生的手势，fingerList中会包含触发事件的所有触点信息；由鼠标发起的手势，fingerList中只会有一条记录；触摸板的事件大类与鼠标一致，所以由触摸板发起的手势，fingerList只会携带一条记录。
Type: ArrayList< FingerInfo >; Readable: true; Writable: false

#### let offsetX

```cangjie
public let offsetX: Float64
```
功能： 手势事件偏移量X，单位为vp，用于 PanGesture 手势触发场景，从左向右滑动offsetX为正，反之为负。
Type: Float64; Readable: true; Writable: false

#### let offsetY

```cangjie
public let offsetY: Float64
```
功能： 手势事件偏移量Y，单位为vp，用于 PanGesture 手势触发场景，从上向下滑动offsetY为正，反之为负。
Type: Float64; Readable: true; Writable: false

#### let pinchCenterX

```cangjie
public let pinchCenterX: Float64
```
功能： 捏合手势中心点的x轴坐标，单位为vp，用于 PinchGesture 手势触发场景。
Type: Float64; Readable: true; Writable: false

#### let pinchCenterY

```cangjie
public let pinchCenterY: Float64
```
功能： 捏合手势中心点的y轴坐标，单位为vp，用于 PinchGesture 手势触发场景。
Type: Float64; Readable: true; Writable: false

#### let repeat

```cangjie
public let repeat: Bool
```
功能： 是否为重复触发事件，用于 LongPressGesture 手势触发场景。
Type: Bool; Readable: true; Writable: false

#### let scale

```cangjie
public let scale: Float64
```
功能： 缩放比例，用于 PinchGesture 手势触发场景。
Type: Float64; Readable: true; Writable: false

#### let speed

```cangjie
public let speed: Float64
```
功能： 滑动手势速度，即所有手指相对当前组件元素原始区域滑动的平均速度，单位为vp/秒，用于 SwipeGesture 手势触发场景。
Type: Float64; Readable: true; Writable: false

#### let velocity

```cangjie
public let velocity: Float64
```
功能： 用于 PanGesture 手势中，获取当前手势的主方向速度。为xy轴方向速度的平方和的算术平方根。单位为vp/s。
Type: Float64; Readable: true; Writable: false

#### let velocityX

```cangjie
public let velocityX: Float64
```
功能： 用于 PanGesture 手势中，获取当前手势的x轴方向速度。坐标轴原点为屏幕左上角，分正负方向速度，从左往右为正，反之为负。单位为vp/s。
Type: Float64; Readable: true; Writable: false

#### let velocityY

```cangjie
public let velocityY: Float64
```
功能： 用于 PanGesture 手势中，获取当前手势的y轴方向速度。坐标轴原点为屏幕左上角，分正负方向速度，从上往下为正，反之为负。单位为vp/s。
Type: Float64; Readable: true; Writable: false


### GestureType

class GestureType
```cangjie
public open class GestureType {}
```
功能： 所有手势类型的基础类型。


### EventTarget

class EventTarget
```cangjie
public class EventTarget { public EventTarget( public var area: Area ) }
```
功能： 触发手势事件的元素对象显示区域。

#### var area

```cangjie
public var area: Area
```
功能： 目标元素的区域信息。
Type: Area; Readable: true; Writable: true


### FingerInfo

class FingerInfo
```cangjie
public class FingerInfo{ public let id: Int32 public let globalX: Float64 public let globalY: Float64 public let localX: Float64 public let localY: Float64 }
```
功能： 手指信息。

#### let id

```cangjie
public let id: Int32
```
功能： 手指的索引编号。
Type: Int32; Readable: true; Writable: false

#### let globalX

```cangjie
public let globalX: Float64
```
功能： 相对于应用窗口左上角的x轴坐标，单位为vp。
Type: Float64; Readable: true; Writable: false

#### let globalY

```cangjie
public let globalY: Float64
```
功能： 相对于应用窗口左上角的y轴坐标，单位为vp。
Type: Float64; Readable: true; Writable: false

#### let localX

```cangjie
public let localX: Float64
```
功能： 相对于当前组件元素原始区域左上角的x轴坐标，单位为vp。
Type: Float64; Readable: true; Writable: false

#### let localY

```cangjie
public let localY: Float64
```
功能： 相对于当前组件元素原始区域左上角的y轴坐标，单位为vp。
Type: Float64; Readable: true; Writable: false



## Enums

### GestureMask

enum GestureMask
```cangjie
public enum GestureMask { | Normal | IgnoreInternal }
```
功能： 事件响应设置。

#### Normal

```cangjie
Normal
```
功能： 不屏蔽子组件的手势，按照默认手势识别顺序进行识别。

#### IgnoreInternal

```cangjie
IgnoreInternal
```
功能： 屏蔽子组件的手势，包括子组件上系统内置的手势，如子组件为List组件时，内置的滑动手势同样会被屏蔽。 若父子组件区域存在部分重叠，则只会屏蔽父子组件重叠的部分。



## Examples

```cangjie
package ohos_app_cangjie_entry
import kit.UIKit.*
import ohos.state_macro_manage.*

@Entry
@Component
class EntryView {
 @State var priorityTestValue: String = ""
 @State var parallelTestValue: String = ""

 func build() {
 Column() {
 Column() {
 Text('TapGesture:' + this.priorityTestValue).fontSize(28)
 .gesture(
 TapGesture()
 .onAction({ event: GestureEvent =>
 this.priorityTestValue += '\nText'
 }),
 GestureMask.Normal
 )
 }
 .height(200)
 .width(250)
 .padding(20)
 .margin(20)
 .border(width: 3.vp)
 // 设置为priorityGesture时，点击文本会忽略Text组件的TapGesture手势事件，优先识别父组件Column的TapGesture手势事件
 .priorityGesture(
 TapGesture()
 .onAction({event: GestureEvent =>
 this.priorityTestValue += '\nColumn'
 }),
 GestureMask.IgnoreInternal
 )

 Column() {
 Text('TapGesture:' + this.parallelTestValue).fontSize(28)
 .gesture(
 TapGesture()
 .onAction({ event: GestureEvent =>
 this.parallelTestValue += '\nText'
 }),
 GestureMask.Normal
 )
 }
 .height(200)
 .width(250)
 .padding(20)
 .margin(20)
 .border(width: 3.vp)
 // 设置为parallelGesture时，点击文本会同时触发子组件Text与父组件Column的TapGesture手势事件
 .parallelGesture(
 TapGesture()
 .onAction({ event: GestureEvent =>
 this.parallelTestValue += '\nColumn'
 }), GestureMask.Normal
 )
 }
 }
}
```

