# ohos.observer（无感监听）

提供UI组件行为变化的无感监听能力。

```cangjie
import kit.UIKit.*
```
## Functions

### public func off(`type`: ObserverType, callback: Callback1Argument<ScrollEventInfo>): Unit

```cangjie
public func off(`type`: ObserverType, callback: Callback1Argument<ScrollEventInfo>): Unit
```
功能： 取消监听滚动事件的开始和结束。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| ObserverType | 是 | 监听事件，固定为OBSERVER_SCROLL_EVENT，即滚动事件的开始和结束。 | type | - |
| Callback1Argument < ScrollEventInfo > | 是 | 回调函数。返回滚动事件的信息。 | callback | - |

**Exceptions:**

- **BusinessException**: BusinessException：对应错误码的详细介绍请参见 通用错误码 。

| code | description |
| --- | --- |
| 401 | Parameter error: type is not supported. |


### public func off(`type`: ObserverType): Unit

```cangjie
public func off(`type`: ObserverType): Unit
```
功能： 取消指定监听事件的监听。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| ObserverType | 是 | 监听事件。 | type | - |

### public func off(`type`: ObserverType, options: ObserverOptions, callback: Callback1Argument<ScrollEventInfo>): Unit

```cangjie
public func off(`type`: ObserverType, options: ObserverOptions, callback: Callback1Argument<ScrollEventInfo>): Unit
```
功能： 取消监听滚动事件的开始和结束。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| ObserverType | 是 | 监听事件，固定为OBSERVER_SCROLL_EVENT，即滚动事件的开始和结束。 | type | - |
| ObserverOptions | 是 | 指定监听的滚动组件的id。 | options | - |
| Callback1Argument < ScrollEventInfo > | 是 | 回调函数。返回滚动事件的信息。 | callback | - |

**Exceptions:**

- **BusinessException**: BusinessException：对应错误码的详细介绍请参见 通用错误码 。

| code | description |
| --- | --- |
| 401 | Parameter error: type is not supported. |


### public func off(`type`: ObserverType, options: ObserverOptions): Unit

```cangjie
public func off(`type`: ObserverType, options: ObserverOptions): Unit
```
功能： 取消对指定组件的指定监听事件的监听。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| ObserverType | 是 | 监听事件。 | type | - |
| ObserverOptions | 是 | 指定监听的组件的id。 | options | - |

**Exceptions:**

- **BusinessException**: BusinessException：对应错误码的详细介绍请参见 通用错误码 。

| code | description |
| --- | --- |
| 401 | Parameter error: type is not supported. |


### public func off(`type`: ObserverType, callback: Callback1Argument<TabContentInfo>): Unit

```cangjie
public func off(`type`: ObserverType, callback: Callback1Argument<TabContentInfo>): Unit
```
功能： 取消监听TabContent页面的切换事件。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| ObserverType | 是 | 监听事件，固定为OBSERVER_TAB_CONTENT_UPDATE，即TabContent页面的切换事件。 | type | - |
| Callback1Argument < TabContentInfo > | 是 | 需要被注销的回调函数。 | callback | - |

**Exceptions:**

- **BusinessException**: BusinessException：对应错误码的详细介绍请参见 通用错误码 。

| code | description |
| --- | --- |
| 401 | Parameter error: type is not supported. |


### public func off(`type`: ObserverType, options: ObserverOptions, callback: Callback1Argument<TabContentInfo>): Unit

```cangjie
public func off(`type`: ObserverType, options: ObserverOptions, callback: Callback1Argument<TabContentInfo>): Unit
```
功能： 取消对指定Tabs组件的TabContent页面的切换事件的监听。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| ObserverType | 是 | 监听事件，固定为OBSERVER_TAB_CONTENT_UPDATE，即TabContent页面的切换事件。 | type | - |
| ObserverOptions | 是 | 指定监听的Tabs组件的id。 | options | - |
| Callback1Argument < TabContentInfo > | 是 | 需要被注销的回调函数。 | callback | - |

**Exceptions:**

- **BusinessException**: BusinessException：对应错误码的详细介绍请参见 通用错误码 。

| code | description |
| --- | --- |
| 401 | Parameter error: type is not supported. |


### public func on(`type`: ObserverType, callback: Callback1Argument<ScrollEventInfo>): Unit

```cangjie
public func on(`type`: ObserverType, callback: Callback1Argument<ScrollEventInfo>): Unit
```
功能： 监听滚动事件的开始和结束。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| ObserverType | 是 | 监听事件，固定为OBSERVER_SCROLL_EVENT，即滚动事件的开始和结束。 | type | - |
| Callback1Argument < ScrollEventInfo > | 是 | 回调函数。返回滚动事件的信息。 | callback | - |

**Exceptions:**

- **BusinessException**: BusinessException：对应错误码的详细介绍请参见 通用错误码 。

| code | description |
| --- | --- |
| 401 | Parameter error: type is not supported. |


### public func on(`type`: ObserverType, options: ObserverOptions, callback: Callback1Argument<ScrollEventInfo>): Unit

```cangjie
public func on(`type`: ObserverType, options: ObserverOptions, callback: Callback1Argument<ScrollEventInfo>): Unit
```
功能： 监听指定滚动组件的滚动事件的开始和结束。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| ObserverType | 是 | 监听事件，固定为OBSERVER_SCROLL_EVENT，即滚动事件的开始和结束。 | type | - |
| ObserverOptions | 是 | 指定监听的滚动组件的id。 | options | - |
| Callback1Argument < ScrollEventInfo > | 是 | 回调函数。返回滚动事件的信息。 | callback | - |

**Exceptions:**

- **BusinessException**: BusinessException：对应错误码的详细介绍请参见 通用错误码 。

| code | description |
| --- | --- |
| 401 | Parameter error: type is not supported. |


### public func on(`type`: ObserverType, callback: Callback1Argument<TabContentInfo>): Unit

```cangjie
public func on(`type`: ObserverType, callback: Callback1Argument<TabContentInfo>): Unit
```
功能： 监听TabContent页面的切换事件。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| ObserverType | 是 | 监听事件，固定为OBSERVER_TAB_CONTENT_UPDATE，即TabContent页面的切换事件。 | type | - |
| Callback1Argument < TabContentInfo > | 是 | 回调函数。携带TabContentInfo，返回TabContent页面切换事件的信息。 | callback | - |

**Exceptions:**

- **BusinessException**: BusinessException：对应错误码的详细介绍请参见 通用错误码 。

| code | description |
| --- | --- |
| 401 | Parameter error: type is not supported. |


### public func on(`type`: ObserverType, options: ObserverOptions, callback: Callback1Argument<TabContentInfo>): Unit

```cangjie
public func on(`type`: ObserverType, options: ObserverOptions, callback: Callback1Argument<TabContentInfo>): Unit
```
功能： 监听指定Tabs组件的TabContent页面的切换事件。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| ObserverType | 是 | 监听事件，固定为OBSERVER_TAB_CONTENT_UPDATE，即TabContent页面的切换事件。 | type | - |
| ObserverOptions | 是 | 指定监听的Tabs组件的id。 | options | - |
| Callback1Argument < TabContentInfo > | 是 | 回调函数。携带TabContentInfo，返回TabContent页面切换事件的信息。 | callback | - |

**Exceptions:**

- **BusinessException**: BusinessException：对应错误码的详细介绍请参见 通用错误码 。

| code | description |
| --- | --- |
| 401 | Parameter error: type is not supported. |



## Classes

### NavDesitinationInfo

class NavDesitinationInfo
```cangjie
public class NavDesitinationInfo { public NavDesitinationInfo( public let navigationId: String, public let name: String, public let state: NavDestinationState, public let index: Int32, public let param: String, public let navDestinationId: String ) }
```
功能： NavDestination组件信息。

#### let index

```cangjie
public let index: Int32
```
功能： 表示NavDestination在页面栈中的索引。
Type: Int32; Readable: true; Writable: false

#### let name

```cangjie
public let name: String
```
功能： 表示NavDestination组件的名称。
Type: String; Readable: true; Writable: false

#### let navDestinationId

```cangjie
public let navDestinationId: String
```
功能： 表示NavDestination组件的唯一标识ID。
Type: String; Readable: true; Writable: false

#### let navigationId

```cangjie
public let navigationId: String
```
功能： 表示包含NavDestination组件的Navigation组件的id。
Type: String; Readable: true; Writable: false

#### let param

```cangjie
public let param: String
```
功能： 表示NavDestination组件的参数。
Type: String; Readable: true; Writable: false

#### let state

```cangjie
public let state: NavDestinationState
```
功能： 表示NavDestination组件的状态。
Type: NavDestinationState; Readable: true; Writable: false


### NavDestinationSwitchObserverOptions

class NavDestinationSwitchObserverOptions
```cangjie
public class NavDestinationSwitchObserverOptions { public NavDestinationSwitchObserverOptions( public let navigationId: String ) }
```
功能： Navigation组件页面切换事件的监听选项。

#### let navigationId

```cangjie
public let navigationId: String
```
功能： 表示指定需要监听的Navigation的ID。
Type: String; Readable: true; Writable: false


### ObserverOptions

class ObserverOptions
```cangjie
public class ObserverOptions { public ObserverOptions( public let id: String ) }
```
功能： Observer选项。

#### let id

```cangjie
public let id: String
```
功能： 表示组件的id。
Type: String; Readable: true; Writable: false


### ScrollEventInfo

class ScrollEventInfo
```cangjie
public class ScrollEventInfo { public ScrollEventInfo( public let id: String, public let uniqueId: Int32, public let scrollEvent: ScrollEventType, public let offset: Float32 ) }
```
功能： ScrollEvent滚动信息。

#### let id

```cangjie
public let id: String
```
功能： 表示滚动组件的id。
Type: String; Readable: true; Writable: false

#### let offset

```cangjie
public let offset: Float32
```
功能： 表示滚动组件的当前偏移量。
Type: Float32; Readable: true; Writable: false

#### let scrollEvent

```cangjie
public let scrollEvent: ScrollEventType
```
功能： 表示滚动事件的类型。
Type: ScrollEventType; Readable: true; Writable: false

#### let uniqueId

```cangjie
public let uniqueId: Int32
```
功能： 表示滚动组件的uniqueId。
Type: Int32; Readable: true; Writable: false


### TabContentInfo

class TabContentInfo
```cangjie
public class TabContentInfo { public TabContentInfo( public let tabContentId: String, public let tabContentUniqueId: Int32, public let state: TabContentState, public let id: String, public let uniqueId: Int32 ) }
```
功能： TabContent页面的切换信息。

#### let id

```cangjie
public let id: String
```
功能： 表示Tabs组件的id。
Type: String; Readable: true; Writable: false

#### let state

```cangjie
public let state: TabContentState
```
功能： 表示TabContent组件的状态。
Type: TabContentState; Readable: true; Writable: false

#### let tabContentId

```cangjie
public let tabContentId: String
```
功能： 表示TabContent组件的id。
Type: String; Readable: true; Writable: false

#### let tabContentUniqueId

```cangjie
public let tabContentUniqueId: Int32
```
功能： 表示TabContent组件的uniqueId。
Type: Int32; Readable: true; Writable: false

#### let uniqueId

```cangjie
public let uniqueId: Int32
```
功能： 表示Tabs组件的uniqueId。
Type: Int32; Readable: true; Writable: false



## Enums

### NavDestinationState

enum NavDestinationState
```cangjie
public enum NavDestinationState { | ON_SHOWN | ON_HIDDEN | ON_APPEAR | ON_DISAPPEAR | ON_WILL_SHOW | ON_WILL_HIDE | ON_WILL_APPEAR | ON_WILL_DISAPPEAR | ON_BACKPRESS }
```
功能： NavDestination组件状态。

#### ON_APPEAR

```cangjie
ON_APPEAR
```
功能： NavDestination从组件树上挂载。

#### ON_BACKPRESS

```cangjie
ON_BACKPRESS
```
功能： NavDestination组件返回。

#### ON_DISAPPEAR

```cangjie
ON_DISAPPEAR
```
功能： NavDestination从组件树上卸载。

#### ON_HIDDEN

```cangjie
ON_HIDDEN
```
功能： NavDestination组件隐藏。

#### ON_SHOWN

```cangjie
ON_SHOWN
```
功能： NavDestination组件显示。

#### ON_WILL_APPEAR

```cangjie
ON_WILL_APPEAR
```
功能： NavDestination挂载到组件树之前。

#### ON_WILL_DISAPPEAR

```cangjie
ON_WILL_DISAPPEAR
```
功能： NavDestination从组件树上卸载之前。

#### ON_WILL_HIDE

```cangjie
ON_WILL_HIDE
```
功能： NavDestination组件隐藏之前。

#### ON_WILL_SHOW

```cangjie
ON_WILL_SHOW
```
功能： NavDestination组件显示之前。


### ObserverType

enum ObserverType
```cangjie
public enum ObserverType <: ToString { | OBSERVER_NAV_DESTINATION_UPDATE | OBSERVER_SCROLL_EVENT | OBSERVER_ROUTER_PAGE_UPDATE | OBSERVER_DENSITY_UPDATE | OBSERVER_WILL_DRAW | OBSERVER_DID_LAYOUT | OBSERVER_NAV_DESTINATION_SWITCH | OBSERVER_TAB_CONTENT_UPDATE }
```
功能： 监听事件类型。

#### OBSERVER_DENSITY_UPDATE

```cangjie
OBSERVER_DENSITY_UPDATE
```
功能： 屏幕像素密度变化事件。

#### OBSERVER_DID_LAYOUT

```cangjie
OBSERVER_DID_LAYOUT
```
功能： 每一帧布局完成事件。

#### OBSERVER_NAV_DESTINATION_SWITCH

```cangjie
OBSERVER_NAV_DESTINATION_SWITCH
```
功能： Navigation的页面切换事件。

#### OBSERVER_NAV_DESTINATION_UPDATE

```cangjie
OBSERVER_NAV_DESTINATION_UPDATE
```
功能： NavDestination组件的状态变化事件。

#### OBSERVER_ROUTER_PAGE_UPDATE

```cangjie
OBSERVER_ROUTER_PAGE_UPDATE
```
功能： router中page页面的状态变化事件。

#### OBSERVER_SCROLL_EVENT

```cangjie
OBSERVER_SCROLL_EVENT
```
功能： 滚动事件。

#### OBSERVER_TAB_CONTENT_UPDATE

```cangjie
OBSERVER_TAB_CONTENT_UPDATE
```
功能： TabContent页面的切换事件。

#### OBSERVER_WILL_DRAW

```cangjie
OBSERVER_WILL_DRAW
```
功能： 每一帧绘制指令下发事件。


### RouterPageState

enum RouterPageState
```cangjie
public enum RouterPageState { | ABOUT_TO_APPEAR | ABOUT_TO_DISAPPEAR | ON_PAGE_SHOW | ON_PAGE_HIDE | ON_BACK_PRESS }
```
功能： routerPage生命周期触发时对应的状态。

#### ABOUT_TO_APPEAR

```cangjie
ABOUT_TO_APPEAR
```
功能： page即将显示。

#### ABOUT_TO_DISAPPEAR

```cangjie
ABOUT_TO_DISAPPEAR
```
功能： page即将销毁。

#### ON_BACK_PRESS

```cangjie
ON_BACK_PRESS
```
功能： page返回时。

#### ON_PAGE_HIDE

```cangjie
ON_PAGE_HIDE
```
功能： page隐藏。

#### ON_PAGE_SHOW

```cangjie
ON_PAGE_SHOW
```
功能： page显示。


### ScrollEventType

enum ScrollEventType
```cangjie
public enum ScrollEventType { | SCROLL_START | SCROLL_STOP }
```
功能： 滚动事件的类型。

#### SCROLL_START

```cangjie
SCROLL_START
```
功能： 滚动事件开始。

#### SCROLL_STOP

```cangjie
SCROLL_STOP
```
功能： 滚动事件结束。


### TabContentState

enum TabContentState
```cangjie
public enum TabContentState { | ON_SHOW | ON_HIDE }
```
功能： TabContent组件的状态。

#### ON_HIDE

```cangjie
ON_HIDE
```
功能： TabContent组件显示。

#### ON_SHOW

```cangjie
ON_SHOW
```
功能： TabContent组件隐藏。



## Examples

```cangjie
package ohos_app_cangjie_entry

import ohos.state_macro_manage.*
import kit.UIKit.*

class ScrollEventCallback1 <: Callback1Argument<ScrollEventInfo> {
 public init() {}
 public open func invoke(val: ScrollEventInfo): Unit {
 AppLog.info("ScrollEvent1 id:${val.id}")
 AppLog.info("ScrollEvent1 uniqueId:${val.uniqueId}")
 match (val.scrollEvent) {
 case SCROLL_START => AppLog.info("ScrollEvent1 SCROLL_START")
 case SCROLL_STOP => AppLog.info("ScrollEvent1 SCROLL_STOP")
 case _ => throw Exception()
 }
 AppLog.info("ScrollEvent1 offset:${val.offset}")
 }
}

class ScrollEventCallback2 <: Callback1Argument<ScrollEventInfo> {
 public init() {}
 public open func invoke(val: ScrollEventInfo): Unit {
 AppLog.info("ScrollEvent2 id:${val.id}")
 AppLog.info("ScrollEvent2 uniqueId:${val.uniqueId}")
 match (val.scrollEvent) {
 case SCROLL_START => AppLog.info("ScrollEvent2 SCROLL_START")
 case SCROLL_STOP => AppLog.info("ScrollEvent2 SCROLL_STOP")
 case _ => throw Exception()
 }
 AppLog.info("ScrollEvent2 offset:${val.offset}")
 }
}

@Entry
@Component
class EntryView {
 let scrollEvent1 = ScrollEventCallback1()
 let scrollEvent2 = ScrollEventCallback2()

 func build() {
 Column {
 Column {
 Button("observer1 on").onClick({ =>
 on(ObserverType.OBSERVER_SCROLL_EVENT, scrollEvent1)
 })
 Button("observer2 on").onClick({ =>
 on(ObserverType.OBSERVER_SCROLL_EVENT, scrollEvent2)
 })
 Button("observer all off").onClick({ =>
 off(ObserverType.OBSERVER_SCROLL_EVENT)
 })
 Button("observer1 off").onClick({ =>
 off(ObserverType.OBSERVER_SCROLL_EVENT, scrollEvent1)
 })
 Button("observer with id1 on").onClick({ =>
 on(ObserverType.OBSERVER_SCROLL_EVENT, ObserverOptions("Scroll1"), scrollEvent1)
 })
 Button("observer with id2 on").onClick({ =>
 on(ObserverType.OBSERVER_SCROLL_EVENT, ObserverOptions("Scroll2"), scrollEvent2)
 })
 Button("observer with id1 off").onClick({ =>
 off(ObserverType.OBSERVER_SCROLL_EVENT, ObserverOptions("Scroll1"), scrollEvent1)
 })
 Button("observer with id all off").onClick({ =>
 off(ObserverType.OBSERVER_SCROLL_EVENT, ObserverOptions("Scroll2"))
 })
 }.width(100.percent)

 Scroll() {
 Column {
 Text("Text").fontSize(100)
 Text("Text").fontSize(100)
 Text("Text").fontSize(100)
 Text("Text").fontSize(100)
 Text("Text").fontSize(100)
 Text("Text").fontSize(100)
 Text("Text").fontSize(100)
 Text("Text").fontSize(100)
 Text("Text").fontSize(100)
 Text("Text").fontSize(100)
 }
 }.height(40.percent).width(100.percent).id("Scroll1")

 Scroll() {
 Column {
 Text("Text").fontSize(100)
 Text("Text").fontSize(100)
 Text("Text").fontSize(100)
 Text("Text").fontSize(100)
 Text("Text").fontSize(100)
 Text("Text").fontSize(100)
 Text("Text").fontSize(100)
 Text("Text").fontSize(100)
 Text("Text").fontSize(100)
 Text("Text").fontSize(100)
 }
 }.height(40.percent).width(100.percent).id("Scroll2")
 }.height(100.percent)
 }
}
```
```cangjie
package ohos_app_cangjie_entry

import ohos.state_macro_manage.*
import kit.UIKit.*

class TabContentInfoCallback1 <: Callback1Argument<TabContentInfo> {
 public init() {}
 public open func invoke(val: TabContentInfo): Unit {
 AppLog.info("TabContentUpdate1 tabContentId: ${val.tabContentId}")
 AppLog.info("TabContentUpdate1 tabContentUniqueId: ${val.tabContentUniqueId}")
 match (val.state) {
 case ON_SHOW => AppLog.info("TabContentUpdate1 ON_SHOW")
 case ON_HIDE => AppLog.info("TabContentUpdate1 ON_HIDE")
 case _ => throw Exception()
 }
 AppLog.info("TabContentUpdate1 id:${val.id}")
 AppLog.info("TabContentUpdate1 uniqueId:${val.uniqueId}")
 }
}

class TabContentInfoCallback2 <: Callback1Argument<TabContentInfo> {
 public init() {}
 public open func invoke(val: TabContentInfo): Unit {
 AppLog.info("TabContentUpdate2 tabContentId: ${val.tabContentId}")
 AppLog.info("TabContentUpdate2 tabContentUniqueId: ${val.tabContentUniqueId}")
 match (val.state) {
 case ON_SHOW => AppLog.info("TabContentUpdate2 ON_SHOW")
 case ON_HIDE => AppLog.info("TabContentUpdate2 ON_HIDE")
 case _ => throw Exception()
 }
 AppLog.info("TabContentUpdate2 id:${val.id}")
 AppLog.info("TabContentUpdate2 uniqueId:${val.uniqueId}")
 }
}

@Entry
@Component
class EntryView {
 let tabContentUpdate1 = TabContentInfoCallback1()
 let tabContentUpdate2 = TabContentInfoCallback2()

 func build() {
 Column {
 Button("observer1 on").onClick({ =>
 on(ObserverType.OBSERVER_TAB_CONTENT_UPDATE, tabContentUpdate1)
 })

 Button("observer2 on").onClick({ =>
 on(ObserverType.OBSERVER_TAB_CONTENT_UPDATE, tabContentUpdate2)
 })

 Button("observer1 off").onClick({ =>
 off(ObserverType.OBSERVER_TAB_CONTENT_UPDATE, tabContentUpdate1)
 })

 Button("observer all off").onClick({ =>
 off(ObserverType.OBSERVER_TAB_CONTENT_UPDATE)
 })

 Button("observer with id1 on").onClick({ =>
 on(ObserverType.OBSERVER_TAB_CONTENT_UPDATE, ObserverOptions("Tabs1"), tabContentUpdate1)
 })
 Button("observer with id2 on").onClick({ =>
 on(ObserverType.OBSERVER_TAB_CONTENT_UPDATE, ObserverOptions("Tabs2"), tabContentUpdate2)
 })
 Button("observer with id1 off").onClick({ =>
 off(ObserverType.OBSERVER_TAB_CONTENT_UPDATE, ObserverOptions("Tabs1"), tabContentUpdate1)
 })
 Button("observer with id all off").onClick({ =>
 off(ObserverType.OBSERVER_TAB_CONTENT_UPDATE, ObserverOptions("Tabs2"))
 })

 Tabs() {
 TabContent() {
 Column {
 Text("TabContent1")
 }
 }.id("TabContent1-1")

 TabContent() {
 Column {
 Text("TabContent2")
 }
 }.id("TabContent1-2")

 TabContent() {
 Column {
 Text("TabContent3")
 }
 }.id("TabContent1-3")
 }.width(100.percent).height(20.percent).id("Tabs1")

 Tabs() {
 TabContent() {
 Column {
 Text("TabContent1")
 }
 }.id("TabContent2-1")

 TabContent() {
 Column {
 Text("TabContent2")
 }
 }.id("TabContent2-2")

 TabContent() {
 Column {
 Text("TabContent3")
 }
 }.id("TabContent2-3")
 }.width(100.percent).height(20.percent).id("Tabs2")
 }.height(100.percent)
 }
}
```

