# ohos.distributed_device_manager（设备管理）

本模块提供分布式设备管理能力。

```cangjie
import kit.DistributedServiceKit.*
```
## Functions

### public func createDeviceManager(bundleName: String): DeviceManager

```cangjie
public func createDeviceManager(bundleName: String): DeviceManager
```
功能： 创建一个设备管理实例。设备管理实例是分布式设备管理方法的调用入口。用于获取可信设备和本地设备的相关信息。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| String | 是 | 指示应用程序的Bundle名称。 | bundleName | - |

**Returns:**

| type | description |
| --- | --- |
| DeviceManager | 返回设备管理器对象实例。 |

**Exceptions:**

- **BusinessException**: BusinessException：对应错误码的详细介绍请参见 通用错误码 。

| code | description |
| --- | --- |
| 401 | Parameter error. Possible caused by parameter verification failed. |


**Example:**

```cangjie
// index.cj

import ohos.base.*
import kit.DistributedServiceKit.*

try {
 let dm = createDeviceManager("com.example.myapplication")
} catch (e: BusinessException) {
 AppLog.error(e.toString())
}
```

### public func releaseDeviceManager(deviceManager: DeviceManager): Unit

```cangjie
public func releaseDeviceManager(deviceManager: DeviceManager): Unit
```
功能： 设备管理实例不再使用后，通过该方法释放DeviceManager实例。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| DeviceManager | 是 | 设备管理器对象实例。 | deviceManager | - |

**Exceptions:**

- **BusinessException**: BusinessException：对应错误码的详细介绍请参见 设备管理错误码 和 通用错误码 。

| code | description |
| --- | --- |
| 201 | Permission denied. The application does not have the permission required to call the API. |
| 401 | Parameter error. Possible caused by parameter verification failed. |
| 11600101 | Failed to execute the function. |


**Example:**

```cangjie
// index.cj

import ohos.base.*
import kit.DistributedServiceKit.*

try {
 let dm = createDeviceManager("com.example.myapplication")
 releaseDeviceManager(dm)
} catch (e: BusinessException) {
 AppLog.error(e.toString())
}
```


## Classes

### DeviceBasicInfo

class DeviceBasicInfo
```cangjie
public class DeviceBasicInfo { public DeviceBasicInfo( public let deviceId: String, public let deviceName: String, public let deviceType: Int32, public let networkId: String ) }
```
功能： 分布式设备基本信息。

#### let deviceId

```cangjie
public let deviceId: String
```
功能： 设备标识符。实际值为udid-hash与appid和盐值基于sha256方式进行混淆后的值。
Type: String; Readable: true; Writable: false

#### let deviceName

```cangjie
public let deviceName: String
```
功能： 设备名称。
Type: String; Readable: true; Writable: false

#### let deviceType

```cangjie
public let deviceType: Int32
```
功能： 设备类型 。
Type: Int32; Readable: true; Writable: false

#### let networkId

```cangjie
public let networkId: String
```
功能： 设备网络标识。
Type: String; Readable: true; Writable: false


### DeviceManager

class DeviceManager
```cangjie
public class DeviceManager {}
```
功能： 设备管理类，用于获取可信设备和本地设备的相关信息，并提供了发现、绑定周边设备的方法。在调用DeviceManager的方法前，需要先通过createDeviceManager构建一个DeviceManager实例。



## Enums

### DeviceStateChange

enum DeviceStateChange
```cangjie
public enum DeviceStateChange <: Equatable<DeviceStateChange> & ToString { | UNKNOWN | AVAILABLE | UNAVAILABLE | ... }
```
功能： 设备状态。

#### AVAILABLE

```cangjie
AVAILABLE
```
功能： 表示设备处于可用状态，表示设备间信息已在分布式数据中同步完成, 可以运行分布式业务。

#### UNAVAILABLE

```cangjie
UNAVAILABLE
```
功能： 表示设备物理下线，此时状态未知。

#### UNKNOWN

```cangjie
UNKNOWN
```
功能： 表示设备物理上线，此时状态未知，在状态更改为可用之前，分布式业务无法使用。


### DeviceStatusType

enum DeviceStatusType
```cangjie
public enum DeviceStatusType <: Equatable<DeviceStatusType> & ToString { | DEVICE_STATE_CHANGE | DISCOVER_SUCCESS | DEVICE_NAME_CHANGE | DISCOVER_FAILURE | UNKNOWN | ... }
```
功能： 作为 on 或 off 函数中的`type`参数传入，用于表示注册函数的类型。

#### DEVICE_NAME_CHANGE

```cangjie
DEVICE_NAME_CHANGE
```
功能： 表示设备名称发生变化。

#### DEVICE_STATE_CHANGE

```cangjie
DEVICE_STATE_CHANGE
```
功能： 表示设备状态发生变化。

#### DISCOVER_FAILURE

```cangjie
DISCOVER_FAILURE
```
功能： 表示发现设备失败。

#### DISCOVER_SUCCESS

```cangjie
DISCOVER_SUCCESS
```
功能： 表示发现设备成功。

#### UNKNOWN

```cangjie
UNKNOWN
```
功能： 表示未知的类型。


### ValueType

enum ValueType
```cangjie
public enum ValueType <: Equatable<ValueType> & ToString { | Integer(Int64) | Str(String) | ... }
```
功能： 表示数据值类型，部分函数参数需要传入键值对，将 ValueType 作为值类型。

#### Integer(Int64)

```cangjie
Integer(Int64)
```
功能： 表示Int64的整型数据。

#### Str(String)

```cangjie
Str(String)
```
功能： 表示字符串类型的数据。



