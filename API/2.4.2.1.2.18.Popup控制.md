# Popup控制

给组件绑定popup弹窗，并设置弹窗内容，交互逻辑和显示状态。

## Component Constructors

### public init( builder!: () -> Unit, placement!: Placement = Placement.Bottom, maskColor!: Color = Color(0x1000000), popupColor!: Color = Color(0x1000000), enableArrow!: Bool = true, autoCancel!: Bool = true, onStateChange!: Option<(StateChangeEvent) -> Unit> = Option.None )

```cangjie
public init( builder!: () -> Unit, placement!: Placement = Placement.Bottom, maskColor!: Color = Color(0x1000000), popupColor!: Color = Color(0x1000000), enableArrow!: Bool = true, autoCancel!: Bool = true, onStateChange!: Option<(StateChangeEvent) -> Unit> = Option.None )
```
功能： 创建CustomPopupOptions类型的对象。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| ()->Unit | 是 | 命名参数。 提示气泡内容的构造器。使用时结合 @Builder 和 bind 方法使用。 | builder | - |
| Placement | 否 | 命名参数。 气泡组件优先显示的位置。 说明： 当前位置显示不下时，会自动调整位置。 | placement | Placement.Bottom |
| Color | 否 | 命名参数。 提示气泡遮障层的颜色。 | maskColor | Color(0x1000000) |
| Color | 否 | 命名参数。 提示气泡的背景颜色。 | backgroundColor | Color(0x1000000) |
| Bool | 否 | 命名参数。 是否显示箭头。 说明： 如果箭头所在方位侧的气泡长度不足以显示下箭头，则会默认不显示箭头。比如：placement设置为Left，但气泡高度小于箭头的宽度（32vp），则实际不会显示箭头。 | enableArrow | true |
| Bool | 否 | 命名参数。 页面有操作时，是否自动关闭气泡。 | autoCancel | true |
| ?( StateChangeEvent )->Unit | 否 | 命名参数。 弹窗状态变化事件回调，参数为弹窗当前的显示状态。 | onStateChange | None |
| Color | 否 | 命名参数。 提示气泡的颜色。 | popupColor | Color(0x1000000) |
| Length | 否 | 命名参数。 popup箭头在弹窗处的偏移。 说明： 箭头在气泡上下方时，数值为0表示箭头居最左侧，偏移量为箭头至最左侧的距离，默认居中。箭头在气泡左右侧时，偏移量为箭头至最上侧的距离，默认居中。如果显示在屏幕边缘，气泡会自动左右偏移，数值为0时箭头始终指向绑定组件。 | arrowOffset | 0.vp |
| Bool | 否 | 命名参数。 是否在子窗口显示气泡。 | showInSubWindow | false |
| Color | 否 | 命名参数。 提示气泡遮障层的颜色。 | mask | Color(0x1000000) |
| Length | 否 | 命名参数。 设置popup与目标的间隙。 | targetSpace | 0.vp |
| Position | 否 | 命名参数。 popup组件相对于placement设置的显示位置的偏移。 说明： 不支持设置百分比。 | offset | Position(0.0, 0.0) |
| Length | 否 | 命名参数。 弹窗宽度。 说明： showInSubWindow=true时最大高度为设备屏幕高度，showInSubWindow=false时最大高度为应用窗口高度。高度限定逻辑=最大高度-状态栏高度（没有时高度为0）-dock栏高度（没有时高度为0）-40VP-40VP。 | width | 0.vp |
| ? ArrowPointPosition | 否 | 命名参数。 气泡尖角相对于父组件显示位置，气泡尖角在垂直和水平方向上有 ”Start“、”Center“、”End“三个位置点可选。以上所有位置点均位于父组件区域的范围内，不会超出父组件的边界范围。 | arrowPointPosition | None |
| Length | 否 | 命名参数。 箭头宽度。 说明： 若所设置的箭头宽度超过所在边的长度减去两倍的气泡圆角大小，则不绘制气泡箭头。 | arrowWidth | 16.vp |
| Length | 否 | 命名参数。 箭头高度。 说明： 不支持设置百分比。 | arrowHeight | 8.vp |
| Length | 否 | 命名参数。 气泡圆角半径。 | radius | 20.vp |
| ShadowStyle | 否 | 命名参数。 气泡阴影。 | shadow | ShadowStyle.OUTER_DEFAULT_MD |
| BlurStyle | 否 | 命名参数。 气泡模糊背景参数。 | backgroundBlurStyle | BlurStyle.COMPONENT_ULTRA_THICK |
| Bool | 否 | 命名参数。 设置气泡弹出后是否获焦。 | focusable | false |
| ? TransitionEffect | 否 | 命名参数。 自定义popup弹窗显示和退出的动画效果。 说明： 1.如果不设置，则使用默认的显示/退出动效。 2.显示动效中按back键，打断显示动效，执行退出动效，动画效果为显示动效与退出动效的曲线叠加后的效果。 3.退出动效中按back键，不会打断退出动效，退出动效继续执行，back键不被响应。 | transition | None |
| ( DismissPopupAction ) -> Unit | 否 | 命名参数。 拦截退出事件且执行回调函数。 说明： 在onWillDismiss回调中，不能再做onWillDismiss拦截。 | onWillDismiss | None |
| Bool | 否 | 命名参数。 气泡绑定的宿主组件或其宿主组件的父容器添加了旋转、缩放等变换时，气泡是否能显示在对应变化后的位置上。 | followTransformOfTarget | false |

### public init( message!: String, placementOnTop!: Bool = false, primaryButton!: Action = Action(value: "", action: { => }), secondaryButton!: Action = Action(value: "", action: { => }), onStateChange!: Option<(StateChangeEvent) -> Unit> = Option.None )

```cangjie
public init( message!: String, placementOnTop!: Bool = false, primaryButton!: Action = Action(value: "", action: { => }), secondaryButton!: Action = Action(value: "", action: { => }), onStateChange!: Option<(StateChangeEvent) -> Unit> = Option.None )
```
功能： 构建一个PopupOptions类型的对象。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| string | 是 | 命名参数。 弹窗信息内容。 | message |  |
| Bool | 否 | 命名参数。 是否在组件上方显示。 | placementOnTop | false |
| Action | 否 | 命名参数。 第一个按钮。 value: 弹窗里主按钮的文本。 action: 点击主按钮的回调函数。 | primaryButton | Action(value: "", action: {=>}) |
| Action | 否 | 命名参数。 第二个按钮。 value: 弹窗里主按钮的文本。 action: 点击主按钮的回调函数。 | secondaryButton | Action(value: "", action: {=>}) |
| ?( StateChangeEvent )->Unit | 否 | 命名参数。 弹窗状态变化事件回调，参数为弹窗当前的显示状态。 | onStateChange | None |
| PopupMessageOptions | 否 | 命名参数。 弹窗信息文本参数。 | messageOptions | PopupMessageOptions() |
| Length | 否 | 命名参数。 popup箭头在弹窗处的偏移。 说明： 箭头在气泡上下方时，数值为0表示箭头居最左侧，偏移量为箭头至最左侧的距离，默认居中。箭头在气泡左右侧时，偏移量为箭头至最上侧的距离，默认居中。如果显示在屏幕边缘，气泡会自动左右偏移，数值为0时箭头始终指向绑定组件。 | arrowOffset | 0.vp |
| Bool | 否 | 命名参数。 是否在子窗口显示气泡。 | showInSubWindow | false |
| Color | 否 | 命名参数。 提示气泡遮障层的颜色。 | mask | Color(0x1000000) |
| Length | 否 | 命名参数。 popup与目标的间隙。 | targetSpace | 0.vp |
| Placement | 否 | 命名参数。 popup组件相对于目标的显示位置。 说明： 如果同时设置了placementOnTop和placement，则以placement的设置生效。 | placement | Placement.Bottom |
| Position | 否 | 命名参数。 popup组件相对于placement设置的显示位置的偏移。 说明： 不支持设置百分比。 | offset | Position(0.0, 0.0) |
| Bool | 否 | 命名参数。 是否显示箭头。 说明： 如果箭头所在方位侧的气泡长度不足以显示下箭头，则会默认不显示箭头。比如：placement设置为Left，但气泡高度小于箭头的宽度（32vp），则实际不会显示箭头。 | enableArrow | true |
| Color | 否 | 命名参数。 提示气泡的颜色。 | popupColor | Color(0x1000000) |
| Bool | 否 | 命名参数。 页面有操作时，是否自动关闭气泡。 | autoCancel | true |
| Length | 否 | 命名参数。 弹窗宽度。 | width | 0.vp |
| ? ArrowPointPosition | 否 | 命名参数。 气泡尖角相对于父组件显示位置，气泡尖角在垂直和水平方向上有 ”Start“、”Center“、”End“三个位置点可选。以上所有位置点均位于父组件区域的范围内，不会超出父组件的边界范围。 | arrowPointPosition | None |
| Length | 否 | 命名参数。 箭头高度。 说明： 不支持设置百分比。 | arrowHeight | 8.vp |
| Length | 否 | 命名参数。 箭头宽度。 说明： 若所设置的箭头宽度超过所在边的长度减去两倍的气泡圆角大小，则不绘制气泡箭头。 | arrowWidth | 16.vp |
| Length | 否 | 命名参数。 气泡圆角半径。 | radius | 20.vp |
| ShadowStyle | 否 | 命名参数。 气泡阴影。 | shadow | ShadowStyle.OUTER_DEFAULT_MD |
| BlurStyle | 否 | 命名参数。 气泡模糊背景参数。 | backgroundBlurStyle | BlurStyle.COMPONENT_ULTRA_THICK |
| ? TransitionEffect | 否 | 命名参数。 自定义popup弹窗显示和退出的动画效果。 说明： 1.如果不设置，则使用默认的显示/退出动效。 2.显示动效中按back键，打断显示动效，执行退出动效，动画效果为显示动效与退出动效的曲线叠加后的效果。 3.退出动效中按back键，不会打断退出动效，退出动效继续执行，back键不被响应。 | transition | None |
| ( DismissPopupAction ) -> Unit | 否 | 命名参数。 拦截退出事件且执行回调函数。 | onWillDismiss | None |
| Bool | 否 | 命名参数。 气泡绑定的宿主组件或其宿主组件的父容器添加了旋转、缩放等变换时，气泡是否能显示在对应变化后的位置上。 | followTransformOfTarget | false |

### public init()

```cangjie
public init()
```
功能： 构建一个空的PopupOptions类型的对象。


## Functions

### public func bindPopup( show!: Bool, popup!: CustomPopupOptions )

```cangjie
public func bindPopup( show!: Bool, popup!: CustomPopupOptions )
```
功能： 给组件绑定Popup弹窗。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| Bool | 是 | 命名参数。 弹窗显示状态。 初始值：false，表示隐藏弹窗。popup弹窗必须等待页面全部构建完成才能展示，因此show不能在页面构建中设置为true，否则会导致popup弹窗显示位置及形状错误。 | show | - |
| CustomPopupOptions | 是 | 命名参数。 配置当前弹窗提示的参数。 | popup | - |

### public func bindPopup( show!: Bool, popup!: PopupOptions )

```cangjie
public func bindPopup( show!: Bool, popup!: PopupOptions )
```
功能： 给组件绑定Popup弹窗。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| Bool | 是 | 命名参数。 弹窗显示状态。 初始值：false，表示隐藏弹窗。popup弹窗必须等待页面全部构建完成才能展示，因此show不能在页面构建中设置为true，否则会导致popup弹窗显示位置及形状错误。 | show | - |
| PopupOptions | 是 | 命名参数。 配置当前弹窗提示的参数。 | popup | - |


## Classes

### Action

class Action
```cangjie
public class Action { public Action( let value!: String, let action!: () -> Unit ) }
```
功能： 用于配置弹窗按钮参数的类型。

#### let value

```cangjie
let value: String
```
功能： 弹窗里主按钮的文本。
Type: String; Readable: true; Writable: false

#### let action

```cangjie
let action: () -> Unit
```
功能： 点击辅助按钮的回调函数。
Type: () -> Unit; Readable: true; Writable: false


### CustomPopupOptions

class CustomPopupOptions
```cangjie
public class CustomPopupOptions { public var builder: () -> Unit = {=>} public var placement: Placement = Placement.Bottom public var maskColor: Color = Color(0x1000000) public var backgroundColor: Color = Color(0x1000000) public var enableArrow: Bool = true public var autoCancel: Bool = true public var onStateChange: Option<(StateChangeEvent) -> Unit> = Option.None public var popupColor: ?Color = None public var arrowOffset: Length = 0.vp public var showInSubWindow: Bool = false public var mask: ?Color = None public var targetSpace: Length = 0.vp public var offset: Position = Position(0.0, 0.0) public var width: Length = 0.vp public var arrowPointPosition: Option<ArrowPointPosition> = None public var arrowWidth: Length = 16.vp public var arrowHeight: Length = 8.vp public var radius: Length = 20.vp public var shadow: ShadowStyle = ShadowStyle.OUTER_DEFAULT_MD public var backgroundBlurStyle: BlurStyle = BlurStyle.COMPONENT_ULTRA_THICK public var focusable: Bool = false public var transition: Option<TransitionEffect> = Option.None public var onWillDismiss: Option<(DismissPopupAction) -> Unit> = Noneic var followTransformOfTarget: Bool = false public init( builder!: () -> Unit, placement!: Placement = Placement.Bottom, maskColor!: Color = Color(0x1000000), popupColor!: Color = Color(0x1000000), enableArrow!: Bool = true, autoCancel!: Bool = true, onStateChange!: Option<(StateChangeEvent) -> Unit> = Option.None ) public init( builder!: () -> Unit, placement!: Placement = Placement.Bottom, maskColor!: Color = Color(0x1000000), popupColor!: Color = Color(0x1000000), enableArrow!: Bool = true, autoCancel!: Bool = true, onStateChange!: Option<(StateChangeEvent) -> Unit> = Option.None, showInSubWindow!: Bool, // 5.1 start backgroundColor!: Color = Color(0x1000000), arrowOffset!: Length = 0.vp, mask!: ?Color = None, targetSpace!: Length = 0.vp, offset!: Position = Position(0.0, 0.0), width!: Length = 0.vp, arrowPointPosition!: ?ArrowPointPosition = None, arrowWidth!: Length = 16.vp, arrowHeight!: Length = 16.vp, radius!: Length = 20.vp, shadow!: ShadowStyle = ShadowStyle.OUTER_DEFAULT_MD, backgroundBlurStyle!: BlurStyle = BlurStyle.COMPONENT_ULTRA_THICK, focusable!: Bool = false, transition!: Option<TransitionEffect> = Option.None, onWillDismiss! : Option<(DismissPopupAction) -> Unit> = None, followTransformOfTarget!: Bool = false ) public init() {} }
```
功能： 弹出弹窗的参数。

#### var arrowHeight

```cangjie
public var arrowHeight: Length = 8.vp
```
功能： 设置箭头高度。默认值：8.vp。
Type: Length; Readable: true; Writable: true

#### var arrowOffset

```cangjie
public var arrowOffset: Length = 0.vp
```
功能： 设置popup箭头在弹窗处的偏移。箭头在气泡上下方时，数值为0表示箭头居最左侧，偏移量为箭头至最左侧的距离，默认居中。箭头在气泡左右侧时，偏移量为箭头至最上侧的距离，默认居中。如果显示在屏幕边缘，气泡会自动左右偏移，数值为0时箭头始终指向绑定组件。
Type: Length; Readable: true; Writable: true

#### var arrowPointPosition

```cangjie
public var arrowPointPosition: Option<ArrowPointPosition>= None
```
功能： 设置气泡尖角相对于父组件显示位置，气泡尖角在垂直和水平方向上有 "Start"、"Center"、"End"三个位置点可选。以上所有位置点均位于父组件区域所在的范围内，不会超出父组件的边界范围。
Type: ? ArrowPointPosition; Readable: true; Writable: true

#### var arrowWidth

```cangjie
public var arrowWidth: Length = 16.vp
```
功能： 设置箭头宽度。若所设置的箭头宽度超过所在边的长度减去两倍的气泡圆角大小，则不绘制气泡箭头。默认值：16.vp。
Type: Length; Readable: true; Writable: true

#### var autoCancel

```cangjie
public var autoCancel: Bool = true
```
功能： 页面有操作时，是否自动关闭气泡。默认值：true。
Type: Bool; Readable: true; Writable: true

#### var backgroundBlurStyle

```cangjie
public var backgroundBlurStyle: BlurStyle = BlurStyle.COMPONENT_ULTRA_THICK
```
功能： 设置气泡模糊背景参数。默认值：BlurStyle.COMPONENT_ULTRA_THICK。
Type: BlurStyle; Readable: true; Writable: true

#### var backgroundColor

```cangjie
public var backgroundColor: Color = Color(0x1000000)
```
功能： 设置提示气泡背景颜色。
Type: Color; Readable: true; Writable: true

#### var builder

```cangjie
public var builder:() -> Unit
```
功能： 提示气泡内容的构造器。
Type: ()->Unit; Readable: true; Writable: true

#### var enableArrow

```cangjie
public var enableArrow: Bool = true
```
功能： 设置是否显示箭头。如果箭头所在方位侧的气泡长度不足以显示下箭头，则会默认不显示箭头。例如placement设置为Left，此时如果气泡高度小于箭头的宽度（32.vp）与气泡圆角两倍（48.vp）之和（80.vp），则实际不会显示箭头。默认值：true。
Type: Bool; Readable: true; Writable: true

#### var focusable

```cangjie
public var focusable: Bool = false
```
功能： 设置气泡弹出后是否获焦。默认值：false。
Type: Bool; Readable: true; Writable: true

#### var followTransformOfTarget

```cangjie
public var followTransformOfTarget: Bool = false
```
功能： 气泡绑定的宿主组件或其宿主组件的父容器添加了旋转、缩放等变换时，气泡是否能显示在对应变化后的位置上。默认值：false。
Type: Bool; Readable: true; Writable: true

#### var mask

```cangjie
public var mask: Color = Color(0x1000000)
```
功能： 设置遮罩层的颜色。
Type: Color; Readable: true; Writable: true

#### var maskColor

```cangjie
public var maskColor: Color = Color(0x1000000)
```
功能： 设置气泡遮罩层颜色。
Type: Color; Readable: true; Writable: true

#### var offset

```cangjie
public var offset: Position = Position(0.0, 0.0)
```
功能： 设置popup组件相对于placement设置的显示位置的偏移。不支持设置百分比。
Type: Position; Readable: true; Writable: true

#### var onStateChange

```cangjie
public var onStateChange: Option <(StateChangeEvent) -> Unit>= Option.None
```
功能： 设置弹窗状态变化事件回调，参数为弹窗当前的显示状态。
Type: ? StateChangeEvent; Readable: true; Writable: true

#### var onWillDismiss

```cangjie
public var onWillDismiss: Option <(DismissPopupAction) -> Unit>= None
```
功能： 设置popup交互式关闭拦截开关及拦截回调函数。
Type: ( DismissPopupAction )->Unit; Readable: true; Writable: true

#### var placement

```cangjie
public var placement: Placement = Placement.Bottom
```
功能： 设置气泡组件优先显示的位置，当前位置显示不下时，会自动调整位置。默认值：Placement.Bottom。
Type: Placement; Readable: true; Writable: true

#### var popupColor

```cangjie
public var popupColor: Color = Color(0x1000000)
```
功能： 设置提示气泡的颜色。如需去除模糊背景填充效果，需将backgroundBlurStyle设置为BlurStyle.NONE。
Type: Color; Readable: true; Writable: true

#### var radius

```cangjie
public var radius: Length = 20.vp
```
功能： 设置气泡圆角半径。默认值：20.vp。
Type: Length; Readable: true; Writable: true

#### var shadow

```cangjie
public var shadow: ShadowStyle = ShadowStyle.OUTER_DEFAULT_MD
```
功能： 设置气泡阴影。默认值：ShadowStyle.OUTER_DEFAULT_MD。
Type: ShadowStyle; Readable: true; Writable: true

#### var showInSubWindow

```cangjie
public var showInSubWindow: Bool = false
```
功能： 设置是否在子窗口显示气泡，默认值为false，不显示。
Type: Bool; Readable: true; Writable: true

#### var targetSpace

```cangjie
public var targetSpace: Length = 0.vp
```
功能： 设置popup与目标的间隙。
Type: Length; Readable: true; Writable: true

#### var transition

```cangjie
public var transition: Option<TransitionEffect>= Option.None
```
功能： 自定义设置popup弹窗显示和退出的动画效果。
Type: ? TransitionEffect; Readable: true; Writable: true

#### var width

```cangjie
public var width: Length = 0.vp
```
功能： 设置弹窗宽度。
Type: Length; Readable: true; Writable: true


### DismissPopupAction

class DismissPopupAction
```cangjie
public class DismissPopupAction { public DismissPopupAction(public let reason!: DismissReason) }
```
功能： 设置popup交互式关闭拦截开关及拦截回调函数。

#### let reason

```cangjie
public let reason: DismissReason
```
功能： 关闭原因，返回本次拦截popup消失的事件原因。
Type: DismissReason; Readable: true; Writable: false


### PopupOptions

class PopupOptions
```cangjie
public class PopupOptions { public var message: String = "" public var placementOnTop: Bool = false public var primaryButton: Action = Action(value: "", action: {=>}) public var secondaryButton: Action = Action(value: "", action: {=>}) public var onStateChange: Option<(StateChangeEvent) -> Unit> = Option.None public var messageOptions: PopupMessageOptions = PopupMessageOptions() public var arrowOffset: Length = 0.vp public var showInSubWindow: Bool = false public var mask: Color = Color(0x1000000) public var targetSpace: Length = 0.vp public var placement: ?Placement = Option.None public var offset: Position = Position(0.0, 0.0) public var enableArrow: Bool = true public var popupColor: Color = Color(0x1000000) public var autoCancel: Bool = true public var width: Length = 0.vp public var arrowPointPosition: Option<ArrowPointPosition> = None public var arrowWidth: Length = 16.vp public var arrowHeight: Length = 8.vp public var radius: Length = 20.vp public var shadow: ShadowStyle = ShadowStyle.OUTER_DEFAULT_MD public var backgroundBlurStyle: BlurStyle = BlurStyle.COMPONENT_ULTRA_THICK public var transition: Option<TransitionEffect> = Option.None public var onWillDismiss: Option<(DismissPopupAction) -> Unit> = None public var followTransformOfTarget: Bool = false public init( message!: String, placementOnTop!: Bool = false, primaryButton!: Action = Action(value: "", action: { => }), secondaryButton!: Action = Action(value: "", action: { => }), onStateChange!: Option<(StateChangeEvent) -> Unit> = Option.None ) public init( message!: String, placementOnTop!: Bool = false, primaryButton!: Action = Action(value: "", action: { => }), secondaryButton!: Action = Action(value: "", action: { => }), onStateChange!: Option<(StateChangeEvent) -> Unit> = Option.None, arrowOffset!: Length = 0.vp, showInSubWindow!: Bool, messageOptions!: PopupMessageOptions = PopupMessageOptions(), mask!: Color = Color(0x1000000), targetSpace!: Length = 0.vp, placement!: ?Placement = Option.None, offset!: Position = Position(0.0, 0.0), enableArrow!: Bool = true, popupColor!: Color = Color(0x1000000), autoCancel!: Bool = true, width!: Length = 0.vp, arrowPointPosition!: ?ArrowPointPosition = None, arrowWidth!: Length = 16.vp, arrowHeight!: Length = 8.vp, radius!: Length = 20.vp, shadow!: ShadowStyle = ShadowStyle.OUTER_DEFAULT_MD, backgroundBlurStyle!: BlurStyle = BlurStyle.COMPONENT_ULTRA_THICK, transition!: ?TransitionEffect = Option.None, onWillDismiss!: Option<(DismissPopupAction) -> Unit> = None, followTransformOfTarget!: Bool = false ) public init() {} }
```
功能： 弹窗的参数。

#### var arrowHeight

```cangjie
public var arrowHeight: Length = 8.vp
```
功能： 设置箭头高度。默认值：8.vp。
Type: Length; Readable: true; Writable: true

#### var arrowOffset

```cangjie
public var arrowOffset: Length = 0.vp
```
功能： 设置popup箭头在弹窗处的偏移。箭头在气泡上下方时，数值为0表示箭头居最左侧，偏移量为箭头至最左侧的距离，默认居中。箭头在气泡左右侧时，偏移量为箭头至最上侧的距离，默认居中。如果显示在屏幕边缘，气泡会自动左右偏移，数值为0时箭头始终指向绑定组件。
Type: Length; Readable: true; Writable: true

#### var arrowPointPosition

```cangjie
public var arrowPointPosition: Option<ArrowPointPosition>= None
```
功能： 设置气泡尖角相对于父组件显示位置，气泡尖角在垂直和水平方向上有 "Start"、"Center"、"End"三个位置点可选。以上所有位置点均位于父组件区域所在的范围内，不会超出父组件的边界范围。
Type: ? ArrowPointPosition; Readable: true; Writable: true

#### var arrowWidth

```cangjie
public var arrowWidth: Length = 16.vp
```
功能： 设置箭头宽度。若所设置的箭头宽度超过所在边的长度减去两倍的气泡圆角大小，则不绘制气泡箭头。默认值：16.vp。
Type: Length; Readable: true; Writable: true

#### var autoCancel

```cangjie
public var autoCancel: Bool = true
```
功能： 页面有操作时，设置是否自动关闭气泡。默认值：true。
Type: Bool; Readable: true; Writable: true

#### var backgroundBlurStyle

```cangjie
public var backgroundBlurStyle: BlurStyle = BlurStyle.COMPONENT_ULTRA_THICK
```
功能： 设置气泡模糊背景参数。默认值：BlurStyle.COMPONENT_ULTRA_THICK。
Type: BlurStyle; Readable: true; Writable: true

#### var enableArrow

```cangjie
public var enableArrow: Bool = true
```
功能： 设置是否显示箭头。默认值：true。当页面可用空间无法让气泡完全避让时，气泡会覆盖到组件上并且不显示箭头。
Type: Bool; Readable: true; Writable: true

#### var followTransformOfTarget

```cangjie
public var followTransformOfTarget: Bool = false
```
功能： 气泡绑定的宿主组件或其宿主组件的父容器添加了旋转、缩放等变换时，设置气泡是否能显示在对应变化后的位置上。默认值：false。
Type: Bool; Readable: true; Writable: true

#### var mask

```cangjie
public var mask: Color = Color(0x1000000)
```
功能： 设置遮罩层的颜色。
Type: Color; Readable: true; Writable: true

#### var message

```cangjie
public var message: String
```
功能： 设置弹窗信息内容。
Type: String; Readable: true; Writable: true

#### var messageOptions

```cangjie
public var messageOptions: PopupMessageOptions = PopupMessageOptions()
```
功能： 设置弹窗信息文本参数。
Type: PopupMessageOptions; Readable: true; Writable: true

#### var offset

```cangjie
public var offset: Position = Position(0.0, 0.0)
```
功能： 设置popup组件相对于placement设置的显示位置的偏移。不支持设置百分比。
Type: Position; Readable: true; Writable: true

#### var onStateChange

```cangjie
public var onStateChange: Option <(StateChangeEvent) -> Unit>= Option.None
```
功能： 设置弹窗状态变化事件回调，参数为弹窗当前的显示状态。
Type: ?( StateChangeEvent )->Unit; Readable: true; Writable: true

#### var onWillDismiss

```cangjie
public var onWillDismiss: Option <(DismissPopupAction) -> Unit>= None
```
功能： 设置拦截退出事件且执行回调函数。
Type: ( DismissPopupAction )->Unit; Readable: true; Writable: true

#### var placement

```cangjie
public var placement: Placement = Placement.Bottom
```
功能： 设置popup组件相对于目标的显示位置，默认值为Placement.Bottom。如果同时设置了placementOnTop和placement，则以placement的设置生效。
Type: Placement; Readable: true; Writable: true

#### var placementOnTop (deprecated)

```cangjie
public var placementOnTop: Bool = false
```
功能： 设置是否在组件上方显示，默认值为false。已经废弃，建议使用placement替代。
Type: Bool; Readable: true; Writable: true

#### var popupColor

```cangjie
public var popupColor: Color = Color(0x1000000)
```
功能： 设置提示气泡的颜色。如需去除模糊背景填充效果，需将backgroundBlurStyle设置为BlurStyle.NONE。
Type: Color; Readable: true; Writable: true

#### var primaryButton

```cangjie
public var primaryButton: Action = Action(value: "", action: { => })
```
功能： 设置第一个按钮。value: 弹窗里主按钮的文本。action: 点击主按钮的回调函数。
Type: Action; Readable: true; Writable: true

#### var radius

```cangjie
public var radius: Length = 20.vp
```
功能： 设置气泡圆角半径。默认值：20.vp。
Type: Length; Readable: true; Writable: true

#### var secondaryButton

```cangjie
public var secondaryButton: Action = Action(value: "", action: { => })
```
功能： 设置第二个按钮。 value: 弹窗里辅助按钮的文本。action: 点击辅助按钮的回调函数。
Type: Action; Readable: true; Writable: true

#### var shadows

```cangjie
public var shadow: ShadowStyle = ShadowStyle.OUTER_DEFAULT_MD
```
功能： 设置气泡阴影。默认值：ShadowStyle.OUTER_DEFAULT_MD。
Type: ShadowStyle; Readable: true; Writable: true

#### var showInSubWindow

```cangjie
public var showInSubWindow: Bool = false
```
功能： 设置是否在子窗口显示气泡，默认值为false。
Type: Bool; Readable: true; Writable: true

#### var targetSpace

```cangjie
public var targetSpace: Length = 0.vp
```
功能： 设置popup与目标的间隙。
Type: Length; Readable: true; Writable: true

#### var transition

```cangjie
public var transition: Option<TransitionEffect>= Option.None
```
功能： 自定义设置popup弹窗显示和退出的动画效果。
Type: ? TransitionEffect; Readable: true; Writable: true

#### var width

```cangjie
public var width: Length = 0.vp
```
功能： 设置弹窗宽度。
Type: Length; Readable: true; Writable: true


### StateChangeEvent

class StateChangeEvent
```cangjie
public class StateChangeEvent { public StateChangeEvent(public let isVisible: Bool) }
```
功能： 表示显示状态的类型。

#### let isVisible

```cangjie
public let isVisible: Bool
```
功能： 当前的显示状态。
Type: Bool; Readable: true; Writable: false



## Structs

### PopupMessageOptions

struct PopupMessageOptions
```cangjie
public struct PopupMessageOptions { public PopupMessageOptions( public let textColor!: Color = Color(0x000000), public let font!: Fonts = Fonts() ) }
```
功能： 弹窗信息文本参数。



## Examples

```cangjie
package ohos_app_cangjie_entry

import ohos.component.*
import ohos.state_manage.*
import ohos.state_macro_manage.*
import ohos.base.{LengthProp, Length, AppLog, Color, nativeLog, BaseLog, LengthType}

@Builder
func popupBuilder() {
 Column {
 Text("Custom Popup")
 }
}

@Entry
@Component
class EntryView {
 @State var msg: String = "State Change Wait"
 @State var dismiss: String = "Dismiss Wait"
 @State var custom: String = "Custom Wait"
 @State var handlePopup: Bool = false
 @State var customPopup: Bool = false

 public func build() {
 Flex(FlexOptions(direction: FlexDirection.Column)) {
 Text(msg)
 Text(dismiss)
 Text(custom)
 Button('PopupOptions')
 .margin(top: 200)
 .onClick {
 this.handlePopup = !this.handlePopup
 }
 .bindPopup(
 show: this.handlePopup,
 popup: PopupOptions(
 message: 'This is a popup with PopupOptions',
 placementOnTop: true,
 primaryButton: Action(
 value: 'confirm',
 action: {
 => this.handlePopup = !this.handlePopup
 }
 ),
 secondaryButton: Action(
 value: 'cancel',
 action: {
 => this.handlePopup = !this.handlePopup
 }
 ),
 onStateChange: {
 e =>
 this.msg = "PopUp"
 if (!e.isVisible) {
 this.msg = "Wait"
 this.handlePopup = false
 }
 },
 showInSubWindow: false,
 arrowOffset: 60.0.vp,
 targetSpace: 20.0.vp,
 enableArrow: true,
 arrowHeight: 30.0.vp,
 arrowWidth: 30.0.vp,
 radius: 25.0.vp,
 autoCancel: true,
 backgroundBlurStyle: BlurStyle.Thick,
 shadow: ShadowStyle.OUTER_FLOATING_SM,
 offset: Position(50.0, 50.0),
 placement: Placement.Top,
 arrowPointPosition: ArrowPointPosition.CENTER,
 mask: Color(0x33000000),
 popupColor: Color.GREEN,
 messageOptions: PopupMessageOptions(textColor: Color.BLUE, font: Fonts(size: 20.vp)),
 transition: TransitionEffect.SLIDE_SWITCH,
 onWillDismiss: {
 dismissPopupAction: DismissPopupAction =>
 dismissPopupAction.dismiss()
 match (dismissPopupAction.reason) {
 case PRESS_BACK => this.dismiss = "dismissReason: PRESS_BACK"
 case TOUCH_OUTSIDE => this.dismiss = "dismissReason: TOUCH_OUTSIDE"
 case _ => this.dismiss = "dismissReason: unknown"
 }
 },
 followTransformOfTarget: true
 )
 )
 Button("CustomPopupOptions")
 .onClick({=> customPopup = !customPopup})
 .bindPopup(
 show: customPopup,
 popup: CustomPopupOptions(
 builder: bind(popupBuilder, this),
 enableArrow: true,
 placement: Placement.BottomLeft,
 showInSubWindow: false,
 popupColor: Color.RED,
 arrowHeight: 24.0.vp,
 arrowWidth: 24.0.vp,
 radius: 10.vp,
 offset: Position(5.0, 5.0),
 width: 300.vp,
 autoCancel: true,
 targetSpace: 10.vp,
 arrowOffset: 5.vp,
 focusable: true,
 arrowPointPosition: ArrowPointPosition.CENTER,
 transition: TransitionEffect.SLIDE_SWITCH,
 onStateChange: {
 evt =>
 custom = "stateChange: ${evt.isVisible}"
 if (!evt.isVisible) {
 customPopup = true
 }
 }
 )
 )
 }
 }
}
```

