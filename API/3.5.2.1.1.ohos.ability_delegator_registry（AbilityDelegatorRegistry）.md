# ohos.ability_delegator_registry（AbilityDelegatorRegistry）

AbilityDelegatorRegistry模块提供用于存储已注册的 AbilityDelegator 和 AbilityDelegatorArgs 对象的全局寄存器的能力，包括获取应用程序的 AbilityDelegator 对象、获取单元测试参数对象。该模块中的接口只能用于测试框架中。

```cangjie
import kit.TestKit.*
```
## Classes

### AbilityDelegator

class AbilityDelegator
```cangjie
public class AbilityDelegator {}
```
功能： AbilityDelegator用于创建并管理一个 AbilityMonitor 对象（该对象用于监视指定 UIAbility 生命周期状态的更改），包括对 AbilityMonitor 实例的添加、删除，等待 UIAbility 到达OnCreate生命周期、设置等待时间、获取指定Ability的生命周期状态、获取当前应用顶部 UIAbility 、启动指定 UIAbility 等。


### AbilityDelegatorArgs

class AbilityDelegatorArgs
```cangjie
public class AbilityDelegatorArgs {}
```
功能： 测试参数信息。

#### prop bundleName

```cangjie
public mut prop bundleName: String
```
功能： 当前被测试应用的包名。
Type: String; Readable: true; Writable: true

#### prop parameters

```cangjie
public mut prop parameters: HashMap<String, String>
```
功能： 当前启动单元测试的参数。
Type: HashMap<String, String>; Readable: true; Writable: true

#### prop testCaseNames

```cangjie
public mut prop testCaseNames: String
```
功能： 测试用例名称。
Type: String; Readable: true; Writable: true

#### prop testRunnerClassName

```cangjie
public mut prop testRunnerClassName: String
```
功能： 执行测试用例的测试执行器名称。
Type: String; Readable: true; Writable: true


### AbilityDelegatorRegistry

class AbilityDelegatorRegistry
```cangjie
public class AbilityDelegatorRegistry {}
```
功能： AbilityDelegatorRegistry 提供用于存储已注册的 AbilityDelegator 和 AbilityDelegatorArgs 对象的全局寄存器的能力。


### AbilityMonitor

class AbilityMonitor
```cangjie
public class AbilityMonitor { public AbilityMonitor( public var abilityName: String, public var moduleName!: String = "", public var onAbilityCreate!: ?(UIAbility) -> Unit = None, public var onAbilityForeground!: ?(UIAbility) -> Unit = None, public var onAbilityBackground!: ?(UIAbility) -> Unit = None, public var onAbilityDestroy!: ?(UIAbility) -> Unit = None, public var onWindowStageCreate!: ?(UIAbility) -> Unit = None, public var onWindowStageRestore!: ?(UIAbility) -> Unit = None, public var onWindowStageDestroy!: ?(UIAbility) -> Unit = None ) }
```
功能： AbilityMonitor 模块提供匹配满足指定条件的受监视能力对象的方法的能力，最近匹配的ability对象将保存在 AbilityMonitor 中。

#### var abilityName

```cangjie
public var abilityName: String
```
功能： 当前 AbilityMonitor 绑定的ability名称。
Type: String; Readable: true; Writable: true

#### var moduleName

```cangjie
public var moduleName: String = ""
```
功能： 当前 AbilityMonitor 绑定的模块名称。
Type: String; Readable: true; Writable: true

#### var onAbilityBackground

```cangjie
public var onAbilityBackground: ?(UIAbility) -> Unit = None
```
功能： ability状态变成后台时的回调函数。不设置该属性则不能收到该生命周期回调。
Type: ?( UIAbility ) -> Unit; Readable: true; Writable: true

#### var onAbilityCreate

```cangjie
public var onAbilityCreate: ?(UIAbility) -> Unit = None
```
功能： ability被启动初始化时的回调函数。不设置该属性则不能收到该生命周期回调。
Type: ?( UIAbility ) -> Unit; Readable: true; Writable: true

#### var onAbilityDestroy

```cangjie
public var onAbilityDestroy: ?(UIAbility) -> Unit = None
```
功能： ability被销毁前的回调函数。不设置该属性则不能收到该生命周期回调。
Type: ?( UIAbility ) -> Unit; Readable: true; Writable: true

#### var onAbilityForeground

```cangjie
public var onAbilityForeground: ?(UIAbility) -> Unit = None
```
功能： ability状态变成前台时的回调函数。不设置该属性则不能收到该生命周期回调。
Type: ?( UIAbility ) -> Unit; Readable: true; Writable: true

#### var onWindowStageCreate

```cangjie
public var onWindowStageCreate: ?(UIAbility) -> Unit = None
```
功能： window stage被创建时的回调函数。不设置该属性则不能收到该生命周期回调。
Type: ?( UIAbility ) -> Unit; Readable: true; Writable: true

#### var onWindowStageDestroy

```cangjie
public var onWindowStageDestroy: ?(UIAbility) -> Unit = None
```
功能： window stage被销毁前的回调函数。不设置该属性则不能收到该生命周期回调。
Type: ?( UIAbility ) -> Unit; Readable: true; Writable: true

#### var onWindowStageRestore

```cangjie
public var onWindowStageRestore: ?(UIAbility) -> Unit = None
```
功能： window stage被重载时的回调函数。不设置该属性则不能收到该生命周期回调。
Type: ?( UIAbility ) -> Unit; Readable: true; Writable: true


### AbilityStageMonitor

class AbilityStageMonitor
```cangjie
public class AbilityStageMonitor { public AbilityStageMonitor( public var moduleName: String, public var srcEntrance: String ) }
```
功能： AbilityStageMonitor 模块提供用于匹配满足指定条件的受监视的 AbilityStage 对象的方法。最近匹配的 AbilityStage 对象将保存在 AbilityStageMonitor 中。

#### var moduleName

```cangjie
public var moduleName: String
```
功能： 要监视的abilityStage的模块名。
Type: String; Readable: true; Writable: true

#### var srcEntrance

```cangjie
public var srcEntrance: String
```
功能： 要监视的abilityStage的源路径。
Type: String; Readable: true; Writable: true


### ShellCmdResult

class ShellCmdResult
```cangjie
public class ShellCmdResult {}
```
功能： Shell命令执行结果。



## Enums

### AbilityLifecycleState

enum AbilityLifecycleState
```cangjie
public enum AbilityLifecycleState <: Equatable<AbilityLifecycleState> & ToString { | UNINITIALIZED | CREATE | FOREGROUND | BACKGROUND | DESTROY | ... }
```
功能： UIAbility 生命周期状态，该类型为枚举，可配合 AbilityDelegator 的 getAbilityState 方法返回不同ability生命周期。

#### BACKGROUND

```cangjie
BACKGROUND
```
功能： 表示 UIAbility 处于后台状态。

#### CREATE

```cangjie
CREATE
```
功能： 表示 UIAbility 处于已创建状态。

#### DESTROY

```cangjie
DESTROY
```
功能： 表示 UIAbility 处于已销毁状态。

#### FOREGROUND

```cangjie
FOREGROUND
```
功能： 表示 UIAbility 处于前台状态。

#### UNINITIALIZED

```cangjie
UNINITIALIZED
```
功能： 表示 UIAbility 处于无效状态。



