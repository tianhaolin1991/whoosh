# Scroll

可滚动的容器组件，当子组件的布局尺寸超过父组件的尺寸时，内容可以滚动。

## Component Constructors

### public init()

```cangjie
public init()
```
功能： 创建一个Scroll容器。

### public init(child: () -> Unit)

```cangjie
public init(child: () -> Unit)
```
功能： 创建一个包含子组件的Scroll容器。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| ()->Unit | 是 | 声明容器内的子组件。 | child | - |

### public init(scroller: Scroller, child: () -> Unit)

```cangjie
public init(scroller: Scroller, child: () -> Unit)
```
功能： 创建一个包含子组件的Scroll容器，并绑定一个滚动条控制器。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| Scroller | 是 | 滚动条控制器。 | scroller | - |
| ()->Unit | 是 | 声明容器内的子组件。 | child | - |


## Functions

### public func edgeEffect(value: EdgeEffect, options: EdgeEffectOptions): This

```cangjie
public func edgeEffect(value: EdgeEffect, options: EdgeEffectOptions): This
```
功能： 设置边缘滑动效果。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| EdgeEffect | 是 | Scroll组件的边缘滑动效果，支持弹簧效果和阴影效果。 初始值：EdgeEffect.None。 | value | - |
| EdgeEffectOptions | 是 | 组件内容大小小于组件自身时，是否开启滑动效果。alwaysEnabled设置为true会开启滑动效果，alwaysEnabled设置为false不开启。 初始值：alwaysEnabled参数初始为true。 | options | - |

### public func edgeEffect(edgeEffect: EdgeEffect, alwaysEnabled!: Bool = true): This

```cangjie
public func edgeEffect(edgeEffect: EdgeEffect, alwaysEnabled!: Bool = true): This
```
功能： 设置边缘滑动效果。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| EdgeEffect | 是 | Scroll组件的边缘滑动效果，支持弹簧效果和阴影效果。 初始值：EdgeEffect.None。 | edgeEffect | - |
| Bool | 否 | 命名参数。 组件内容大小小于组件自身时，是否开启滑动效果。设置为true开启滑动效果，设置为false则不开启。 | alwaysEnabled | true |

### public func enablePaging(value: Bool): This

```cangjie
public func enablePaging(value: Bool): This
```
功能： 设置是否支持划动翻页。如果同时设置了划动翻页enablePaging和限位滚动scrollSnap，则scrollSnap优先生效，enablePaging不生效。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| Bool | 是 | 是否支持划动翻页。设置为true支持滑动翻页，false不支持。 初始值：false。 | value | - |

### public func enableScrollInteraction(value: Bool): This

```cangjie
public func enableScrollInteraction(value: Bool): This
```
功能： 设置是否支持滚动手势，当设置为false时，无法通过手指或者鼠标滚动，但不影响控制器的滚动接口。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| Bool | 是 | 是否支持滚动手势。初始值：true。 | value | - |

### public func friction(value: Float64): This

```cangjie
public func friction(value: Float64): This
```
功能： 设置摩擦系数，手动划动滚动区域时生效，只对惯性滚动过程有影响，对惯性滚动过程中的链式效果有间接影响。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| Float64 | 是 | 摩擦系数。非可穿戴设备初始值为0.75，可穿戴设备初始值为0.9。 取值范围：(0, +∞)，设置为小于等于0的值时，按初始值处理。 | value | - |

### public func friction(value: AppResource): This

```cangjie
public func friction(value: AppResource): This
```
功能： 设置摩擦系数，手动划动滚动区域时生效，只对惯性滚动过程有影响，对惯性滚动过程中的链式效果有间接影响。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| AppResource | 是 | 摩擦系数。非可穿戴设备初始值为0.75，可穿戴设备初始值为0.9。 取值范围：(0, +∞)，设置为小于等于0的值时，按初始值处理。 | value | - |

### public func initialOffset(xOffset!: Length = 0.vp, yOffset!: Length = 0.vp): This

```cangjie
public func initialOffset(xOffset!: Length = 0.vp, yOffset!: Length = 0.vp): This
```
功能： 设置初始滚动偏移量。只在首次布局时生效，后续动态修改该属性值不生效。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| Length | 否 | 命名参数。 水平滚动偏移。 说明： 当输入的大小为百分比时，初始滚动偏移量为Scroll组件主轴方向大小与百分比数值之积。 | xOffset | 0.vp |
| Length | 否 | 命名参数。 垂直滚动偏移。 说明： 当输入的大小为百分比时，初始滚动偏移量为Scroll组件主轴方向大小与百分比数值之积。 | yOffset | 0.vp |

### public func nestedScroll(value: NestedScrollOptions): This

```cangjie
public func nestedScroll(value: NestedScrollOptions): This
```
功能： 设置向前和向后两个方向上的嵌套滚动模式，实现与父组件的滚动联动。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| NestedScrollOptions | 是 | 嵌套滚动选项。 初始值：scrollForward参数初始为NestedScrollMode.SELF_ONLY，scrollBackward参数初始为NestedScrollMode.SELF_ONLY。 | value | - |

### public func scrollBar(barState: BarState): This

```cangjie
public func scrollBar(barState: BarState): This
```
功能： 设置滚动条状态。如果容器组件无法滚动，则滚动条不显示。如果容器组件的子组件大小为无穷大，则滚动条不支持拖动和伴随滚动。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| BarState | 是 | 滚动条状态。 初始值：BarState.Auto。 | barState | - |

### public func scrollBarColor(color: ResourceColor): This

```cangjie
public func scrollBarColor(color: ResourceColor): This
```
功能： 设置滚动条的颜色。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| ResourceColor | 是 | 滚动条的颜色。 初始值：0x182431（40%不透明度）。 | color | - |

### public func scrollBarWidth(width: Length): This

```cangjie
public func scrollBarWidth(width: Length): This
```
功能： 设置滚动条的宽度，不支持百分比设置。宽度设置后，滚动条正常状态和按压状态宽度均为滚动条的宽度值。如果滚动条的宽度超过Scroll组件主轴方向的高度，则滚动条的宽度会变为默认值。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| Length | 是 | 滚动条的宽度。 初始值：4.vp。 单位：vp。 设置为小于0的值时，按初始值处理。设置为0时，不显示滚动条。 | width | - |

### public func scrollSnap(value: ScrollSnapOptions): This

```cangjie
public func scrollSnap(value: ScrollSnapOptions): This
```
功能： 设置Scroll组件的限位滚动模式。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| ScrollSnapOptions | 是 | Scroll组件的限位滚动模式。 | value | - |

### public func scrollable(scrollDirection: ScrollDirection): This

```cangjie
public func scrollable(scrollDirection: ScrollDirection): This
```
功能： 设置滚动方向。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| ScrollDirection | 是 | 滚动方向。 初始值：ScrollDirection.Vertical。 | scrollDirection | - |

### public func onDidScroll(callback: (Float64, Float64, ScrollState) -> Unit): This

```cangjie
public func onDidScroll(callback: (Float64, Float64, ScrollState) -> Unit): This
```
功能： 滚动事件回调，Scroll滚动时触发。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| (Float64,Float64, ScrollState )->Unit | 是 | 回调函数，Scroll滚动时触发。 参数一：每帧滚动时水平方向的偏移量，Scroll中的内容向左滚动时偏移量为正，向右滚动时偏移量为负。单位vp。 参数二：每帧滚动时竖直方向的偏移量，Scroll中的内容向上滚动时偏移量为正，向下滚动时偏移量为负。单位vp。 参数三：当前滚动状态。 | callback | - |

### public func onReachEnd(callback: () -> Unit): This

```cangjie
public func onReachEnd(callback: () -> Unit): This
```
功能： 滚动组件到达末尾位置时触发该事件。滚动组件边缘效果为弹簧效果时，划动经过末尾位置时触发一次，回弹回末尾位置时再触发一次。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| ()->Unit | 是 | 回调函数，滚动组件到达末尾位置时触发。 | callback | - |

### public func onReachStart(callback: () -> Unit): This

```cangjie
public func onReachStart(callback: () -> Unit): This
```
功能： 滚动组件到达起始位置时触发该事件。 滚动组件初始化时会触发一次，滚动到起始位置时触发一次。边缘效果为弹簧效果时，划动经过起始位置时触发一次，回弹回起始位置时再触发一次。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| ()->Unit | 是 | 回调函数，滚动组件到达起始位置时触发。 | callback | - |

### public func onScroll(callback: (OffsetResult) -> Unit): This

```cangjie
public func onScroll(callback: (OffsetResult) -> Unit): This
```
功能： 滚动时触发该事件。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| ( OffsetResult )->Unit | 是 | 回调函数，Scroll滚动时触发。 参数：每帧滚动时水平、竖直方向的偏移量。 说明： 对于水平方向偏移量，Scroll的内容向左滚动时偏移量为正，向右滚动时偏移量为负。对于竖直方向偏移量，Scroll的内容向上滚动时偏移量为正，向下滚动时偏移量为负。 单位vp。 | callback | - |

### public func onScrollEdge(callback: (Edge) -> Unit): This

```cangjie
public func onScrollEdge(callback: (Edge) -> Unit): This
```
功能： 滚动到边缘时触发该事件。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| ( Edge )->Unit | 是 | 回调函数，滚动到边缘时触发。 参数：滚动到的边缘位置。 | callback | - |

### public func onScrollEnd(callback: () -> Unit): This

```cangjie
public func onScrollEnd(callback: () -> Unit): This
```
功能： 滚动停止时触发该事件。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| ()->Unit | 是 | 回调函数，滚动停止时触发。 | callback | - |

### public func onScrollFrameBegin(callback: (Float64, ScrollState) -> Float64): This

```cangjie
public func onScrollFrameBegin(callback: (Float64, ScrollState) -> Float64): This
```
功能： 每帧开始滚动时触发该事件，事件参数传入即将发生的滚动量，事件处理函数中可根据应用场景计算实际需要的滚动量并作为事件处理函数的返回值返回，Scroll将按照返回值的实际滚动量进行滚动。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| (Float64, ScrollState )->Float64 | 是 | 回调函数，每帧开始滚动时触发。 参数一：即将发生的滑动量，单位vp。 参数二：当前滑动状态。 | callback | - |

### public func onScrollStart(callback: () -> Unit): This

```cangjie
public func onScrollStart(callback: () -> Unit): This
```
功能： 滚动开始时触发该事件。手指拖动Scroll或拖动Scroll的滚动条触发的滚动开始时，会触发该事件。使用 Scroller 滚动控制器触发的带动画的滚动，动画开始时会触发该事件。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| ()->Unit | 是 | 回调函数，滚动开始时触发。 | callback | - |

### public func onScrollStop(callback: () -> Unit): This

```cangjie
public func onScrollStop(callback: () -> Unit): This
```
功能： 滚动停止时触发该事件。手拖动Scroll或拖动Scroll的滚动条触发的滚动，手离开屏幕并且滚动停止时会触发该事件。使用Scroller滚动控制器触发的带动画的滚动，动画停止时会触发该事件。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| ()->Unit | 是 | 回调函数，滚动停止时触发。 | callback | - |

### public func onWillScroll(callback: (Float64, Float64, ScrollState, ScrollSource) -> OffsetResult): This

```cangjie
public func onWillScroll(callback: (Float64, Float64, ScrollState, ScrollSource) -> OffsetResult): This
```
功能： 滚动事件回调，Scroll滚动前触发该事件。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| (Float64,Float64, ScrollState , ScrollSource )-> OffsetResult | 是 | 回调函数，Scroll滚动前触发。 参数一：每帧滚动时水平方向的偏移量，Scroll中的内容向左滚动时偏移量为正，向右滚动时偏移量为负。单位vp。 参数二：每帧滚动时竖直方向的偏移量，Scroll中的内容向上滚动时偏移量为正，向下滚动时偏移量为负。单位vp。 参数三：当前滚动状态。 参数四：当前滚动操作的来源。 返回值：滑动偏移量对象。返回OffsetResult时按照开发者指定的偏移量滚动。 | callback | - |

### public func onWillScroll(callback: (Float64, Float64, ScrollState, ScrollSource) -> Unit): This

```cangjie
public func onWillScroll(callback: (Float64, Float64, ScrollState, ScrollSource) -> Unit): This
```
功能： 滚动事件回调，Scroll滚动前触发该事件。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| (Float64,Float64, ScrollState , ScrollSource )->Unit | 是 | 回调函数，Scroll滚动前触发。 参数一：每帧滚动时水平方向的偏移量，Scroll中的内容向左滚动时偏移量为正，向右滚动时偏移量为负。单位vp。 参数二：每帧滚动时竖直方向的偏移量，Scroll中的内容向上滚动时偏移量为正，向下滚动时偏移量为负。单位vp。 参数三：当前滚动状态。 参数四：当前滚动操作的来源。 | callback | - |


## Classes

### BaseScroller

class BaseScroller
```cangjie
sealed abstract class BaseScroller { public init(id: Int64) }
```
功能： Scroller的基类，提供内容滚动功能。不支持开发者直接继承该基类。


### ScrollAnimationOptions

class ScrollAnimationOptions
```cangjie
public class ScrollAnimationOptions { public var duration: Float64 public var curve: Curve public var canOverScroll: Bool public init( duration!: Float64 = 1000.0, curve!: Curve = Curve.Ease, canOverScroll!: Bool = false ) }
```
功能： 自定义滚动动效的参数选项。

#### var canOverScroll

```cangjie
public var canOverScroll: Bool
```
功能： 设置滚动是否可越界。
Type: Bool; Readable: true; Writable: true

#### var curve

```cangjie
public var curve: Curve
```
功能： 设置滚动曲线。
Type: Curve; Readable: true; Writable: true

#### var duration

```cangjie
public var duration: Float64
```
功能： 设置滚动时长。
Type: Float64; Readable: true; Writable: true


### ScrollSnapOptions

class ScrollSnapOptions
```cangjie
public class ScrollSnapOptions { public var snapAlign: ScrollSnapAlign public var snapPagination: Array<Length> public var enableSnapToStart: Bool = true public var enableSnapToEnd: Bool = true public init( snapAlign: ScrollSnapAlign, snapPagination!: Option<Array<Length>> = None, enableSnapToStart!: Bool = true, enableSnapToEnd!: Bool = true ) public init( snapAlign: ScrollSnapAlign, snapPagination!: Length, enableSnapToStart!: Bool = true, enableSnapToEnd!: Bool = true ) }
```
功能： 限位滚动模式对象。

#### var enableSnapToEnd

```cangjie
public var enableSnapToEnd: Bool = true
```
功能： 在Scroll组件限位滚动模式下，该属性设置为false后，允许Scroll在最后一页和末尾间自由滑动。
Type: Bool; Readable: true; Writable: true

#### var enableSnapToStart

```cangjie
public var enableSnapToStart: Bool = true
```
功能： 在Scroll组件限位滚动模式下，该属性设置为false后，允许Scroll在开头和第一页间自由滑动。
Type: Bool; Readable: true; Writable: true

#### var snapAlign

```cangjie
public var snapAlign: ScrollSnapAlign
```
功能： 设置Scroll组件限位滚动时的对齐方式。
Type: ScrollSnapAlign; Readable: true; Writable: true

#### var snapPagination

```cangjie
public var snapPagination: Array<Length>
```
功能： 设置Scroll组件限位滚动时的分页点。
Type: Array< Length >; Readable: true; Writable: true


### Scroller

class Scroller
```cangjie
public class Scroller <: BaseScroller { public init() }
```
功能： 可滚动容器组件的控制器，可以将此组件绑定至容器组件，然后通过它控制容器组件的滚动，同一个控制器不可以控制多个容器组件，目前支持绑定到List、Scroll、ScrollBar、Grid、WaterFlow上。



## Structs

### OffsetResult

struct OffsetResult
```cangjie
public struct OffsetResult { public OffsetResult( public let xOffset: Float64, public let yOffset: Float64 ) }
```
功能： 滑动偏移量对象。



## Enums

### ScrollAlign

enum ScrollAlign
```cangjie
public enum ScrollAlign { | START | CENTER | END | AUTO | NONE }
```
功能： 对齐方式枚举。

#### AUTO

```cangjie
AUTO
```
功能： 自动对齐。

#### CENTER

```cangjie
CENTER
```
功能： 居中对齐。指定item主轴方向居中对齐于List。

#### END

```cangjie
END
```
功能： 尾部对齐。指定item尾部与List尾部对齐。

#### NONE

```cangjie
NONE
```
功能： 不进行对齐操作。

#### START

```cangjie
START
```
功能： 首部对齐。指定item首部与List首部对齐。



## Examples

```cangjie
package ohos_app_cangjie_entry

import kit.UIKit.*
import ohos.state_macro_manage.*
import std.collection.ArrayList

@Entry
@Component
class EntryView {
 let scroller = Scroller()
 var arr: ArrayList<String> = ArrayList(["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"])

 func build() {
 Stack(Alignment.TopStart) {
 Scroll(this.scroller) {
 Column {
 ForEach(
 this.arr,
 itemGeneratorFunc: {
 item: String, idx: Int64 => Text(item)
 .width(90.percent)
 .height(150)
 .backgroundColor(0xFFFFFF)
 .borderRadius(15)
 .textAlign(TextAlign.Center)
 .fontSize(16)
 .margin(top: 10)
 }
 )
 }
 }
 .scrollable(ScrollDirection.Vertical) // 滚动方向纵向
 .scrollBar(BarState.On) // 滚动条常驻显示
 .scrollBarColor(Color.GRAY) // 滚动条颜色
 .scrollBarWidth(10.px) // 滚动条宽度
 .friction(0.6)
 .edgeEffect(EdgeEffect.None)
 .onScrollEdge(
 {
 edge => match (edge) {
 case Edge.Top => nativeLog("Top")
 case Edge.Bottom => nativeLog("Bottom")
 case _ => nativeLog("None")
 }
 })
 .onScrollStop({
 => nativeLog("Scroll Stop")
 })

 Button("scroll 150")
 .onClick({
 evt => // 点击后下滑指定距离150.0vp
 this
 .scroller
 .scrollBy(xOffset: 0, yOffset: 150)
 })
 .margin(top: 10, left: 20)

 Button("scroll 100")
 .onClick(
 {
 evt => //点击后滑动到指定位置，即下滑100.0vp的距离
 nativeLog("current offset ${this.scroller.currentOffset().yOffset}")
 nativeLog("CALCULATE offset ${this.scroller.currentOffset().yOffset + 100.0}")
 let curyOffset = this
 .scroller
 .currentOffset()
 .yOffset
 this
 .scroller
 .scrollTo(xOffset: 0.vp, yOffset: (curyOffset + 100.0).vp, duration: 0.0, curve: Curve.Ease)
 }
 )
 .margin(top: 60, left: 20)

 Button("back top")
 .onClick({
 evt => // 点击后回到顶部
 this
 .scroller
 .scrollEdge(Edge.Top)
 })
 .margin(top: 110, left: 20)

 Button("next page")
 .onClick({
 evt => // 点击后滑到下一页
 this
 .scroller
 .scrollPage(true, animation: false)
 })
 .margin(top: 160, left: 20)

 Button("fling -3000")
 .onClick({
 evt => // 点击后触发初始速度为-3000vp/s的惯性滚动
 this
 .scroller
 .fling(-3000)
 })
 .margin(top: 210, left: 20)

 Button("next page slowly")
 .onClick({
 evt => // 点击后滑到下一页，滑动过程开启动画
 this
 .scroller
 .scrollPage(true, animation: true)
 })
 .margin(top: 260, left: 20)
 }
 .width(100.percent)
 .height(100.percent)
 .backgroundColor(0xDCDCDC)
 }
}
```

