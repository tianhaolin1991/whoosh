# 滚动组件通用API

滚动组件通用属性和事件目前只支持 List 、 Grid 、 Scroll 和 WaterFlow 组件。

## Functions

### public func scrollBar(barState: BarState): This

```cangjie
public func scrollBar(barState: BarState): This
```
功能： 设置滚动条状态。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| BarState | 是 | 滚动条状态。 初始值： List、Grid、Scroll组件初始值为：BarState.Auto， WaterFlow组件初始值为BarState.Off。 | barState | - |

### public func scrollBarColor(color: ResourceColor): This

```cangjie
public func scrollBarColor(color: ResourceColor): This
```
功能： 设置滚动条的颜色。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| ResourceColor | 是 | 滚动条的颜色。 初始值：0x182431（40%不透明度）。为HEX格式颜色，支持rgb或者argb，示例：0xffffff。 | color | - |

### public func scrollBarWidth(value: Length): This

```cangjie
public func scrollBarWidth(value: Length): This
```
功能： 设置滚动条的宽度，不支持百分比设置。宽度设置后，滚动条正常状态和按压状态宽度均为滚动条的宽度值。如果滚动条的宽度超过滚动组件主轴方向的高度，则滚动条的宽度会变为初始值。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| Length | 是 | 滚动条的宽度。 初始值：4 单位：vp 取值范围：设置为小于0的值时，按初始值处理。设置为0时，不显示滚动条。 | value | - |

### public func edgeEffect(value: EdgeEffect, options: EdgeEffectOptions): This

```cangjie
public func edgeEffect(value: EdgeEffect, options: EdgeEffectOptions): This
```
功能： 设置边缘滑动效果。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| EdgeEffect | 是 | 滚动组件的边缘滑动效果，支持弹簧效果和阴影效果。 初始值：Grid、Scroll、WaterFlow组件初始值为EdgeEffect.None，List组件初始值为EdgeEffect.Spring。 | edgeEffect | - |
| EdgeEffectOptions | 是 | 组件内容大小小于组件自身时，是否开启滑动效果。设置为{ alwaysEnabled: true }会开启滑动效果，{ alwaysEnabled: false }不开启。 初始值：List、Grid、WaterFlow组件初始值为{ alwaysEnabled: false }，Scroll组件初始值为{ alwaysEnabled: true }。 | options | - |

### public func clipContent(clip: ContentClipMode): This

```cangjie
public func clipContent(clip: ContentClipMode): This
```
功能： 设置滚动容器的内容层裁剪区域。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| ContentClipMode | 是 | 裁剪只针对滚动容器的内容，即其子节点，背景不受影响。 初始值：Grid、Scroll的初始值为ContentClipMode.BOUNDARY，List、WaterFlow的初始值为ContentClipMode.CONTENT_ONLY。 | clip | - |

### public func clipContent(clip: RectShape): This

```cangjie
public func clipContent(clip: RectShape): This
```
功能： 设置滚动容器的内容层裁剪区域。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| RectShape | 是 | 裁剪只针对滚动容器的内容，即其子节点，背景不受影响。通过RectShape传入自定义矩形区域时仅支持设置宽高和相对于组件左上角的 offset ，不支持圆角。 | clip | - |

### public func enableScrollInteraction(value: Bool): This

```cangjie
public func enableScrollInteraction(value: Bool): This
```
功能： 设置是否支持滚动手势。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| Bool | 是 | 是否支持滚动手势，当设置为false时，无法通过手指或者鼠标滚动，但不影响控制器 Scroller 的滚动接口。 初始值：true。 | value | - |

### public func fadingEdge(enabled: Bool): This

```cangjie
public func fadingEdge(enabled: Bool): This
```
功能： 设置是否开启边缘渐隐效果及设置边缘渐隐长度。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| Bool | 是 | fadingEdge生效时，会覆盖原组件的.overlay()属性。 fadingEdge生效时，建议不在该组件上设置background相关属性，会影响渐隐的显示效果。 fadingEdge生效时，组件会裁剪到边界，设置组件的clip属性为false不生效。 初始值：false，不开启边缘渐隐效果。 | enabled | - |

### public func fadingEdge(enabled: Bool, options: FadingEdgeOptions): This

```cangjie
public func fadingEdge(enabled: Bool, options: FadingEdgeOptions): This
```
功能： 设置是否开启边缘渐隐效果及设置边缘渐隐长度。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| Bool | 是 | fadingEdge生效时，会覆盖原组件的.overlay()属性。 fadingEdge生效时，建议不在该组件上设置background相关属性，会影响渐隐的显示效果。 fadingEdge生效时，组件会裁剪到边界，设置组件的clip属性为false不生效。 初始值：false，不开启边缘渐隐效果。 | enabled | - |
| FadingEdgeOptions | 是 | 边缘渐隐参数对象。可以通过该对象定义边缘渐隐效果属性，比如设置渐隐长度。 | options | - |

### public func flingSpeedLimit(speedLimit: Float64): This

```cangjie
public func flingSpeedLimit(speedLimit: Float64): This
```
功能： 限制跟手滑动结束后，Fling动效开始时的最大初始速度。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| Float64 | 是 | Fling动效开始时的最大初始速度。 初始值：9000.0 单位：vp/s 取值范围：(0, +∞)，设置为小于等于0的值时，按初始值处理。 | speedLimit | - |

### public func friction(value: Float64): This

```cangjie
public func friction(value: Float64): This
```
功能： 设置摩擦系数，手动划动滚动区域时生效，只对惯性滚动过程有影响，对惯性滚动过程中的链式效果有间接影响。设置为小于等于0的值时，按初始值处理。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| Float64 | 是 | 摩擦系数。 初始值：非可穿戴设备为0.75，可穿戴设备为0.9。 取值范围：(0, +∞)，设置为小于等于0的值时，按初始值处理。 | value | - |

### public func nestedScroll(value: NestedScrollOptions): This

```cangjie
public func nestedScroll(value: NestedScrollOptions): This
```
功能： 设置向前和向后两个方向上的嵌套滚动模式，实现与父组件的滚动联动。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| NestedScrollOptions | 是 | 嵌套滚动选项。 | value | - |

### public func onDidScroll(callback: (scrollOffset: Float64, scrollState: ScrollState) -> Unit): This

```cangjie
public func onDidScroll(callback: (scrollOffset: Float64, scrollState: ScrollState) -> Unit): This
```
功能： 滚动组件滑动时触发，返回当前帧滑动的偏移量和当前滑动状态。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| (Float64, ScrollState )->Unit | 是 | 滚动组件滑动时触发的回调。 参数一：每帧滚动的偏移量，滚动组件的内容向上滚动时偏移量为正，向下滚动时偏移量为负。单位vp。 参数二：当前滑动状态。 | callback | - |

### public func onReachEnd(callback: () -> Unit): This

```cangjie
public func onReachEnd(callback: () -> Unit): This
```
功能： 滚动组件到达末尾位置时触发。滚动组件边缘效果为弹簧效果时，划动经过末尾位置时触发一次，回弹回末尾位置时再触发一次。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| ()->Unit | 是 | 回调函数，滚动组件到达末尾位置时触发。 | callback | - |

### public func onReachStart(callback: () -> Unit): This

```cangjie
public func onReachStart(callback: () -> Unit): This
```
功能： 滚动组件到达起始位置时触发。滚动组件初始化时会触发一次，滚动到起始位置时触发一次。边缘效果为弹簧效果时，划动经过起始位置时触发一次，回弹回起始位置时再触发一次。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| ()->Unit | 是 | 回调函数，滚动组件到达起始位置时触发。 | callback | - |

### public func onScrollStart(callback: () -> Unit): This

```cangjie
public func onScrollStart(callback: () -> Unit): This
```
功能： 滚动开始时触发。手指拖动滚动组件或拖动滚动组件的滚动条触发的滚动开始时，会触发该事件。使用 Scroller 滚动控制器触发的带动画的滚动，动画开始时会触发该事件。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| ()->Unit | 是 | 回调函数，滚动开始时触发。 | callback | - |

### public func onScrollStop(callback: () -> Unit): This

```cangjie
public func onScrollStop(callback: () -> Unit): This
```
功能： 滚动停止时触发。手拖动滚动组件或拖动滚动组件的滚动条触发的滚动，手离开屏幕并且滚动停止时会触发该事件。使用 Scroller 滚动控制器触发的带动画的滚动，动画停止时会触发该事件。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| ()->Unit | 是 | 回调函数，滚动停止时触发。 | callback | - |

### public func onWillScroll(callback: (Float64, ScrollState, ScrollSource) -> Float64): This

```cangjie
public func onWillScroll(callback: (Float64, ScrollState, ScrollSource) -> Float64): This
```
功能： 滚动事件回调，滚动组件滚动前触发。回调当前帧将要滚动的偏移量和当前滚动状态和滚动操作来源，其中回调的偏移量为计算得到的将要滚动的偏移量值，并非最终实际滚动偏移。可以通过该回调返回值指定滚动组件将要滚动的偏移。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| (Float64, ScrollState , ScrollSource )->Float64 | 是 | 滚动组件滑动前触发的回调。 参数一：每帧滑动的偏移量，滚动组件的内容向上滚动时偏移量为正，向下滚动时偏移量为负，单位vp。 参数二：当前滑动状态。 参数三：当前滑动操作的来源。 返回值：将要滑动偏移量，单位vp。 | callback | - |

### public func onWillScroll(callback: (Float64, ScrollState, ScrollSource) -> Unit): This

```cangjie
public func onWillScroll(callback: (Float64, ScrollState, ScrollSource) -> Unit): This
```
功能： 滚动事件回调，滚动组件滚动前触发。回调当前帧将要滚动的偏移量和当前滚动状态和滚动操作来源，其中回调的偏移量为计算得到的将要滚动的偏移量值，并非最终实际滚动偏移。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| (Float64, ScrollState , ScrollSource )->Unit | 是 | 滚动组件滑动前触发的回调。 | callback | - |

### public func onScroll(callback: (OffsetResult) -> Unit): This

```cangjie
public func onScroll(callback: (OffsetResult) -> Unit): This
```
功能： 滚动组件滑动时触发。Scroll组件的onScroll事件在布局之前触发，建议使用 onWillScroll 替代； List 、 Grid 和 WaterFlow 组件的onScroll事件在布局之后触发，建议使用 onDidScroll 替代。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| ( OffsetResult ) -> Unit | 是 | 回调函数，Scroll滚动时触发。 参数：每帧滚动时水平、竖直方向的偏移量。 说明： 对于水平方向偏移量，Scroll的内容向左滚动时偏移量为正，向右滚动时偏移量为负。对于竖直方向偏移量，Scroll的内容向上滚动时偏移量为正，向下滚动时偏移量为负。单位vp。 | callback | - |


## Classes

### FadingEdgeOptions

class FadingEdgeOptions
```cangjie
public class FadingEdgeOptions { public FadingEdgeOptions( public var fadingEdgeLength!: Length = 32.vp ) }
```
功能： 边缘渐隐参数对象。可以通过该对象定义边缘渐隐效果属性，比如设置渐隐长度。

#### var fadingEdgeLength

```cangjie
public var fadingEdgeLength: Length = 32.vp
```
功能： 边缘渐隐长度。
Type: Length; Readable: true; Writable: true


### NestedScrollOptions

class NestedScrollOptions
```cangjie
public class NestedScrollOptions { public NestedScrollOptions( public var scrollForward: NestedScrollMode, public var scrollBackward: NestedScrollMode ) }
```
功能： 可滚动组件滚动时的嵌套滚动参数对象。可以通过该对象定义嵌套滚动效果属性，比如设置往末尾端滚动时的嵌套滚动选项。

#### var scrollBackward

```cangjie
public var scrollBackward: NestedScrollMode
```
功能： 滚动组件往起始端滚动时的嵌套滚动选项。
Type: NestedScrollMode; Readable: true; Writable: true

#### var scrollForward

```cangjie
public var scrollForward: NestedScrollMode
```
功能： 滚动组件往末尾端滚动时的嵌套滚动选项。
Type: NestedScrollMode; Readable: true; Writable: true


### ItemDragInfo

class ItemDragInfo
```cangjie
public class ItemDragInfo { public ItemDragInfo ( public let x: Float64, public let y: Float64 ) }
```
功能： 拖拽点的信息。

#### let x

```cangjie
public let x: Float64
```
功能： 当前拖拽点的x坐标，单位vp。
Type: Float64; Readable: true; Writable: false

#### let y

```cangjie
public let y: Float64
```
功能： 当前拖拽点的y坐标，单位vp。
Type: Float64; Readable: true; Writable: false


### EdgeEffectOptions

class EdgeEffectOptions
```cangjie
public class EdgeEffectOptions { public EdgeEffectOptions ( public let alwaysEnabled: Bool ) }
```
功能： 组件内容大小小于组件自身时，是否开启滑动效果。

#### let alwaysEnabled

```cangjie
public let alwaysEnabled: Bool
```
功能： 组件内容大小小于组件自身时，设置是否开启滑动效果。
Type: Bool; Readable: true; Writable: false



## Enums

### ContentClipMode

enum ContentClipMode
```cangjie
public enum ContentClipMode { | CONTENT_ONLY | BOUNDARY | SAFE_AREA }
```
功能： 表示滚动容器的内容裁剪模式。

#### BOUNDARY

```cangjie
BOUNDARY
```
功能： 按组件区域裁剪，对应图中的整个蓝色区域。

#### CONTENT_ONLY

```cangjie
CONTENT_ONLY
```
功能： 按内容区裁剪，对应图中的绿色区域。

#### SAFE_AREA

```cangjie
SAFE_AREA
```
功能： 按组件配置的SafeArea区域裁剪，对应图中的整个黄色区域。


### ScrollSnapAlign

enum ScrollSnapAlign
```cangjie
public enum ScrollSnapAlign { | NONE | START | CENTER | END }
```
功能： 设置列表项滚动结束对齐效果。

#### CENTER

```cangjie
CENTER
```
功能： 视图中的中间项将在列表中心对齐。

#### END

```cangjie
END
```
功能： 视图中的最后一项将在列表末尾对齐。

#### NONE

```cangjie
NONE
```
功能： 默认无项目滚动对齐效果。

#### START

```cangjie
START
```
功能： 视图中的第一项将在列表的开头对齐。



