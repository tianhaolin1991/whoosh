# 显式动画 (animateTo)

提供全局animateTo显式动画接口来指定由于闭包代码导致的状态变化插入过渡动效。同 属性动画 ，布局类改变宽高的动画，内容都是直接到终点状态。例如文字、 Canvas 的内容等。如果期望内容跟随宽高变化，可以使用 renderFit 属性配置。

## Functions

### public func animateTo(animation: AnimateParam, callback: () -> Unit): Unit

```cangjie
public func animateTo(animation: AnimateParam, callback: () -> Unit): Unit
```
功能： 提供全局animateTo显式动画接口来指定由于闭包代码导致的状态变化插入过渡动效。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| AnimateParam | 是 | 设置动画效果相关参数。 | animation | - |
| () -> Unit | 是 | 指定动效的闭包函数，在闭包函数中导致的状态变化系统会自动插入过渡动画。 | callback | - |


## Classes

### AnimateParam

class AnimateParam
```cangjie
public class AnimateParam { public var duration: Option<Int32> public var tempo: Option<Float32> public var curve: Option<Curve> public var delay: Option<Int32> public var iterations: Option<Int32> public var playMode: Option<PlayMode> public var onFinish: Option<() -> Unit> public var finishCallbackType: Option<FinishCallbackType> public var expectedFrameRateRange: Option<ExpectedFrameRateRange> public init( duration!: Option<Int32> = 1000, tempo!: Option<Float32> = 1.0, curve!: Option<Curve> = Curve.EaseInOut, delay!: Option<Int32> = 0, iterations!: Option<Int32> = 1, playMode!: Option<PlayMode> = PlayMode.Normal, onFinish!: Option<() -> Unit> = Option.None, finishCallbackType!: Option<FinishCallbackType> = FinishCallbackType.REMOVED, expectedFrameRateRange!: Option<ExpectedFrameRateRange> = Option.None ) }
```
功能： 动画效果参数设置类型。

#### var curve

```cangjie
public var curve: Option<Curve>
```
功能： 设置动画曲线。
Type: Curve; Readable: true; Writable: true

#### var delay

```cangjie
public var delay: Option<Int32>
```
功能： 设置动画延迟播放时间。
Type: Int32; Readable: true; Writable: true

#### var duration

```cangjie
public var duration: Option<Int32>
```
功能： 设置动画持续时间。
Type: Int32; Readable: true; Writable: true

#### var expectedFrameRateRange

```cangjie
public var expectedFrameRateRange: Option<ExpectedFrameRateRange>
```
功能： 设置动画持续时间。
Type: ExpectedFrameRateRange; Readable: true; Writable: true

#### var finishCallbackType

```cangjie
public var finishCallbackType: Option<FinishCallbackType>
```
功能： 设置动画中定义onFinish回调的类型。
Type: FinishCallbackType; Readable: true; Writable: true

#### var iterations

```cangjie
public var iterations: Option<Int32>
```
功能： 设置动画播放次数。
Type: Int32; Readable: true; Writable: true

#### var onFinish

```cangjie
public var onFinish: Option<() -> Unit>
```
功能： 设置动画播放完成回调。
Type: () -> Unit; Readable: true; Writable: true

#### var playMode

```cangjie
public var playMode: Option<PlayMode>
```
功能： 设置动画播放模式。
Type: PlayMode; Readable: true; Writable: true

#### var tempo

```cangjie
public var tempo: Option<Float32>
```
功能： 设置动画播放速度。
Type: Float32; Readable: true; Writable: true


### ExpectedFrameRateRange

class ExpectedFrameRateRange
```cangjie
public class ExpectedFrameRateRange { public ExpectedFrameRateRange( public var min!: Int32, public var max!: Int32, public var expected!: Int32 ) }
```
功能： 期望帧率类型。

#### var expected

```cangjie
public var expected: Int32
```
功能： 设置期望的最优帧率。
Type: Int32; Readable: true; Writable: true

#### var max

```cangjie
public var max: Int32
```
功能： 设置期望的最大帧率。
Type: Int32; Readable: true; Writable: true

#### var min

```cangjie
public var min: Int32,
```
功能： 设置期望的最小帧率。
Type: Int32; Readable: true; Writable: true



## Examples

```cangjie
package ohos_app_cangjie_entry
import kit.UIKit.*
import ohos.state_macro_manage.*

@Entry
@Component
class EntryView {
 @State var isShow: Bool = true
 @State var widthSize: Length = 250.vp
 @State var heightSize: Length = 100.vp
 @State var rotateAngle: Float32 = 0.0

 func build() {
 Column() {
 Button("change size")
 .width(this.widthSize)
 .height(this.heightSize)
 .margin(30)
 .onClick(
 {
 =>
 if (this.isShow) {
 animateTo(
 AnimateParam(
 duration: 2000,
 curve: Curve.EaseOut,
 iterations: 3,
 playMode: PlayMode.Normal,
 onFinish: {=> AppLog.info("play end")}
 ),
 {
 =>
 this.widthSize = 150.vp
 this.heightSize = 60.vp
 }
 )
 } else {
 animateTo(
 AnimateParam(),
 {
 =>
 this.widthSize = 250.vp
 this.heightSize = 100.vp
 }
 )
 }
 this.isShow = !this.isShow
 }
 )
 Button("change rotate angle")
 .margin(50)
 .rotate(x: 0.0, y: 0.0, z: 1.0, angle: this.rotateAngle)
 .onClick(
 {
 => animateTo(
 AnimateParam(
 duration: 1200,
 curve: Curve.Friction,
 delay: 500,
 iterations: -1, // 设置-1表示动画无限循环
 playMode: PlayMode.Alternate,
 onFinish: {=> AppLog.info("play end")},
 expectedFrameRateRange: ExpectedFrameRateRange(
 min: 10,
 max: 120,
 expected: 60,
 )
 ),
 {=> this.rotateAngle = 90.0}
 )
 })
 }
 .width(100.percent)
 .margin(top: 5)
 }
}
```
```cangjie
package ohos_app_cangjie_entry
import kit.UIKit.*
import ohos.state_macro_manage.*

@Entry
@Component
class EntryView {
 @State var isShow: Bool = true
 @State var heightSize: Length = 100.vp
 @State var count: Int = 0
 @State var isToBottom: Bool = true

 func build() {
 Column() {
 if (this.isShow) {
 Column()
 .margin(50)
 .width(200)
 .height(this.heightSize)
 .backgroundColor(Color.BLUE)
 .onClick(
 {
 evt => animateTo(
 AnimateParam(
 duration: 2000,
 curve: Curve.EaseOut,
 iterations: 1,
 playMode: PlayMode.Normal,
 onFinish: {
 =>
 this.count--
 if (this.count == 0 && !this.isToBottom) {
 this.isShow = false
 }
 },
 ),
 {
 =>
 this.count++
 if (this.isToBottom) {
 this.heightSize = 60
 } else {
 this.heightSize = 100
 }
 this.isToBottom = !this.isToBottom
 }
 )
 })
 }
 }
 .width(100.percent)
 .margin(top: 5)
 .justifyContent(FlexAlign.End)
 }
}
```

