# ohos.input_method（输入法框架）

本模块主要面向普通前台应用（备忘录、信息、设置等系统应用与三方应用），提供对输入法（输入法应用）的控制、管理能力，包括显示/隐藏输入法软键盘、切换输入法、获取所有输入法列表等等。

```cangjie
import kit.IMEKit.*
```
## Functions

### public func getController(): InputMethodController

```cangjie
public func getController(): InputMethodController
```
功能： 获取客户端实例 InputMethodController 。

**Returns:**

| type | description |
| --- | --- |
| InputMethodController | 返回当前客户端实例。 |

**Exceptions:**

- **BusinessException**: BusinessException：对应错误码的详细介绍请参见 输入法框架错误码 。

| code | description |
| --- | --- |
| 12800006 | input method controller error. |


**Example:**

```cangjie
// index.cj

import kit.IMEKit.*

let inputMethodController = getController()
```

### public func getCurrentInputMethod(): InputMethodProperty

```cangjie
public func getCurrentInputMethod(): InputMethodProperty
```
功能： 获取当前输入法。

**Returns:**

| type | description |
| --- | --- |
| InputMethodProperty | 返回当前输入法属性对象。 |

**Example:**

```cangjie
// index.cj

import kit.IMEKit.*

let currentIme = getCurrentInputMethod()
```

### public func getCurrentInputMethodSubtype(): InputMethodSubtype

```cangjie
public func getCurrentInputMethodSubtype(): InputMethodSubtype
```
功能： 获取当前输入法的子类型。

**Returns:**

| type | description |
| --- | --- |
| InputMethodSubtype | 返回当前输入法子类型对象。 |

**Example:**

```cangjie
// index.cj

import kit.IMEKit.*

let sub = getCurrentInputMethodSubtype()
```

### public func getDefaultInputMethod(): InputMethodProperty

```cangjie
public func getDefaultInputMethod(): InputMethodProperty
```
功能： 获取默认输入法。

**Returns:**

| type | description |
| --- | --- |
| InputMethodProperty | 返回默认输入法属性对象。 |

**Exceptions:**

- **BusinessException**: BusinessException：对应错误码的详细介绍请参见 输入法框架错误码 。

| code | description |
| --- | --- |
| 12800008 | input method manager service error. |


**Example:**

```cangjie
// index.cj

import kit.IMEKit.*

let defaultIme = getDefaultInputMethod()
```

### public func getSetting(): InputMethodSetting

```cangjie
public func getSetting(): InputMethodSetting
```
功能： 获取客户端设置实例 InputMethodSetting 。

**Returns:**

| type | description |
| --- | --- |
| InputMethodSetting | 返回当前客户端设置实例。 |

**Exceptions:**

- **BusinessException**: BusinessException：对应错误码的详细介绍请参见 输入法框架错误码 。

| code | description |
| --- | --- |
| 12800007 | setter error. |


**Example:**

```cangjie
// index.cj

import kit.IMEKit.*

let inputMethodSetting = getSetting()
```

### public func getSystemInputMethodConfigAbility(): ElementName

```cangjie
public func getSystemInputMethodConfigAbility(): ElementName
```
功能： 获取系统输入法设置界面Ability信息。

**Returns:**

| type | description |
| --- | --- |
| ElementName | 系统输入法设置界面Ability的ElementName。 |

**Exceptions:**

- **BusinessException**: BusinessException：对应错误码的详细介绍请参见 输入法框架错误码 。

| code | description |
| --- | --- |
| 12800008 | input method manager service error. |


**Example:**

```cangjie
// index.cj

import kit.IMEKit.*

let inputMethodConfig = getSystemInputMethodConfigAbility()
```


## Classes

### CursorInfo

class CursorInfo
```cangjie
public class CursorInfo { public CursorInfo( public let left: Float64, public let top: Float64, public let width: Float64, public let height: Float64 ) }
```
功能： 光标信息。

#### let height

```cangjie
public let height: Float64
```
功能： 光标的高度。
Type: Float64; Readable: true; Writable: false

#### let left

```cangjie
public let left: Float64
```
功能： 光标的left坐标。
Type: Float64; Readable: true; Writable: false

#### let top

```cangjie
public let top: Float64
```
功能： 光标的top坐标。
Type: Float64; Readable: true; Writable: false

#### let width

```cangjie
public let width: Float64
```
功能： 光标的宽度。
Type: Float64; Readable: true; Writable: false


### FunctionKey

class FunctionKey
```cangjie
public class FunctionKey { public FunctionKey( public let enterKeyType: EnterKeyType ) }
```
功能： 输入法功能键类型。

#### let enterKeyType

```cangjie
public let enterKeyType: EnterKeyType
```
功能： 输入法Enter键类型。
Type: EnterKeyType; Readable: true; Writable: false


### InputAttribute

class InputAttribute
```cangjie
public class InputAttribute { public InputAttribute( public let textInputType: TextInputType, public let enterKeyType: EnterKeyType ) }
```
功能： 编辑框属性，包含文本输入类型和Enter键功能类型。

#### let enterKeyType

```cangjie
public let enterKeyType: EnterKeyType
```
功能： Enter键功能类型。
Type: EnterKeyType; Readable: true; Writable: false

#### let textInputType

```cangjie
public let textInputType: TextInputType
```
功能： 文本输入类型。
Type: TextInputType; Readable: true; Writable: false


### InputMethodController

class InputMethodController
```cangjie
public class InputMethodController {}
```
功能： 下列API示例中都需使用 getController 获取到InputMethodController实例，再通过实例调用对应方法。


### InputMethodProperty

class InputMethodProperty
```cangjie
public class InputMethodProperty <: ToString { public InputMethodProperty( public let name: String, public let id: String, public let label: String, public let labelId: UInt32, public let icon: String, public let iconId: UInt32 ) }
```
功能： 输入法应用属性。

#### let icon

```cangjie
public let icon: String
```
功能： 输入法图标数据，可以通过iconId查询获取。预留字段，暂不支持使用。
Type: String; Readable: true; Writable: false

#### let iconId

```cangjie
public let iconId: UInt32
```
功能： 输入法图标资源号。
Type: UInt32; Readable: true; Writable: false

#### let id

```cangjie
public let id: String
```
功能： 输入法唯一标识。
Type: String; Readable: true; Writable: false

#### let label

```cangjie
public let label: String
```
功能： 输入法对外显示名称。
Type: String; Readable: true; Writable: false

#### let labelId

```cangjie
public let labelId: UInt32
```
功能： 输入法对外显示名称资源号。
Type: UInt32; Readable: true; Writable: false

#### let name

```cangjie
public let name: String
```
功能： 输入法包名。
Type: String; Readable: true; Writable: false


### InputMethodSetting

class InputMethodSetting
```cangjie
public class InputMethodSetting {}
```
功能： 下列API均需使用 getSetting 获取到InputMethodSetting实例后，通过实例调用。


### InputMethodSubtype

class InputMethodSubtype
```cangjie
public class InputMethodSubtype <: ToString { public InputMethodSubtype( public let name: String, public let id: String, public let locale: String, public let language: String, public let label: ?String, public let labelId: ?UInt32, public let icon: ?String, public let iconId: ?UInt32, public let mode: ?String ) }
```
功能： 提供对输入法子类型的属性管理。输入法子类型允许输入法根据需要显示不用的输入模式或语言，完成模式或语言切换，如：输入法的中文/英文键盘等均属于输入法的子类型。

#### let icon

```cangjie
public let icon: ?String
```
功能： 输入法子类型的图标，可以通过iconId查询获取。预留字段，暂不支持使用。
Type: ?String; Readable: true; Writable: false

#### let iconId

```cangjie
public let iconId: ?UInt32
```
功能： 输入法子类型的图标id。
Type: ?UInt32; Readable: true; Writable: false

#### let id

```cangjie
public let id: String
```
功能： 输入法子类型的id。
Type: String; Readable: true; Writable: false

#### let label

```cangjie
public let label: ?String
```
功能： 输入法子类型的标签。
Type: ?String; Readable: true; Writable: false

#### let labelId

```cangjie
public let labelId: ?UInt32
```
功能： 输入法子类型的标签资源号。
Type: ?UInt32; Readable: true; Writable: false

#### let language

```cangjie
public let language: String
```
功能： 输入法子类型的语言。
Type: String; Readable: true; Writable: false

#### let locale

```cangjie
public let locale: String
```
功能： 输入法子类型的方言版本。
Type: String; Readable: true; Writable: false

#### let mode

```cangjie
public let mode: ?String
```
功能： 输入法子类型的模式，可选的值包括upper（大写）和lower（小写）。
Type: ?String; Readable: true; Writable: false

#### let name

```cangjie
public let name: String
```
功能： 输入法子类型所属应用的包名。
Type: String; Readable: true; Writable: false


### InputWindowInfo

class InputWindowInfo
```cangjie
public class InputWindowInfo { public InputWindowInfo( public let name: String, public let left: Int32, public let top: Int32, public let width: Int32, public let height: Int32 ) }
```
功能： 输入法软键盘的窗口信息。

#### let height

```cangjie
public let height: Int32
```
功能： 输入法窗口的高度，单位为px。
Type: Int32; Readable: true; Writable: false

#### let left

```cangjie
public let left: Int32
```
功能： 输入法窗口左上顶点的横坐标，单位为px。
Type: Int32; Readable: true; Writable: false

#### let name

```cangjie
public let name: String
```
功能： 输入法窗口的名称。
Type: String; Readable: true; Writable: false

#### let top

```cangjie
public let top: Int32
```
功能： 输入法窗口左上顶点的纵坐标，单位为px。
Type: Int32; Readable: true; Writable: false

#### let width

```cangjie
public let width: Int32
```
功能： 输入法窗口的宽度，单位为px。
Type: Int32; Readable: true; Writable: false


### Movement

class Movement
```cangjie
public class Movement { public Movement( public let direction: Direction ) }
```
功能： 选中文本时，光标移动的方向。

#### let direction

```cangjie
public let direction: Direction
```
功能： 选中文本时，光标的移动方向。
Type: Direction; Readable: true; Writable: false


### Range

class Range
```cangjie
public class Range { public Range( public let start: Int32, public let end: Int32 ) }
```
功能： 文本的选中范围。

#### let end

```cangjie
public let end: Int32
```
功能： 选中文本的末字符在编辑框的索引值。
Type: Int32; Readable: true; Writable: false

#### let start

```cangjie
public let start: Int32
```
功能： 选中文本的首字符在编辑框的索引值。
Type: Int32; Readable: true; Writable: false


### TextConfig

class TextConfig
```cangjie
public class TextConfig { public TextConfig( public var inputAttribute!: InputAttribute, public var cursorInfo!: CursorInfo = CursorInfo(-1.0, -1.0, -1.0,-1.0), public var selection!: Range = Range(-1, -1), public var windowId!: UInt32 = 0xFFFF_FFFF ) }
```
功能： 编辑框配置信息类型。

#### var cursorInfo

```cangjie
public var cursorInfo: CursorInfo = CursorInfo(- 1.0, - 1.0, - 1.0, - 1.0)
```
功能： 光标信息。
Type: CursorInfo; Readable: true; Writable: true

#### var inputAttribute

```cangjie
public var inputAttribute: InputAttribute
```
功能： 编辑框属性。
Type: InputAttribute; Readable: true; Writable: true

#### var selection

```cangjie
public var selection: Range = Range(- 1, - 1)
```
功能： 文本选中的范围。
Type: Range; Readable: true; Writable: true

#### var windowId

```cangjie
public var windowId: UInt32 = 0xFFFF_FFFF
```
功能： 编辑框所在的窗口Id。
Type: UInt32; Readable: true; Writable: true



## Enums

### Direction

enum Direction
```cangjie
public enum Direction { | CURSOR_UP | CURSOR_DOWN | CURSOR_LEFT | CURSOR_RIGHT | ... }
```
功能： 光标移动方向。

#### CURSOR_DOWN

```cangjie
CURSOR_DOWN
```
功能： 向下。

#### CURSOR_LEFT

```cangjie
CURSOR_LEFT
```
功能： 向左。

#### CURSOR_RIGHT

```cangjie
CURSOR_RIGHT
```
功能： 向右。

#### CURSOR_UP

```cangjie
CURSOR_UP
```
功能： 向上。


### EnterKeyType

enum EnterKeyType
```cangjie
public enum EnterKeyType { | UNSPECIFIED | NONE | GO | SEARCH | SEND | NEXT | DONE | PREVIOUS | ... }
```
功能： Enter键的功能类型。

#### DONE

```cangjie
DONE
```
功能： 完成。

#### GO

```cangjie
GO
```
功能： 前往。

#### NEXT

```cangjie
NEXT
```
功能： 下一步。

#### NONE

```cangjie
NONE
```
功能： NONE。

#### PREVIOUS

```cangjie
PREVIOUS
```
功能： 上一步。

#### SEARCH

```cangjie
SEARCH
```
功能： 查找。

#### SEND

```cangjie
SEND
```
功能： 发送。

#### UNSPECIFIED

```cangjie
UNSPECIFIED
```
功能： 未指定。


### ExtendAction

enum ExtendAction
```cangjie
public enum ExtendAction { | SELECT_ALL | CUT | COPY | PASTE | ... }
```
功能： 编辑框中文本的扩展编辑操作类型，如剪切、复制等。

#### COPY

```cangjie
COPY
```
功能： 复制。

#### CUT

```cangjie
CUT
```
功能： 剪切。

#### PASTE

```cangjie
PASTE
```
功能： 粘贴。

#### SELECT_ALL

```cangjie
SELECT_ALL
```
功能： 全选。


### IMFEventType

enum IMFEventType
```cangjie
public enum IMFEventType <: ToString { | InsertText | DeleteLeft | DeleteRight | SendKeyboardStatus | SendFunctionKey | MoveCursor | HandleExtendAction | GetLeftTextOfCursor | GetRightTextOfCursor | GetTextIndexAtCursor | SelectByRange | SelectByMovement | ImeChange | ... }
```
功能： 回调函数的事件类型。

#### DeleteLeft

```cangjie
DeleteLeft
```
功能： 向左删除事件。

#### DeleteRight

```cangjie
DeleteRight
```
功能： 向右删除事件。

#### GetLeftTextOfCursor

```cangjie
GetLeftTextOfCursor
```
功能： 获取光标左侧指定长度文本事件。

#### GetRightTextOfCursor

```cangjie
GetRightTextOfCursor
```
功能： 获取光标右侧指定长度文本事件。

#### GetTextIndexAtCursor

```cangjie
GetTextIndexAtCursor
```
功能： 获取光标处文本索引事件。

#### HandleExtendAction

```cangjie
HandleExtendAction
```
功能： 发送扩展编辑操作事件。

#### ImeChange

```cangjie
ImeChange
```
功能： 输入法及子类型变化监听事件。

#### InsertText

```cangjie
InsertText
```
功能： 插入文本事件。

#### MoveCursor

```cangjie
MoveCursor
```
功能： 移动光标事件。

#### SelectByMovement

```cangjie
SelectByMovement
```
功能： 按光标移动方向选中文本事件。

#### SelectByRange

```cangjie
SelectByRange
```
功能： 按范围选中文本事件。

#### SendFunctionKey

```cangjie
SendFunctionKey
```
功能： 发送功能键事件。

#### SendKeyboardStatus

```cangjie
SendKeyboardStatus
```
功能： 发送输入法软键盘状态事件。


### KeyboardStatus

enum KeyboardStatus
```cangjie
public enum KeyboardStatus { | NONE | HIDE | SHOW | ... }
```
功能： 输入法软键盘状态。

#### HIDE

```cangjie
HIDE
```
功能： 隐藏状态。

#### NONE

```cangjie
NONE
```
功能： NONE。

#### SHOW

```cangjie
SHOW
```
功能： 显示状态。


### TextInputType

enum TextInputType
```cangjie
public enum TextInputType { | NONE | TEXT | MULTILINE | NUMBER | PHONE | DATETIME | EMAIL_ADDRESS | URL | VISIBLE_PASSWORD | NUMBER_PASSWORD | ... }
```
功能： 文本输入类型。

#### DATETIME

```cangjie
DATETIME
```
功能： 日期类型。

#### EMAIL_ADDRESS

```cangjie
EMAIL_ADDRESS
```
功能： 邮箱地址类型。

#### MULTILINE

```cangjie
MULTILINE
```
功能： 多行类型。

#### NONE

```cangjie
NONE
```
功能： NONE。

#### NUMBER

```cangjie
NUMBER
```
功能： 数字类型。

#### NUMBER_PASSWORD

```cangjie
NUMBER_PASSWORD
```
功能： 数字密码类型。

#### PHONE

```cangjie
PHONE
```
功能： 电话号码类型。

#### TEXT

```cangjie
TEXT
```
功能： 文本类型。

#### URL

```cangjie
URL
```
功能： 链接类型。

#### VISIBLE_PASSWORD

```cangjie
VISIBLE_PASSWORD
```
功能： 密码类型。



