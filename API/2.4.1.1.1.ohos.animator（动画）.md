# ohos.animator（动画）

本模块提供组件动画效果，包括定义动画、启动动画和以相反的顺序播放动画等。

```cangjie
import kit.UIKit.*
```
## Classes

### AnimatorResult

class AnimatorResult
```cangjie
public class AnimatorResult { public init(options: AnimatorOptions) }
```
功能： 定义动画的初始化类。

#### prop oncancel

```cangjie
public mut prop oncancel: () -> Unit
```
功能： 动画被取消时回调。即将废弃，推荐使用onCancel。
Type: () -> Unit; Readable: true; Writable: true

#### prop onCancel

```cangjie
public mut prop onCancel: () -> Unit
```
功能： 动画被取消时回调。
Type: () -> Unit; Readable: true; Writable: true

#### prop onfinish

```cangjie
public mut prop onfinish: () -> Unit
```
功能： 动画完成时回调。即将废弃，推荐使用onFinish。
Type: () -> Unit; Readable: true; Writable: true

#### prop onFinish

```cangjie
public mut prop onFinish: () -> Unit
```
功能： 动画完成时回调。
Type: () -> Unit; Readable: true; Writable: true

#### prop onframe

```cangjie
public mut prop onframe: (Float64) -> Unit
```
功能： 接收到帧时回调。即将废弃，推荐使用onFrame。
Type: (Float64) -> Unit; Readable: true; Writable: true

#### prop onFrame

```cangjie
public mut prop onFrame: (Float64) -> Unit
```
功能： 接收到帧时回调。
Type: (Float64) -> Unit; Readable: true; Writable: true

#### prop onrepeat

```cangjie
public mut prop onrepeat: () -> Unit
```
功能： 动画重复时回调。即将废弃，推荐使用onRepeat。
Type: () -> Unit; Readable: true; Writable: true

#### prop onRepeat

```cangjie
public mut prop onRepeat: () -> Unit
```
功能： 动画重复时回调。
Type: () -> Unit; Readable: true; Writable: true


### AnimatorOptions

class AnimatorOptions
```cangjie
public class AnimatorOptions { public AnimatorOptions( public let duration!: Int32 = 0, public let easing!: String = "ease", public let delay!: Int32 = 0, public let fill!: AnimatorFill = None, public let direction!: AnimatorDirection = Normal, public let iterations!: Int32 = 0, public let begin!: Float64 = 0.0, public let end!: Float64 = 1.0 ) }
```
功能： 动画选项类型。

#### let begin

```cangjie
public let begin: Float64
```
功能： 设置动画插值起点。
Type: Float64; Readable: true; Writable: false

#### let delay

```cangjie
public let delay: Int32
```
功能： 设置动画延时播放时长。
Type: Int32; Readable: true; Writable: false

#### let direction

```cangjie
public let direction: AnimatorDirection
```
功能： 设置动画播放模式。
Type: AnimatorDirection; Readable: true; Writable: false

#### let duration

```cangjie
public let duration: Int32
```
功能： 设置动画播放的时长。
Type: Int32; Readable: true; Writable: false

#### let easing

```cangjie
public let easing: String
```
功能： 设置动画插值曲线。
Type: String; Readable: true; Writable: false

#### let end

```cangjie
public let end: Float64
```
功能： 设置动画插值终点。
Type: Float64; Readable: true; Writable: false

#### let fill

```cangjie
public let fill: AnimatorFill
```
功能： 设置动画执行后是否恢复到初始状态。
Type: AnimatorFill; Readable: true; Writable: false

#### let iterations

```cangjie
public let iterations: Int32
```
功能： 设置动画播放次数。
Type: Int32; Readable: true; Writable: false



## Enums

### AnimatorDirection

enum AnimatorDirection
```cangjie
public enum AnimatorDirection { | Normal | Reverse | Alternate | AlternateReverse }
```
功能： 动画播放模式。

#### Alternate

```cangjie
Alternate
```
功能： 设置动画交替循环播放，奇数次正向播放，偶数次反向播放。

#### AlternateReverse

```cangjie
AlternateReverse
```
功能： 设置动画反向循环播放。

#### Normal

```cangjie
Normal
```
功能： 设置动画正向循环播放。

#### Reverse

```cangjie
Reverse
```
功能： 设置动画反向循环播放。


### AnimatorFill

enum AnimatorFill
```cangjie
public enum AnimatorFill { | None | Forwards | Backwards | Both }
```
功能： 设置动画执行后是否恢复到初始状态，动画执行后，动画结束时的状态（在最后一个关键帧中定义）将保留。

#### Backwards

```cangjie
Backwards
```
功能： 设置动画将在animation-delay期间应用第一个关键帧中定义的值。当animation-direction为Normal或Alternate时应用from关键帧中的值，当animation-direction为Reverse或AlternateReverse时应用to关键帧中的值。

#### Both

```cangjie
Both
```
功能： 设置动画将遵循forwards和backwards的规则，从而在两个方向上扩展动画属性。

#### Forwards

```cangjie
Forwards
```
功能： 设置在动画结束后，目标将保留动画结束时的状态（在最后一个关键帧中定义）。

#### None

```cangjie
None
```
功能： 设置在动画执行之前和之后都不会应用任何样式到目标上。



## Examples

```cangjie
package ohos_app_cangjie_entry
import kit.UIKit.*
import ohos.state_macro_manage.*

@Entry
@Component
class EntryView {
 var backAnimator: ?AnimatorResult = None
 var flag = false
 @State var wid = 100.0
 @State var hei = 100.0
 func build() {
 Column {
 Column()
 .width(this.wid)
 .height(this.wid)
 .backgroundColor(Color.RED)
 Button("create")
 .fontSize(30)
 .fontColor(Color.BLACK)
 .onClick {
 this.backAnimator = AnimatorResult(
 AnimatorOptions(
 duration: 5000,
 easing: "ease",
 delay: 0,
 fill: AnimatorFill.Both,
 direction: AnimatorDirection.AlternateReverse,
 iterations: -1,
 begin: -100.0,
 end: 200.0
 )
 )
 this.backAnimator?.onframe = {
 value: Float64 =>
 AppLog.info("onframe called ${value}")
 this.wid = value
 this.hei = value
 }
 this.backAnimator?.onCancel = {=> AppLog.info("onCancel called")}
 this.backAnimator?.onRepeat = {=> AppLog.info("onRepeat called")}
 this.backAnimator?.onFinish = {=> AppLog.info("onFinish called")}
 var callBackGet = this.backAnimator?.onFinish
 var fun = callBackGet.getOrThrow()
 fun()
 callBackGet = this.backAnimator?.onRepeat
 fun = callBackGet.getOrThrow()
 fun()
 callBackGet = this.backAnimator?.onCancel
 fun = callBackGet.getOrThrow()
 fun()
 let callBackGet2 = this.backAnimator?.onFrame
 let fun2 = callBackGet2.getOrThrow()
 fun2(333.0)
 }
 Button("play")
 .fontSize(30)
 .fontColor(Color.BLACK)
 .onClick {
 this.flag = false
 this.backAnimator?.play()
 }
 Button("expectedFrameRateRange")
 .fontSize(20)
 .fontColor(Color.BLACK)
 .onClick {
 this.flag = false
 this.backAnimator?.setExpectedFrameRateRange(
 ExpectedFrameRateRange(
 min: 2,
 max: 15,
 expected: 3
 )
 )
 }
 Button("pause")
 .fontSize(30)
 .fontColor(Color.BLACK)
 .onClick {
 this.flag = false
 this.backAnimator?.pause()
 }
 Button("cancel")
 .fontSize(30)
 .fontColor(Color.BLACK)
 .onClick {
 this.flag = false
 this.backAnimator?.cancel()
 }
 Button("reverse")
 .fontSize(30)
 .fontColor(Color.BLACK)
 .onClick {
 this.flag = false
 this.backAnimator?.reverse()
 }
 Button("finish")
 .fontSize(30)
 .fontColor(Color.BLACK)
 .onClick {
 this.flag = true
 this.backAnimator?.finish()
 }
 Button("reset")
 .fontSize(30)
 .fontColor(Color.BLACK)
 .onClick {
 if (this.flag) {
 this.flag = false
 this
 .backAnimator?
 .reset(
 AnimatorOptions(
 duration: 6000,
 easing: "linear-out-slow-in",
 delay: 0,
 fill: AnimatorFill.Forwards,
 direction: AnimatorDirection.Reverse,
 iterations: 1,
 begin: 200.0,
 end: 400.0
 )
 )
 } else {
 AppLog.info("Animation not ended")
 }
 }
 }
 }
}
```

