# Image

Image为图片组件，常用于在应用中显示图片。支持png、jpg、jpeg、bmp、svg、webp、gif和heif类型的图片格式。

## Component Constructors

### public init(src: String)

```cangjie
public init(src: String)
```
功能： 通过图片数据源获取图片，用于后续渲染展示。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| String | 是 | 图片的数据源。 String可用于加载网络图片和本地图片。 | src | - |

### public init(src: AppResource)

```cangjie
public init(src: AppResource)
```
功能： 通过图片数据源获取图片，用于后续渲染展示。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| AppResource | 是 | 图片的数据源。 AppResource可用于加载网络图片和本地图片。 | src | - |

### public init(src: PixelMap)

```cangjie
public init(src: PixelMap)
```
功能： 通过图片数据源获取图片，用于后续渲染展示。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| PixelMap | 是 | 图片的数据源。 PixelMap格式为像素图，常用于图片编辑的场景。 | src | - |

### public init(src: ImageContent)

```cangjie
public init(src: ImageContent)
```
功能： 通过图片数据源获取图片，用于后续渲染展示。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| ImageContent | 是 | 指定图像内容。 | src | - |


## Functions

### public func alt(src: String): This

```cangjie
public func alt(src: String): This
```
功能： 设置图片加载时显示的占位图。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| String | 是 | 加载时显示的占位图，支持本地图片（png、jpg、bmp、svg、gif和heif类型），不支持网络图片。 | src | - |

### public func alt(src: AppResource): This

```cangjie
public func alt(src: AppResource): This
```
功能： 设置图片加载时显示的占位图。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| AppResource | 是 | 加载时显示的占位图，支持本地图片（png、jpg、bmp、svg、gif和heif类型），不支持网络图片。 | src | - |

### public func alt(src: PixelMap): This

```cangjie
public func alt(src: PixelMap): This
```
功能： 设置图片加载时显示的占位图。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| PixelMap | 是 | 加载时显示的占位图，支持PixelMap类型。 初始值：None。 | src | - |

### public func autoResize(autoResize: Bool): This

```cangjie
public func autoResize(autoResize: Bool): This
```
功能： 设置图片解码过程中是否对图源自动缩放。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| Bool | 是 | 图片解码过程中是否对图源自动缩放。设置为true时，组件会根据显示区域的尺寸决定用于绘制的图源尺寸，有利于减少内存占用。如原图大小为1920x1080，而显示区域大小为200x200，则图片会降采样解码到200x200的尺寸，大幅度节省图片占用的内存。 初始值：false。 | autoResize | - |

### public func colorFilter(value: ColorFilter): This

```cangjie
public func colorFilter(value: ColorFilter): This
```
功能： 为图像设置颜色滤镜效果。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| ColorFilter | 是 | 给图像设置颜色滤镜效果，入参为一个的4x5的RGBA转换矩阵。 矩阵第一行表示R（红色）的向量值，第二行表示G（绿色）的向量值，第三行表示B（蓝色）的向量值，第四行表示A（透明度）的向量值，4行分别代表不同的RGBA的向量值。 当矩阵对角线值为1，其余值为0时，保持图片原有色彩。 计算规则： 如果输入的滤镜矩阵为： 像素点为像素点为[R, G, B, A] 则过滤后的颜色为 [R’, G’, B’, A’] | value | - |

### public func copyOption(value: CopyOptions): This

```cangjie
public func copyOption(value: CopyOptions): This
```
功能： 设置图片是否可复制。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| CopyOptions | 是 | 当图片是否可复制。 初始值：CopyOptions.None。 | value | - |

### public func draggable(value: Bool): This

```cangjie
public func draggable(value: Bool): This
```
功能： 设置组件默认拖拽效果。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| Bool | 是 | 设置组件默认拖拽效果，设置为true时，组件可拖拽，绑定的长按手势不生效。若用户需要设置自定义手势，则需要将draggable设置为false。 初始值：true。 | value | - |

### public func dynamicRangeMode(value: DynamicRangeMode): This

```cangjie
public func dynamicRangeMode(value: DynamicRangeMode): This
```
功能： 设置期望展示的图像动态范围。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| DynamicRangeMode | 是 | 图像显示的动态范围。 初始值：DynamicRangeMode.STANDARD。 | value | - |

### public func fillColor(value: ResourceColor): This

```cangjie
public func fillColor(value: ResourceColor): This
```
功能： 设置替换svg图片的填充颜色。仅对svg图源生效。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| ResourceColor | 是 | 设置填充颜色。 默认不对组件进行填充。当传入异常值时，系统将使用默认的主题色：浅色模式下为黑色，深色模式下为白色。 | value | - |

### public func fitOriginalSize(isFitOriginalSize: Bool): This

```cangjie
public func fitOriginalSize(isFitOriginalSize: Bool): This
```
功能： 设置图片的显示尺寸是否跟随图源尺寸。图片组件尺寸未设置时，其显示尺寸是否跟随图源尺寸。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| Bool | 是 | 是否跟随图源尺寸。 初始值：false。 | isFitOriginalSize | - |

### public func interpolation(interpolation: ImageInterpolation): This

```cangjie
public func interpolation(interpolation: ImageInterpolation): This
```
功能： 设置图片的插值效果。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| ImageInterpolation | 是 | 图片的插值效果。 初始值：ImageInterpolation.Low。 | interpolation | - |

### public func matchTextDirection(isMatchTextDirection: Bool): This

```cangjie
public func matchTextDirection(isMatchTextDirection: Bool): This
```
功能： 设置图片是否跟随系统语言方向，在RTL语言环境下显示镜像翻转显示效果。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| Bool | 是 | 是否跟随系统语言方向。 初始值：false。 | isMatchTextDirection | - |

### public func objectFit(objectFit: ImageFit): This

```cangjie
public func objectFit(objectFit: ImageFit): This
```
功能： 设置图片的填充效果。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| ImageFit | 是 | 图片的填充效果。 初始值：ImageFit.Cover。 | objectFit | - |

### public func objectRepeat(objectRepeat: ImageRepeat): This

```cangjie
public func objectRepeat(objectRepeat: ImageRepeat): This
```
功能： 设置图片的重复样式。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| ImageRepeat | 是 | 图片的重复样式。 初始值：ImageRepeat.NoRepeat。 | objectRepeat | - |

### public func renderMode(renderMode: ImageRenderMode): This

```cangjie
public func renderMode(renderMode: ImageRenderMode): This
```
功能： 设置图片渲染的模式。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| ImageRenderMode | 是 | 图片渲染的模式为原色或黑色。 初始值：ImageRenderMode.Original。 | renderMode | - |

### public func sourceSize(width: Length, height: Length): This

```cangjie
public func sourceSize(width: Length, height: Length): This
```
功能： 将原始图片解码成 PixelMap 指定尺寸的图片。PixelMap资源不支持该函数。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| Length | 是 | 图片解码后的宽度。 单位：vp。 | width | - |
| Length | 是 | 图片解码后的高度。 单位：vp。 | height | - |

### public func syncLoad(syncLoad: Bool): This

```cangjie
public func syncLoad(syncLoad: Bool): This
```
功能： 设置是否同步加载图片。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| Bool | 是 | 是否同步加载图片，默认是异步加载。同步加载时阻塞UI线程，不会显示占位图。 初始值：false。 | syncLoad | - |

### public func onComplete(callback: (CJImageComplete)->Unit): This

```cangjie
public func onComplete(callback: (CJImageComplete)->Unit): This
```
功能： 图片成功加载时触发该事件，返回成功加载的图片尺寸。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| ( CJImageComplete )->Unit | 是 | 回调函数，图片成功加载时触发。 | callback | - |

### public func onError(callback: (CJImageError)->Unit): This

```cangjie
public func onError(callback: (CJImageError)->Unit): This
```
功能： 图片加载出现异常时触发该事件。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| ( CJImageError )->Unit | 是 | 回调函数，图片加载出现异常时触发。 | callback | - |

### public func onFinish(callback: ()->Unit): This

```cangjie
public func onFinish(callback: ()->Unit): This
```
功能： 当加载的源文件为带动效的svg图片时，当svg动效播放完成时会触发该事件，如果动效为无限循环动效，则不会触发这个事件。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| ()->Unit | 是 | 回调函数，svg动效播放完成时触发。 | callback | - |


## Classes

### ColorFilter

class ColorFilter
```cangjie
public class ColorFilter { public init(array: Array<Float32>) }
```
功能： 颜色滤镜矩阵。


### CJImageComplete

class CJImageComplete
```cangjie
public class CJImageComplete { public var width: Float64 = 0.0 public var height: Float64 = 0.0 public var componentWidth: Float64 = 0.0 public var componentHeight: Float64 = 0.0 public var loadingStatus: Int32 = 0 public var contentWidth: Float64 = 0.0 public var contentHeight: Float64 = 0.0 public var contentOffsetX: Float64 = 0.0 public var contentOffsetY: Float64 = 0.0 public init( width: Float64, height: Float64, componentWidth: Float64, componentHeight: Float64, loadingStatus: Int32 ) public init( width: Float64, height: Float64, componentWidth: Float64, componentHeight: Float64, loadingStatus: Int32, contentWidth: Float64, contentHeight: Float64, contentOffsetX: Float64, contentOffsetY: Float64 ) public init() }
```
功能： 图片加载成功类型。

#### var componentHeight

```cangjie
public var componentHeight: Float64 = 0.0
```
功能： 组件的高度，单位为px。
Type: Float64; Readable: true; Writable: true

#### var componentWidth

```cangjie
public var componentWidth: Float64 = 0.0
```
功能： 组件的宽度，单位为px。
Type: Float64; Readable: true; Writable: true

#### var contentHeight

```cangjie
public var contentHeight: Float64 = 0.0
```
功能： 图片实际绘制的高度，单位为px。
Type: Float64; Readable: true; Writable: true

#### var contentOffsetX

```cangjie
public var contentOffsetX: Float64 = 0.0
```
功能： 实际绘制内容相对于组件自身的x轴偏移，单位为px。
Type: Float64; Readable: true; Writable: true

#### var contentOffsetY

```cangjie
public var contentOffsetY: Float64 = 0.0
```
功能： 实际绘制内容相对于组件自身的y轴偏移，单位为px。
Type: Float64; Readable: true; Writable: true

#### var contentWidth

```cangjie
public var contentWidth: Float64 = 0.0
```
功能： 图片实际绘制的宽度，单位为px。
Type: Float64; Readable: true; Writable: true

#### var height

```cangjie
public var height: Float64 = 0.0
```
功能： 图片的高度，单位为px。
Type: Float64; Readable: true; Writable: true

#### var loadingStatus

```cangjie
public var loadingStatus: Int32 = 0
```
功能： 图片加载成功的状态。
Type: Int32; Readable: true; Writable: true

#### var width

```cangjie
public var width: Float64 = 0.0
```
功能： 图片的宽度，单位为px。
Type: Float64; Readable: true; Writable: true


### CJImageError

class CJImageError
```cangjie
public class CJImageError { public var componentWidth: Float64 = 0.0 public var componentHeight: Float64 = 0.0 public var message: String = "" public init( componentWidth: Float64, componentHeight: Float64 ) public init( componentWidth: Float64, componentHeight: Float64, message: String ) public init() }
```
功能： 图片加载失败类型。

#### var componentWidth

```cangjie
public var componentWidth: Float64 = 0.0
```
功能： 表示组件的宽度。
Type: Float64; Readable: true; Writable: true

#### var componentHeight

```cangjie
public var componentHeight: Float64 = 0.0
```
功能： 表示组件的高度。
Type: Float64; Readable: true; Writable: true

#### var message

```cangjie
public var message: String = ""
```
功能： 表示报错信息。
Type: String; Readable: true; Writable: true



## Enums

### DynamicRangeMode

enum DynamicRangeMode
```cangjie
public enum DynamicRangeMode { | HIGH | CONSTRAINT | STANDARD }
```
功能： 期望展示的图像动态范围。

#### CONSTRAINT

```cangjie
CONSTRAINT
```
功能： 受限动态范围，受限进行图片提亮。

#### HIGH

```cangjie
HIGH
```
功能： 不受限动态范围，最大限度进行图片提亮。

#### STANDARD

```cangjie
STANDARD
```
功能： 标准动态范围，不进行图片提亮。


### ImageContent

enum ImageContent
```cangjie
public enum ImageContent { | EMPTY }
```
功能： 指定图像内容。

#### EMPTY

```cangjie
EMPTY
```
功能： 空图像。


### ImageInterpolation

enum ImageInterpolation
```cangjie
public enum ImageInterpolation { | None | High | Medium | Low }
```
功能： 图片的插值效果。

#### None

```cangjie
None
```
功能： 不使用插值图片数据。

#### High

```cangjie
High
```
功能： 插值图片数据的使用率高，可能会影响图片渲染的速度。

#### Medium

```cangjie
Medium
```
功能： 插值图片数据的使用率中。

#### Low

```cangjie
Low
```
功能： 插值图片数据的使用率低。


### ImageRenderMode

enum ImageRenderMode
```cangjie
public enum ImageRenderMode { | Original | Template }
```
功能： 图片渲染的模式。

#### Original

```cangjie
Original
```
功能： 按照原图进行渲染，包括颜色。

#### Template

```cangjie
Template
```
功能： 将图片渲染为模板图片，忽略图片的颜色信息。



## Examples

```cangjie
package ohos_app_cangjie_entry
import kit.UIKit.*
import ohos.state_macro_manage.*
import kit.LocalizationKit.__GenerateResource__

@Entry
@Component
class EntryView {
 func build() {
 Flex(FlexParams(direction: FlexDirection.Column, alignItems: ItemAlign.Start)) {
 Row() {
 // 加载png格式图片
 Image(@r(app.media.startIcon))
 .width(110)
 .height(110)
 .margin(15)
 .overlay(title: "png", align: Alignment.Bottom, offset: ContentOffset(x: 0, y: 20))
 // 加载gif格式图片
 Image(@r(app.media.list))
 .width(110).height(110).margin(15)
 .overlay(title: "gif", align: Alignment.Bottom, offset: ContentOffset(x: 0, y: 20))
 }
 Row() {
 // 加载svg格式图片
 Image(@r(app.media.svg))
 .width(110)
 .height(110)
 .margin(15)
 .overlay(title: "svg", align: Alignment.Bottom, offset: ContentOffset(x: 0, y: 20))
 // 加载jpg格式图片
 Image(@r(app.media.startIcon_jpg))
 .width(110)
 .height(110)
 .margin(15)
 .overlay(title: "jpg", align: Alignment.Bottom, offset: ContentOffset(x: 0, y: 20))
 }
 }
 .height(320)
 .width(360)
 .padding(right: 10, top: 10)
 }
}
```
```cangjie
package ohos_app_cangjie_entry
import kit.UIKit.*
import ohos.state_macro_manage.*
import kit.LocalizationKit.AppResource
import kit.LocalizationKit.__GenerateResource__

@Entry
@Component
class EntryView {
 let imageOne: AppResource= @r(app.media.startIcon)
 let imageTwo = @r(app.media.background)
 let imageThree = @r(app.media.svg_move)
 @State var src: AppResource = this.imageOne
 @State var src2: AppResource = this.imageThree

 func build() {
 Column(){
 // 为图片添加点击事件，点击完成后加载特定图片
 Image(this.src)
 .width(100)
 .height(100)
 .onClick{
 evt =>
 this.src =this.imageTwo
 }
 // 当加载图片为SVG格式时
 Image(this.src2)
 .width(100)
 .height(100)
 .onFinish{
 // SVG动效播放完成时加载另一张图片
 =>
 this.src2 =this.imageOne
 }
 }
 }
}
```
```cangjie
package ohos_app_cangjie_entry
import kit.UIKit.*
import ohos.state_macro_manage.*
import kit.LocalizationKit.AppResource
import kit.LocalizationKit.__GenerateResource__

@Entry
@Component
class EntryView {
 let blueColor = ColorFilter([0.38, 0.0, 0.0, 0.0, 0.0,
 0.0, 0.81, 0.0, 0.0, 0.0,
 0.0, 0.0, 0.43, 0.0, 0.0,
 0.0, 0.0, 0.0, 1.0, 0.0])
 let colorFilter = ColorFilter([1.0, 0.0, 1.0, 0.0, 1.0,
 0.0, 0.0, 0.0, 1.0, 0.0,
 1.0, 0.0, 1.0, 0.0, 0.0,
 0.0, 1.0, 0.0, 1.0, 0.0])

 @State var DrawingColorFilterFirst: ColorFilter = blueColor
 @State var DrawingColorFilterSecond: ColorFilter = colorFilter

 func build() {
 Column(5){
 Image(@r(app.media.startIcon))
 .width(100)
 .height(100)
 .colorFilter(this.DrawingColorFilterFirst)
 .onClick{
 evt =>
 this.DrawingColorFilterFirst = colorFilter
 }
 Image(@r(app.media.startIcon))
 .width(110)
 .height(110)
 .margin(15)
 .colorFilter(this.DrawingColorFilterSecond)
 .onClick{
 evt =>
 this.DrawingColorFilterSecond = blueColor
 }
 }
 }
}
```
```cangjie
package ohos_app_cangjie_entry
import kit.UIKit.*
import ohos.state_macro_manage.*
import kit.LocalizationKit.__GenerateResource__

@Entry
@Component
class EntryView {
 func build() {
 Flex(FlexParams(direction: FlexDirection.Column, alignItems: ItemAlign.Start)) {
 Row() {
 // 加载png格式图片
 Image(@r(app.media.startIcon))
 .width(110)
 .height(110)
 .margin(15)
 .overlay(title: "png", align: Alignment.Bottom, offset: ContentOffset(x: 0, y: 20))
 .border(width: 2, color: Color.PINK)
 .objectFit(ImageFit.TOP_START)
 // 加载gif格式图片
 Image(@r(app.media.list))
 .width(110)
 .height(110)
 .margin(15)
 .overlay(title: "gif", align: Alignment.Bottom, offset: ContentOffset(x: 0, y: 20))
 .border(width: 2, color: Color.PINK)
 .objectFit(ImageFit.BOTTOM_START)
 }
 Row() {
 // 加载svg格式图片
 Image(@r(app.media.svg))
 .width(110)
 .height(110)
 .margin(15)
 .overlay(title: "svg", align: Alignment.Bottom, offset: ContentOffset(x: 0, y: 20))
 .border(width: 2, color: Color.PINK)
 .objectFit(ImageFit.TOP_END)
 // 加载jpg格式图片
 Image(@r(app.media.startIcon_jpg))
 .width(110)
 .height(110)
 .margin(15)
 .overlay(title: "jpg", align: Alignment.Bottom, offset: ContentOffset(x: 0, y: 20))
 .border(width: 2, color: Color.PINK)
 .objectFit(ImageFit.CENTER)
 }
 }
 .height(320)
 .width(360)
 .padding(right: 10, top: 10)
 }
}
```
```cangjie
package ohos_app_cangjie_entry
import kit.UIKit.*
import ohos.state_macro_manage.*
import kit.LocalizationKit.AppResource
import kit.LocalizationKit.__GenerateResource__

@Entry
@Component
class EntryView {
 let imageOne: AppResource= @r(app.media.startIcon)
 let imageTwo = @r(app.media.svg_move)
 @State var imageSrcIndex : Int64 = 0
 @State var imageSrcList : Array<AppResource> = [this.imageOne,this.imageTwo]

 func build() {
 Column(){
 Image(this.imageSrcList[this.imageSrcIndex])
 .width(100)
 .height(100)
 Button("点击切换Image的src")
 .padding(20)
 .onClick{
 evt =>
 this.imageSrcIndex = (this.imageSrcIndex + 1) % 2
 }
 }
 }
}
```
```cangjie
package ohos_app_cangjie_entry
import kit.UIKit.*
import ohos.state_macro_manage.*
import kit.LocalizationKit.AppResource
import kit.LocalizationKit.__GenerateResource__
import ohos.component.ImageFit

@Entry
@Component
class EntryView {
 @State var borderRadiusValue : Int64 = 10

 func build() {
 Column(){
 Image(@r(app.media.image))
 .sourceSize(500,500)
 .width(300)
 .height(300)
 Image(@r(app.media.image))
 .sourceSize(10,10)
 .width(300)
 .height(300)
 .borderWidth(1)
 }
 .height(100.percent)
 .width(100.percent)
 }
}
```
```cangjie
package ohos_app_cangjie_entry
import kit.UIKit.*
import ohos.state_macro_manage.*
import kit.LocalizationKit.AppResource
import kit.LocalizationKit.__GenerateResource__
import ohos.component.ImageFit

@Entry
@Component
class EntryView {
 @State var borderRadiusValue : Int64 = 10

 func build() {
 Column(){
 Image(@r(app.media.image))
 .renderMode(ImageRenderMode.Template)
 .width(300)
 .height(300)
 }
 .height(100.percent)
 .width(100.percent)
 }
}
```
```cangjie
package ohos_app_cangjie_entry
import kit.UIKit.*
import ohos.state_macro_manage.*
import kit.LocalizationKit.AppResource
import kit.LocalizationKit.__GenerateResource__
import ohos.component.ImageFit

@Entry
@Component
class EntryView {
 @State var borderRadiusValue : Int64 = 10
 func build() {
 Column(){
 Image(@r(app.media.image))
 .objectRepeat(ImageRepeat.Y)
 .width(120)
 .height(300)
 .objectFit(ImageFit.Contain)
 .borderWidth(1)
 }
 .height(100.percent)
 .width(100.percent)
 }
}
```
```cangjie
package ohos_app_cangjie_entry
import kit.UIKit.*
import ohos.state_macro_manage.*
import kit.LocalizationKit.AppResource
import kit.LocalizationKit.__GenerateResource__

@Entry
@Component
class EntryView {
 @State var borderRadiusValue : Int64 = 10
 func build() {
 Column(){
 Text("不设置fillColor")
 Image(@r(app.media.svg))
 .width(100)
 .height(100)
 .objectFit(ImageFit.Contain)
 .borderWidth(1)
 Text("fillColor传入Color.ORANGE")
 Image(@r(app.media.svg))
 .width(100)
 .height(100)
 .objectFit(ImageFit.Contain)
 .borderWidth(1)
 .fillColor(Color.ORANGE)
 Text("fillColor传入Color.BLUE")
 Image(@r(app.media.svg))
 .width(100)
 .height(100)
 .objectFit(ImageFit.Contain)
 .borderWidth(1)
 .fillColor(Color.BLUE)
 Text("fillColor传入Color.RED")
 Image(@r(app.media.svg))
 .width(100)
 .height(100)
 .objectFit(ImageFit.Contain)
 .borderWidth(1)
 .fillColor(Color.RED)
 }
 .height(100.percent)
 .width(100.percent)
 }
}
```

