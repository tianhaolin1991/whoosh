# ohos.hiappevent（应用事件打点）

本模块提供了应用事件打点能力，包括应用事件落盘、应用事件订阅、应用事件清理、打点功能配置等功能。

```cangjie
import kit.PerformanceAnalysisKit.*
```
## Classes

### AppEventPackage

class AppEventPackage
```cangjie
public class AppEventPackage { public let packageId: Int32 public let row: Int32 public let size: Int32 public let data: Array<String> public init(packageId: Int32, row: Int32, size: Int32, data: Array<String>) }
```
功能： 提供了订阅返回的应用事件包的参数定义。

#### let data

```cangjie
public let data: Array<String>
```
功能： 事件包的事件信息。
Type: Array<String>; Readable: true; Writable: false

#### let packageId

```cangjie
public let packageId: Int32
```
功能： 事件包ID，从0开始自动递增。
Type: Int32; Readable: true; Writable: false

#### let row

```cangjie
public let row: Int32
```
功能： 事件包的事件数量。
Type: Int32; Readable: true; Writable: false

#### let size

```cangjie
public let size: Int32
```
功能： 事件包的事件大小，单位为byte。
Type: Int32; Readable: true; Writable: false


### AppEventPackageHolder

class AppEventPackageHolder
```cangjie
public class AppEventPackageHolder {}
```
功能： 订阅数据持有者类，用于对订阅事件进行处理。


### HiAppEvent

class HiAppEvent
```cangjie
public class HiAppEvent {}
```
功能： 该类提供了应用事件打点能力。


### Processor

class Processor
```cangjie
public class Processor { public let name: String public let debugMode: Bool public let routeInfo: String public let appId: String public let onStartReport: Bool public let onBackgroundReport: Bool public let periodReport: Int64 public let batchReport: Int64 public let userIds: Array<String> public let userProperties: Array<String> public let eventConfigs: Array<AppEventReportConfig> public init(name: String, debugMode!: Bool = false, routeInfo!: String = "", appId!: String = "", onStartReport!: Bool = false, onBackgroundReport!: Bool = false, periodReport!: Int64 = 0, batchReport!: Int64 = 0, userIds!: Array<String> = [], userProperties!: Array<String> = [], eventConfigs!: Array<AppEventReportConfig> = []) }
```
功能： 可以上报事件的数据处理者对象。

#### let appId

```cangjie
public let appId: String
```
功能： 应用id，默认为空字符串。传入字符串长度不能超过8KB，超过时会被置为默认值。
Type: String; Readable: true; Writable: false

#### let batchReport

```cangjie
public let batchReport: Int64
```
功能： 事件上报阈值，当事件条数达到阈值时上报事件。传入数值必须大于0且小于1000，不在数值范围内会被置为默认值0，不进行上报。
Type: Int64; Readable: true; Writable: false

#### let debugMode

```cangjie
public let debugMode: Bool
```
功能： 是否开启debug模式，默认值为false。配置值为true表示开启debug模式，false表示不开启debug模式。
Type: Bool; Readable: true; Writable: false

#### let eventConfigs

```cangjie
public let eventConfigs: Array<AppEventReportConfig>
```
功能： 数据处理者可以上报的事件数组。
Type: Array< AppEventReportConfig >; Readable: true; Writable: false

#### let name

```cangjie
public let name: String
```
功能： 数据处理者的名称。名称只能包含大小写字母、数字、下划线和$，不能以数字开头，长度非空且不超过256个字符。
Type: String; Readable: true; Writable: false

#### let onBackgroundReport

```cangjie
public let onBackgroundReport: Bool
```
功能： 当应用程序进入后台时是否上报事件，默认值为false。配置值为true表示上报事件，false表示不上报事件。
Type: Bool; Readable: true; Writable: false

#### let onStartReport

```cangjie
public let onStartReport: Bool
```
功能： 数据处理者在启动时是否上报事件，默认值为false。配置值为true表示上报事件，false表示不上报事件。
Type: Bool; Readable: true; Writable: false

#### let periodReport

```cangjie
public let periodReport: Int64
```
功能： 事件定时上报时间周期，单位为秒。传入数值必须大于或等于0，小于0时会被置为默认值0，不进行定时上报。
Type: Int64; Readable: true; Writable: false

#### let routeInfo

```cangjie
public let routeInfo: String
```
功能： 服务器位置信息，默认为空字符串。传入字符串长度不能超过8KB，超过时会被置为默认值。
Type: String; Readable: true; Writable: false

#### let userIds

```cangjie
public let userIds: Array<String>
```
功能： 数据处理者可以上报的用户ID的name数组。name对应 setUserId 接口的name参数。
Type: Array<String>; Readable: true; Writable: false

#### let userProperties

```cangjie
public let userProperties: Array<String>
```
功能： 数据处理者可以上报的用户属性的name数组。name对应 setUserProperty 接口的name参数。
Type: Array<String>; Readable: true; Writable: false



## Structs

### AppEventReportConfig

struct AppEventReportConfig
```cangjie
public struct AppEventReportConfig { public let domain: String public let name: String public let isRealTime: Bool public init(domain!: String = "", name!: String = "", isRealTime!: Bool = false) }
```
功能： 数据处理者可以上报事件的描述配置。


### AppEventFilter

struct AppEventFilter
```cangjie
public struct AppEventFilter { public let domain: String public let eventTypes: Array<EventType> public let names: Array<String> public init(domain: String, eventTypes!: Array<EventType> = [], names!: Array<String> = []) }
```
功能： 提供了过滤应用事件的参数选项。


### AppEventGroup

struct AppEventGroup
```cangjie
public struct AppEventGroup { public let name: String public let appEventInfos: Array<AppEventInfo> public init(name: String, appEventInfos: Array<AppEventInfo>) }
```
功能： 提供了订阅返回的事件组的参数定义。


### AppEventInfo

struct AppEventInfo
```cangjie
public struct AppEventInfo { public AppEventInfo( public let domain: String, public let name: String, public let event: EventType, public let params: Array<Parameters> ) }
```
功能： 提供了应用事件信息的参数选项。


### ConfigOption

struct ConfigOption
```cangjie
public struct ConfigOption { public let disable: Bool public let maxStorage: String public ConfigOption(maxStorage: String, disable!: Bool = false) }
```
功能： 提供了对应用事件打点功能的配置选项。


### Parameters

struct Parameters
```cangjie
public struct Parameters { public Parameters( public let key: String, public let value: ValueType ) }
```
功能： AppEventInfo 的事件参数对象。


### TriggerCondition

struct TriggerCondition
```cangjie
public struct TriggerCondition { public let row: Int32 public let size: Int32 public let timeOut: Int32 public init(row!: Int32 = 0, size!: Int32 = 0, timeOut!: Int32 = 0) }
```
功能： 提供了回调触发条件的参数选项，只要满足任一条件就会触发订阅回调。


### Watcher

struct Watcher
```cangjie
public struct Watcher { public let name: String public let triggerCondition: TriggerCondition public let appEventFilters: Array<AppEventFilter> public let onTrigger: Option<(Int32, Int32, AppEventPackageHolder) -> Unit> public let onReceive: Option<(String, Array<AppEventGroup>) -> Unit> public init(name: String, triggerCondition!: TriggerCondition = TriggerCondition(), appEventFilters!: Array<AppEventFilter> = [], onTrigger!: Option<(Int32, Int32, AppEventPackageHolder) -> Unit> = None, onReceive!: Option<(String, Array<AppEventGroup>) -> Unit> = None) }
```
功能： 提供了应用事件观察者的参数选项。



## Enums

### Domain

enum Domain
```cangjie
public enum Domain { | OS | ... }
```
功能： 提供了所有预定义事件的领域名称常量。

#### OS

```cangjie
OS
```
功能： 系统领域。

#### prop value

```cangjie
public prop value: String
```
功能： 获取枚举的值。


### Event

enum Event
```cangjie
public enum Event { | USER_LOGIN | USER_LOGOUT | DISTRIBUTED_SERVICE_START | APP_CRASH | APP_FREEZE | ... }
```
功能： 提供了所有预定义事件的事件名称常量。

#### APP_CRASH

```cangjie
APP_CRASH
```
功能： 应用崩溃事件。

#### APP_FREEZE

```cangjie
APP_FREEZE
```
功能： 应用卡死事件。

#### DISTRIBUTED_SERVICE_START

```cangjie
DISTRIBUTED_SERVICE_START
```
功能： 分布式服务启动事件。

#### USER_LOGIN

```cangjie
USER_LOGIN
```
功能： 用户登录事件。

#### USER_LOGOUT

```cangjie
USER_LOGOUT
```
功能： 用户登出事件。

#### prop value

```cangjie
public prop value: String
```
功能： 获取枚举的值。


### EventType

enum EventType
```cangjie
public enum EventType { | FAULT | STATISTIC | SECURITY | BEHAVIOR | ... }
```
功能： 事件类型枚举。

#### BEHAVIOR

```cangjie
BEHAVIOR
```
功能： 行为类型事件。

#### FAULT

```cangjie
FAULT
```
功能： 故障类型事件。

#### SECURITY

```cangjie
SECURITY
```
功能： 安全类型事件。

#### STATISTIC

```cangjie
STATISTIC
```
功能： 统计类型事件。

#### prop value

```cangjie
public prop value: UInt32
```
功能： 获取枚举的值。


### Param

enum Param
```cangjie
public enum Param { | USER_ID | DISTRIBUTED_SERVICE_NAME | DISTRIBUTED_SERVICE_INSTANCE_ID | ... }
```
功能： 提供了所有预定义参数的参数名称常量。

#### DISTRIBUTED_SERVICE_INSTANCE_ID

```cangjie
DISTRIBUTED_SERVICE_INSTANCE_ID
```
功能： 分布式服务实例ID。

#### DISTRIBUTED_SERVICE_NAME

```cangjie
DISTRIBUTED_SERVICE_NAME
```
功能： 分布式服务名称。

#### USER_ID

```cangjie
USER_ID
```
功能： 用户自定义ID。

#### prop value

```cangjie
public prop value: String
```
功能： 获取枚举的值。


### ValueType

enum ValueType
```cangjie
public enum ValueType { | INT(Int32) | FLOAT(Float64) | STRING(String) | BOOL(Bool) | ARRSTRING(Array<String>) | ARRAYI32(Array<Int32>) | ARRAYBOOL(Array<Bool>) | ARRAYF64(Array<Float64>) | ... }
```
功能： 用于表示允许的数据字段类型。

#### ARRAYBOOL(Array<Bool>)

```cangjie
ARRAYBOOL(Array<Bool>)
```
功能： 表示值类型为Bool类型的数组。

#### ARRAYF64(Array<Float64>)

```cangjie
ARRAYF64(Array<Float64>)
```
功能： 表示值类型为Float64类型的数组。

#### ARRAYI32(Array<Int32>)

```cangjie
ARRAYI32(Array<Int32>)
```
功能： 表示值类型为Int32类型的数组。

#### ARRSTRING(Array<String>)

```cangjie
ARRSTRING(Array<String>)
```
功能： 表示值类型为字符串数组。

#### BOOL(Bool)

```cangjie
BOOL(Bool)
```
功能： 表示值类型为布尔类型。

#### FLOAT(Float64)

```cangjie
FLOAT(Float64)
```
功能： 表示值类型为浮点型数字。

#### INT(Int32)

```cangjie
INT(Int32)
```
功能： 表示值类型为整型数字。

#### STRING(String)

```cangjie
STRING(String)
```
功能： 表示值类型为字符。

#### prop value

```cangjie
public prop value: String
```
功能： 以字符串形式返回该枚举的值。



