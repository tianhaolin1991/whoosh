# PatternLock

图案密码锁组件，以九宫格图案的方式输入密码，用于密码验证场景。手指在PatternLock组件区域按下时开始进入输入状态，手指离开屏幕时结束输入状态完成密码输入。

## Component Constructors

### public init()

```cangjie
public init()
```
功能： 创建一个PatternLock组件。

### public init(controller: PatternLockController)

```cangjie
public init(controller: PatternLockController)
```
功能： 创建一个PatternLock组件。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| PatternLockController | 是 | 设置PatternLock组件控制器，可用于控制组件状态重置。 | controller | - |


## Functions

### public func activateCircleStyle(value: CircleStyleOptions): This

```cangjie
public func activateCircleStyle(value: CircleStyleOptions): This
```
功能： 设置宫格圆点在“激活”状态的背景圆环样式。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| CircleStyleOptions | 是 | 宫格圆点在“激活”状态的背景圆环样式。 | value | - |

### public func activeColor(color: Color): This

```cangjie
public func activeColor(color: Color): This
```
功能： 设置宫格圆点在“激活”状态的填充颜色，“激活”状态为手指经过圆点但还未选中的状态。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| Color | 是 | 宫格圆点在“激活”状态的填充颜色。 初始值：0xff182431。 | color | - |

### public func autoReset(value: Bool): This

```cangjie
public func autoReset(value: Bool): This
```
功能： 设置在完成密码输入后再次在组件区域按下时是否重置组件状态。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| Bool | 是 | 在完成密码输入后再次在组件区域按下时是否重置组件状态。为true时，完成密码输入后再次在组件区域按下时会重置组件状态（即清除之前输入的密码）；为false时，不会重置组件状态。 初始值：true。 | value | - |

### public func circleRadius(value: Length): This

```cangjie
public func circleRadius(value: Length): This
```
功能： 设置宫格中圆点的半径。设置为0或负数时取初始值。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| Length | 是 | 宫格中圆点的半径。 初始值：6.vp。 取值范围：(0, sideLength/11]，设置小于等于0的值时按初始值处理，超过最大值按最大值处理。 | value | - |

### public func pathColor(color: Color): This

```cangjie
public func pathColor(color: Color): This
```
功能： 设置连线的颜色。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| Color | 是 | 连线的颜色。 初始值：0x33182431。 | color | - |

### public func pathStrokeWidth(value: Length): This

```cangjie
public func pathStrokeWidth(value: Length): This
```
功能： 设置连线的宽度。设置为0或负数时连线不显示。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| Length | 是 | 连线的宽度。 初始值：12.vp。 取值范围：[0, sideLength/3]，超过最大值按最大值处理。 | value | - |

### public func regularColor(color: Color): This

```cangjie
public func regularColor(color: Color): This
```
功能： 设置宫格圆点在“未选中”状态的填充颜色。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| Color | 是 | 宫格圆点在“未选中”状态的填充颜色。 初始值：0xff182431。 | color | - |

### public func selectedColor(color: Color): This

```cangjie
public func selectedColor(color: Color): This
```
功能： 设置宫格圆点在“选中“状态的填充颜色。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| Color | 是 | 宫格圆点在“选中”状态的填充颜色。 初始值：0xff182431。 | color | - |

### public func sideLength(value: Length): This

```cangjie
public func sideLength(value: Length): This
```
功能： 设置组件的宽度和高度（宽高相同）。设置为0或负数时组件不显示。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| Length | 是 | 组件的宽度和高度。 初始值：288.vp。 | value | - |

### public func onDotConnect(callback: (Int64) -> Unit): This

```cangjie
public func onDotConnect(callback: (Int64) -> Unit): This
```
功能： 密码输入选中宫格圆点时，触发该事件。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| (Int64)->Unit | 是 | 密码输入选中宫格圆点时触发该回调。 回调参数：选中宫格圆点顺序的数字，数字为选中宫格圆点的索引值（第一行圆点从左往右依次为0、1、2，第二行圆点依次为3、4、5，第三行圆点依次为6、7、8）。 | callback | - |

### public func onPatternComplete(callback: (Array<Int32>) -> Unit): This

```cangjie
public func onPatternComplete(callback: (Array<Int32>) -> Unit): This
```
功能： 密码输入结束时，触发该事件。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| (Array<Int32>)->Unit | 是 | 密码输入结束时触发该回调。回调参数：与选中宫格圆点顺序一致的数字数组，数字为选中宫格圆点的索引值（第一行圆点从左往右依次为0、1、2，第二行圆点依次为3、4、5，第三行圆点依次为6、7、8）。 | callback | - |


## Classes

### PatternLockController

class PatternLockController
```cangjie
public class PatternLockController { public init() }
```
功能： PatternLock组件的控制器，可以通过它进行组件状态重置。


### CircleStyleOptions

class CircleStyleOptions
```cangjie
public class CircleStyleOptions { public init( color: Color, radius: Length, enableWaveEffect: Bool ) }
```
功能： 表示宫格圆点的背景圆环样式。



## Enums

### PatternLockChallengeResult

enum PatternLockChallengeResult
```cangjie
public enum PatternLockChallengeResult { | CORRECT | WRONG }
```
功能： 图案密码状态。

#### CORRECT

```cangjie
CORRECT
```
功能： 图案密码正确。

#### WRONG

```cangjie
WRONG
```
功能： 图案密码错误。



## Examples

```cangjie
package ohos_app_cangjie_entry

import kit.UIKit.*
import ohos.state_macro_manage.*

@Entry
@Component
class EntryView {
 @State var passwords: ObservedArray<Int32> = ObservedArray<Int32>([])
 @State var message: String = 'please input password!'
 let patternLockController = PatternLockController()

 func build() {
 Column() {
 Text(this.message)
 .textAlign(TextAlign.Center)
 .margin(20)
 .fontSize(20)

 PatternLock(this.patternLockController)
 .sideLength(200.vp)
 .circleRadius(9.vp)
 .pathStrokeWidth(18.vp)
 .activeColor(Color(0xB0C4DE))
 .selectedColor(Color(0x228B22))
 .pathColor(Color(0x90EE90))
 .backgroundColor(Color(0xF5F5F5))
 .autoReset(true)
 .activateCircleStyle(CircleStyleOptions(Color(0x90EE90), (16.0).vp, true))
 .onDotConnect({index: Int64 => AppLog.info("onDotConnect index: " + index.toString());})
 .onPatternComplete(
 {
 input: Array<Int32> =>
 //输入的密码长度小于5时，提示重新输入
 if (input.size < 5) {
 this.message = 'The password length needs to be greater than 5, please enter again.'
 return
 }
 // 判断密码长度是否大于0
 if (this.passwords.size > 0) {
 // 判断两次输入的密码是否相同，相同则提示密码设置成功，否则提示重新输入
 if (this.passwords.get().toString() == input.toString()) {
 this.passwords = ObservedArray<Int32>(input)
 this.message = 'Set password successfully: ' + this.passwords.get().toString()
 this.patternLockController.setChallengeResult(PatternLockChallengeResult.CORRECT)
 } else {
 this.message = 'Inconsistent passwords, please enter again.'
 this.patternLockController.setChallengeResult(PatternLockChallengeResult.WRONG)
 }
 } else {
 // 提示第二次输入密码
 this.passwords = ObservedArray<Int32>(input)
 this.message = "Please enter again."
 }
 }
 )

 Button('Reset PatternLock')
 .margin(30)
 .onClick(
 {
 => // 重置密码锁
 this.patternLockController.reset()
 this.passwords = ObservedArray<Int32>([])
 this.message = 'Please input password'
 }
 )
 }.width(100.percent).height(100.percent)
 }
}
```

