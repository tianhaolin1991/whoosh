# ohos.bluetooth.access（蓝牙access模块）

access模块提供了打开和关闭蓝牙、获取蓝牙状态的方法。

```cangjie
import kit.ConnectivityKit.*
```
## Functions

### public func disableBluetooth(): Unit

```cangjie
public func disableBluetooth(): Unit
```
功能： 关闭蓝牙。

**Exceptions:**

- **BusinessException**: BusinessException：对应错误码的详细介绍请参见 通用错误码 和 蓝牙服务子系统错误码 。

| code | description |
| --- | --- |
| 201 | Permission denied. |
| 801 | Capability not supported. |
| 2900001 | Service stopped. |
| 2900099 | Operation failed. |


**Example:**

```cangjie
// index.cj

import ohos.base.*
import kit.ConnectivityKit.*
import ohos.hilog.Hilog

try {
 disableBluetooth()
} catch (e: BusinessException) {
 Hilog.info(0, "Bluetooth", "errCode: ${e.code}, errMessage: ${e.message}")
}
```

### public func enableBluetooth(): Unit

```cangjie
public func enableBluetooth(): Unit
```
功能： 开启蓝牙。

**Exceptions:**

- **BusinessException**: BusinessException：对应错误码的详细介绍请参见 通用错误码 和 蓝牙服务子系统错误码 。

| code | description |
| --- | --- |
| 201 | Permission denied. |
| 801 | Capability not supported. |
| 2900001 | Service stopped. |
| 2900099 | Operation failed. |


**Example:**

```cangjie
// index.cj

import ohos.base.*
import kit.ConnectivityKit.*
import ohos.hilog.Hilog

try {
 enableBluetooth()
} catch (e: BusinessException) {
 Hilog.info(0, "Bluetooth", "errCode: ${e.code}, errMessage: ${e.message}")
}
```

### public func getState(): BluetoothState

```cangjie
public func getState(): BluetoothState
```
功能： 获取蓝牙开关状态。

**Returns:**

| type | description |
| --- | --- |
| BluetoothState | 表示蓝牙开关状态。 |

**Exceptions:**

- **BusinessException**: BusinessException：对应错误码的详细介绍请参见 通用错误码 和 蓝牙服务子系统错误码 。

| code | description |
| --- | --- |
| 201 | Permission denied. |
| 801 | Capability not supported. |
| 2900001 | Service stopped. |
| 2900099 | Operation failed. |


**Example:**

```cangjie
// index.cj

import ohos.base.*
import kit.ConnectivityKit.*
import ohos.hilog.Hilog

try {
 let state = getState()
} catch (e: BusinessException) {
 Hilog.info(0, "Bluetooth", "errCode: ${e.code}, errMessage: ${e.message}")
}
```

### public func off(`type`: BluetoothAccessCallbackType, callback!: ?CallbackObject = None): Unit

```cangjie
public func off(`type`: BluetoothAccessCallbackType, callback!: ?CallbackObject = None): Unit
```
功能： 取消订阅蓝牙设备开关状态事件。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| BluetoothAccessCallbackType | 是 | 表示蓝牙状态改变事件。 | `type` | - |
| ? CallbackObject | 否 | 命名参数。 表示取消订阅蓝牙状态改变事件上报。缺省该参数则取消订阅该type对应的所有回调。 | callback | None |

**Exceptions:**

- **BusinessException**: BusinessException：对应错误码的详细介绍请参见 通用错误码 和 蓝牙服务子系统错误码 。

| code | description |
| --- | --- |
| 201 | Permission denied. |
| 401 | Invalid parameter. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3. Parameter verification failed. |
| 801 | Capability not supported. |
| 2900099 | Operation failed. |


**Example:**

```cangjie
// index.cj

import ohos.base.*
import kit.ConnectivityKit.*
import ohos.hilog.Hilog

// 此处定义所需要的依赖项等
class StateChangeback <: Callback1Argument<BluetoothState> {
 public func invoke(arg: BluetoothState): Unit {
 Hilog.info(0, "Bluetooth", "BluetoothState has change")
 }
}

let changeCallBack = StateChangeback()
try {
 on(STATE_CHANGE, changeCallBack)
 off(STATE_CHANGE, callback: changeCallBack)
} catch (e: BusinessException) {
 Hilog.info(0, "Bluetooth", "errCode: ${e.code}, errMessage: ${e.message}")
}
```

### public func on(`type`: BluetoothAccessCallbackType, callback: Callback1Argument<BluetoothState>): Unit

```cangjie
public func on(`type`: BluetoothAccessCallbackType, callback: Callback1Argument<BluetoothState>): Unit
```
功能： 订阅蓝牙设备开关状态事件。使用Callback异步回调。

**Parameters:**

| type | description | name | required |
| --- | --- | --- | --- |
| BluetoothAccessCallbackType | 表示蓝牙状态改变事件。 | `type` | 是 |
| Callback1Argument < BluetoothState > | 表示回调函数的入参，蓝牙状态。回调函数由用户创建通过该接口注册。 | callback | 是 |

**Exceptions:**

- **BusinessException**: BusinessException：对应错误码的详细介绍请参见 通用错误码 和 蓝牙服务子系统错误码 。

| code | description |
| --- | --- |
| 201 | Permission denied. |
| 401 | Invalid parameter. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3. Parameter verification failed. |
| 801 | Capability not supported. |
| 2900099 | Operation failed. |


**Example:**

```cangjie
// index.cj

import ohos.base.*
import kit.ConnectivityKit.*
import ohos.hilog.Hilog

// 此处定义所需要的依赖项等
class StateChangeback <: Callback1Argument<BluetoothState> {
 public func invoke(arg: BluetoothState): Unit {
 Hilog.info(0, "Bluetooth", "BluetoothState has change")
 AppLog.info("BluetoothState has change")
 }
}

let changeCallBack = StateChangeback()
try {
 on(STATE_CHANGE, changeCallBack)
} catch (e: BusinessException) {
 Hilog.info(0, "Bluetooth", "errCode: ${e.code}, errMessage: ${e.message}")
}
```


## Enums

### BluetoothAccessCallbackType

enum BluetoothAccessCallbackType
```cangjie
public enum BluetoothAccessCallbackType <: Equatable<BluetoothAccessCallbackType> & Hashable & ToString { | STATE_CHANGE | ... }
```
功能： on/off事件的类型。

#### STATE_CHANGE

```cangjie
STATE_CHANGE
```
功能： 表示蓝牙状态改变事件。


### BluetoothState

enum BluetoothState
```cangjie
public enum BluetoothState <: Equatable<BluetoothState> & ToString { | STATE_OFF | STATE_TURNING_ON | STATE_ON | STATE_TURNING_OFF | STATE_BLE_TURNING_ON | STATE_BLE_ON | STATE_BLE_TURNING_OFF | ... }
```
功能： 蓝牙开关状态。

#### STATE_BLE_ON

```cangjie
STATE_BLE_ON
```
功能： 表示蓝牙正处于LE-only模式。

#### STATE_BLE_TURNING_OFF

```cangjie
STATE_BLE_TURNING_OFF
```
功能： 表示蓝牙正在关闭LE-only模式。

#### STATE_BLE_TURNING_ON

```cangjie
STATE_BLE_TURNING_ON
```
功能： 表示蓝牙正在打开LE-only模式。

#### STATE_OFF

```cangjie
STATE_OFF
```
功能： 表示蓝牙已关闭。

#### STATE_ON

```cangjie
STATE_ON
```
功能： 表示蓝牙已打开。

#### STATE_TURNING_OFF

```cangjie
STATE_TURNING_OFF
```
功能： 表示蓝牙正在关闭。

#### STATE_TURNING_ON

```cangjie
STATE_TURNING_ON
```
功能： 表示蓝牙正在打开。



