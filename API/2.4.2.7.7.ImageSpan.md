# ImageSpan

作为 Text 组件的子组件，用于显示行内图片。

## Component Constructors

### public init(src: AppResource)

```cangjie
public init(src: AppResource)
```
功能： 创建ImageSpan组件。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| AppResource | 是 | 图片的数据源，支持本地图片和网络图片。 支持的图片格式包括png、jpg、bmp、svg、gif和heif。 | src | - |

### public init(src: PixelMap)

```cangjie
public init(src: PixelMap)
```
功能： 创建ImageSpan组件。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| PixelMap | 是 | 图片的数据源，支持本地图片和网络图片。 PixelMap格式为像素图，常用于图片编辑的场景。 支持Base64字符串。格式data:image[png|jpeg|bmp|webp|heif]；base64，[base64 data]，其中[base64 data]为Base64字符串数据。 | src | - |

### public init(src: String)

```cangjie
public init(src: String)
```
功能： 创建ImageSpan组件。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| String | 是 | 图片的数据源，支持本地图片和网络图片。 支持 file:///data/storage 路径前缀的字符串，用于读取本应用安装目录下files文件夹下的图片资源。需要保证目录包路径下的文件有可读权限。 | src | - |


## Functions

### public func alt(value: PixelMap): This

```cangjie
public func alt(value: PixelMap): This
```
功能： 设置图片加载时显示的占位图。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| PixelMap | 是 | 加载时显示的占位图，支持PixelMap类型。 | value | - |

### public func colorFilter(filter: ColorFilter): This

```cangjie
public func colorFilter(filter: ColorFilter): This
```
功能： 设置图像的颜色滤镜效果。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| ColorFilter | 是 | 颜色滤镜效果。 矩阵第一行表示R（红色）的向量值，第二行表示G（绿色）的向量值，第三行表示B（蓝色）的向量值，第四行表示A（透明度）的向量值，4行分别代表不同的RGBA的向量值。 当矩阵对角线值为1，其余值为0时，保持图片原有色彩。其中，svg类型的图源需具有stroke属性。 计算规则： 如果输入的滤镜矩阵为： 像素点为[R, G, B, A] 则过滤后的颜色为 [R’, G’, B’, A’] | filter | - |

### public func objectFit(value: ImageFit): This

```cangjie
public func objectFit(value: ImageFit): This
```
功能： 设置图片的缩放类型。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| ImageFit | 是 | 图片的缩放类型。 初始值：ImageFit.Cover。 | value | - |

### public func textBackgroundStyle(color!: ResourceColor = Color.TRANSPARENT, radius!: Length = 0.vp): This

```cangjie
public func textBackgroundStyle(color!: ResourceColor = Color.TRANSPARENT, radius!: Length = 0.vp): This
```
功能： 设置背景样式。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| ResourceColor | 否 | 命名参数。 指定颜色。 | color | Color.TRANSPARENT |
| Length | 否 | 命名参数。 图像背景边框半径。 设置该值为百分比时按默认值显示。 | radius | 0.vp |

### public func textBackgroundStyle(color!: ResourceColor = Color.TRANSPARENT, radius!: BorderRadiuses): This

```cangjie
public func textBackgroundStyle(color!: ResourceColor = Color.TRANSPARENT, radius!: BorderRadiuses): This
```
功能： 设置背景样式。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| ResourceColor | 否 | 命名参数。 背景颜色。 | color | Color.TRANSPARENT |
| BorderRadiuses | 是 | 命名参数。 图像背景边框半径。 | radius | - |

### public func verticalAlign(value: ImageSpanAlignment): This

```cangjie
public func verticalAlign(value: ImageSpanAlignment): This
```
功能： 设置图片基于行高的对齐方式。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| ImageSpanAlignment | 是 | 图片基于文本的对齐方式。 初始值：ImageSpanAlignment.BOTTOM。 | value | - |

### public func onComplete(callback: (ImageLoadResult) -> Unit): This

```cangjie
public func onComplete(callback: (ImageLoadResult) -> Unit): This
```
功能： 图片数据加载成功和解码成功时均触发该事件。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| ( ImageLoadResult )->Unit | 是 | 回调函数，图片数据加载成功和解码成功时触发。参数：成功加载的图片尺寸。 | callback | - |

### public func onError(callback: (CJImageError) -> Unit): This

```cangjie
public func onError(callback: (CJImageError) -> Unit): This
```
功能： 图片加载异常时触发该事件。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| ( CJImageError )->Unit | 是 | 回调函数，图片加载出现异常时触发。参数：图片加载异常信息。 | callback | - |


## Classes

### ColorFilter

class ColorFilter
```cangjie
public class ColorFilter { public init(array: Array<Float32>) }
```
功能： 表示4*5矩阵颜色过滤器。


### ImageLoadResult

class ImageLoadResult
```cangjie
public class ImageLoadResult { public ImageLoadResult( public var width: Float64, public var height: Float64, public var componentWidth: Float64, public var componentHeight: Float64, public var loadingStatus: Int64, public var contentWidth: Float64, public var contentHeight: Float64, public var contentOffsetX: Float64, public var contentOffsetY: Float64 ) }
```
功能： 图片加载成功类型。

#### var componentHeight

```cangjie
public var componentHeight: Float64
```
功能： 表示组件的高。
Type: Float64; Readable: true; Writable: true

#### var componentWidth

```cangjie
public var componentWidth: Float64
```
功能： 表示组件的宽。
Type: Float64; Readable: true; Writable: true

#### var contentHeight

```cangjie
public var contentHeight: Float64
```
功能： 表示图片实际绘制的高度。仅在loadingStatus返回1时有效。
Type: Float64; Readable: true; Writable: true

#### var contentOffsetX

```cangjie
public var contentOffsetX: Float64
```
功能： 表示实际绘制内容相对于组件自身的x轴偏移。仅在loadingStatus返回1时有效。
Type: Float64; Readable: true; Writable: true

#### var contentOffsetY

```cangjie
public var contentOffsetY: Float64
```
功能： 表示实际绘制内容相对于组件自身的y轴偏移。仅在loadingStatus返回1时有效。
Type: Float64; Readable: true; Writable: true

#### var contentWidth

```cangjie
public var contentWidth: Float64
```
功能： 表示图片实际绘制的宽度。仅在loadingStatus返回1时有效。
Type: Float64; Readable: true; Writable: true

#### var height

```cangjie
public var height: Float64
```
功能： 表示图片的高。
Type: Float64; Readable: true; Writable: true

#### var loadingStatus

```cangjie
public var loadingStatus: Int64
```
功能： 表示图片加载成功的状态值。
Type: Int64; Readable: true; Writable: true

#### var width

```cangjie
public var width: Float64
```
功能： 表示图片的宽。
Type: Float64; Readable: true; Writable: true


### CJImageError

class CJImageError
```cangjie
public class CJImageError { public var componentWidth: Float64 = 0.0 public var componentHeight: Float64 = 0.0 public var message: String = "" public init( componentWidth: Float64, componentHeight: Float64 ) public init( componentWidth: Float64, componentHeight: Float64, message: String ) public init() }
```
功能： 图片加载失败类型。

#### var componentWidth

```cangjie
public var componentWidth: Float64 = 0.0
```
功能： 表示组件的宽度。
Type: Float64; Readable: true; Writable: true

#### var componentHeight

```cangjie
public var componentHeight: Float64 = 0.0
```
功能： 表示组件的高度。
Type: Float64; Readable: true; Writable: true

#### var message

```cangjie
public var message: String = ""
```
功能： 表示报错信息。
Type: String; Readable: true; Writable: true



## Examples

```cangjie
package ohos_app_cangjie_entry

import kit.UIKit.*
import ohos.state_macro_manage.*
import kit.LocalizationKit.*

@Entry
@Component
class EntryView {
 func build() {
 Column {
 Flex(FlexParams(direction: FlexDirection.Column, alignItems: ItemAlign.Center, justifyContent: FlexAlign.Center)) {
 Text() {
 //以设定大小和排布方式加载图片资源
 ImageSpan(@r(app.media.startIcon))
 .width(150.px)
 .height(250.px)
 .objectFit(ImageFit.Contain)
 .verticalAlign(ImageSpanAlignment.CENTER)
 //对图片进行文本修饰
 Span("This is the Span and ImageSpan component")
 .decoration(decorationType: TextDecorationType.LineThrough, color: Color.RED).fontSize(25)
 ImageSpan(@r(app.media.startIcon))
 .width(150.px)
 .height(50.px)
 .objectFit(ImageFit.Contain)
 .verticalAlign(ImageSpanAlignment.TOP)
 Span("I am Underline-span2")
 .decoration(decorationType: TextDecorationType.LineThrough, color: Color.RED).fontSize(25)
 ImageSpan(@r(app.media.startIcon))
 .width(150.px)
 .height(250.px)
 .objectFit(ImageFit.Fill)
 .verticalAlign(ImageSpanAlignment.BASELINE)
 Span("I am Underline-span3")
 .decoration(decorationType: TextDecorationType.LineThrough, color: Color.RED).fontSize(25)
 ImageSpan(@r(app.media.startIcon))
 .width(150.px)
 .height(50.px)
 .objectFit(ImageFit.Auto)
 .verticalAlign(ImageSpanAlignment.BOTTOM)
 Span("I am Underline-span4")
 .decoration(decorationType: TextDecorationType.LineThrough, color: Color.RED).fontSize(25)
 }.textAlign(TextAlign.Center)
 }
 }
 .height(720)
 .width(360)
 .padding(left:0, right: 0, top: 0)
 }
}
```
```cangjie
package ohos_app_cangjie_entry

import kit.UIKit.*
import ohos.state_macro_manage.*
import kit.LocalizationKit.*

@Entry
@Component
class EntryView {
 func build() {
 Column() {
 Text() {
 ImageSpan(@r(app.media.startIcon))//建议使用自定义的本地图片
 .width(200.vp)
 .height(200.vp)
 //设置图片中间与行中间对齐。
 .verticalAlign(ImageSpanAlignment.CENTER)
 //设置图片背景颜色和图片背景圆角大小。
 .textBackgroundStyle(color: Color.RED, radius: BorderRadiuses(topLeft: 0.vp, topRight: 12.vp, bottomLeft: 24.vp, bottomRight: 48.vp))
 }
 }.width(100.percent).alignItems(HorizontalAlign.Center).justifyContent(FlexAlign.Center)
 }
}
```

