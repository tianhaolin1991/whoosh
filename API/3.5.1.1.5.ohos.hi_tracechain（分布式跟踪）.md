# ohos.hi_tracechain（分布式跟踪）

本模块提供了端侧业务流程调用链跟踪的打点能力，包括业务流程跟踪的启动、结束、信息埋点等能力。

```cangjie
import kit.PerformanceAnalysisKit.*
```
## Classes

### HiTraceChain

class HiTraceChain
```cangjie
public class HiTraceChain {}
```
功能： 该类提供了端侧业务流程调用链跟踪的打点能力。


### HiTraceId

class HiTraceId
```cangjie
public class HiTraceId { public var chainId: UInt64 public var spanId: UInt64 public var parentSpanId: UInt64 public var flags: Int32 public init(chainId: UInt64, spanId: UInt64, parentSpanId: UInt64, flags: Int32) }
```
功能： 此接口为 HiTraceId 对象接口。

#### var chainId

```cangjie
public var chainId: UInt64
```
功能： 跟踪链标识。
Type: UInt64; Readable: true; Writable: true

#### var flags

```cangjie
public var flags: Int32
```
功能： 跟踪标志组合。
Type: Int32; Readable: true; Writable: true

#### var parentSpanId

```cangjie
public var parentSpanId: UInt64
```
功能： 父分支标识。
Type: UInt64; Readable: true; Writable: true

#### var spanId

```cangjie
public var spanId: UInt64
```
功能： 分支标识。
Type: UInt64; Readable: true; Writable: true



## Enums

### HiTraceCommunicationMode

enum HiTraceCommunicationMode
```cangjie
public enum HiTraceCommunicationMode { | DEFAULT | THREAD | PROCESS | DEVICE | ... }
```
功能： 跟踪通信类型枚举。

#### DEFAULT

```cangjie
DEFAULT
```
功能： 缺省通信类型。

#### DEVICE

```cangjie
DEVICE
```
功能： 设备间通信类型。

#### PROCESS

```cangjie
PROCESS
```
功能： 进程间通信类型。

#### THREAD

```cangjie
THREAD
```
功能： 线程间通信类型。

#### prop value

```cangjie
public prop value: UInt64
```
功能： 获取枚举值的值。


### HiTraceFlag

enum HiTraceFlag
```cangjie
public enum HiTraceFlag { | DEFAULT | INCLUDE_ASYNC | DONOT_CREATE_SPAN | TP_INFO | NO_BE_INFO | DISABLE_LOG | FAILURE_TRIGGER | D2D_TP_INFO | ... }
```
功能： 跟踪标志组合类型枚举。

#### D2D_TP_INFO

```cangjie
D2D_TP_INFO
```
功能： 设备间埋点标志。TP_INFO的一个子集，设置该标志，只进行设备间的调用埋点。

#### DEFAULT

```cangjie
DEFAULT
```
功能： 缺省标志。

#### DISABLE_LOG

```cangjie
DISABLE_LOG
```
功能： 日志关联标志。设置该标志，指示隐藏日志中的跟踪信息。

#### DONOT_CREATE_SPAN

```cangjie
DONOT_CREATE_SPAN
```
功能： 无分支标志。启动跟踪时，在同步、异步调用时缺省自动创建分支信息。设置该标志，指示不创建分支。

#### FAILURE_TRIGGER

```cangjie
FAILURE_TRIGGER
```
功能： 故障触发标志。预置标志，暂时没有作用。

#### INCLUDE_ASYNC

```cangjie
INCLUDE_ASYNC
```
功能： 异步调用标志。启动跟踪时，缺省只跟踪同步调用。设置该标志，同时跟踪同步、异步调用。

#### NO_BE_INFO

```cangjie
NO_BE_INFO
```
功能： 无起始结束标志。启动跟踪时，缺省打印启动及结束跟踪信息。设置该标志，指示不打印启动及结束跟踪信息。

#### TP_INFO

```cangjie
TP_INFO
```
功能： 埋点标志。启动跟踪式时，缺省不进行埋点。调试场景下设置该标志，在同步、异步调用的收发侧自动埋点，输出埋点信息和时间戳。收发埋点按照client、server分为 client send（CS）、server receive（SR）、server send（SS）、client receive（CR） 四类信息。一次同步调用输出CS/SR/SS/CR，一次异步调用输出CS/SR/SS三个埋点信息。

#### prop value

```cangjie
public prop value: Int32
```
功能： 获取枚举值的值。


### HiTraceTracepointType

enum HiTraceTracepointType
```cangjie
public enum HiTraceTracepointType { | CS | CR | SS | SR | GENERAL | ... }
```
功能： 跟踪埋点类型枚举。

#### CR

```cangjie
CR
```
功能： 客户端接收类型，标识client侧的接收埋点。

#### CS

```cangjie
CS
```
功能： 客户端发送类型，标识client侧的发送埋点。

#### GENERAL

```cangjie
GENERAL
```
功能： 一般类型，标识CS、CR、SS、SR四种场景之外的埋点。

#### SR

```cangjie
SR
```
功能： 服务端接收类型，标识server侧的接收埋点。

#### SS

```cangjie
SS
```
功能： 服务端发送类型，标识server侧的发送埋点。

#### prop value

```cangjie
public prop value: UInt64
```
功能： 获取枚举值的值。



