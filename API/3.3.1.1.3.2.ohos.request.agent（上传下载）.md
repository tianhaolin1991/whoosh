# ohos.request.agent（上传下载）

request部件主要给应用提供上传下载文件、后台传输代理的基础能力。

```cangjie
import kit.BasicServicesKit.*
```
## Functions

### public func create(context: StageContext, config: Config): Task

```cangjie
public func create(context: StageContext, config: Config): Task
```
功能： 创建要上传或下载的任务，并将其排入队列。每个应用最多支持创建10个未完成的任务。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| StageContext | 是 | 基于应用程序的上下文。 | context | - |
| Config | 是 | 上传/下载任务的配置信息。 | config | - |

**Returns:**

| type | description |
| --- | --- |
| Task | 返回一个Task对象，里面包括任务id和任务的配置信息。 |

**Exceptions:**

- **BusinessException**: BusinessException：对应错误码的详细介绍请参见 上传下载错误码 与 通用错误码说明文档 。

| code | description |
| --- | --- |
| 201 | The permissions check fails. |
| 401 | The parameters check fails.Possible causes: 1. Missing mandatory parameters 2. Incorrect parameter type 3. Parameter verification failed. |
| 13400001 | Invalid file or file system error. |
| 13400003 | Task service ability error. |
| 21900004 | The application task queue is full. |
| 21900005 | Operation with wrong task mode. |


**Example:**

```cangjie
// index.cj

import kit.BasicServicesKit.*
import kit.PerformanceAnalysisKit.*
import kit.BasicServicesKit.Action as RAction
import ohos.base.*

let fileSpec = FileSpec(
 path: "./createTest.avi",
 filename: "createTest.avi",
 mimeType: "application/octet-stream"
)
let attachments = ConfigDataTypeFORMITEMS(
 [
 FormItem(
 name: "createTest",
 value: FormItemValueType.FILE(fileSpec)
 )
 ]
)
let config = Config(
 action: RAction.UPLOAD,
 url: "http://127.0.0.1",
 title: "createTest",
 mode: Mode.FOREGROUND,
 description: "Sample code for creating task",
 overwrite: false,
 method: "PUT",
 data: attachments,
 saveas: "./",
 network: Network.CELLULAR,
 metered: false,
 roaming: true,
 retry: true,
 redirect: true,
 index: 0,
 begins: 0,
 ends: -1,
 gauge: false,
 precise: false,
 token: "it is a secret"
)
try {
 let task = create(Global.getStageContext(), config) // 需获取Context应用上下文，详见本文使用说明
} catch (e: BusinessException) {
 Hilog.error(0, "TaskCreate", e.toString())
}
```

### public func getTask(context: StageContext, id: String, token!: ?String = None): Task

```cangjie
public func getTask(context: StageContext, id: String, token!: ?String = None): Task
```
功能： 根据任务id查询任务。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| StageContext | 是 | 基于应用程序的上下文。 | context | - |
| String | 是 | 任务id。 | id | - |
| ?String | 否 | 命名参数。 任务查询token。 | token | None |

**Returns:**

| type | description |
| --- | --- |
| Task | 返回一个Task对象，里面包括任务id和任务的配置信息。 |

**Exceptions:**

- **BusinessException**: BusinessException：对应错误码的详细介绍请参见 上传下载错误码 与 通用错误码说明文档 。

| code | description |
| --- | --- |
| 401 | parameter error. Possible causes: 1. Missing mandatory parameters 2. Incorrect parameter type 3. Parameter verification failed. |
| 13400003 | Task service ability error. |
| 21900006 | Task removed or not found. |


**Example:**

```cangjie
// index.cj

import kit.BasicServicesKit.*
import kit.PerformanceAnalysisKit.*
import ohos.base.*

try {
 let task = getTask(Global.getStageContext(), "123456") // 需获取Context应用上下文，详见本文使用说明
} catch (e: BusinessException) {
 Hilog.error(0, "GetTask", "Failed to get task, ${e}")
}
```

### public func remove(id: String): Unit

```cangjie
public func remove(id: String): Unit
```
功能： 移除属于调用方的指定任务。如果正在处理中，该任务将被迫停止。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| String | 是 | 任务id。 | id | - |

**Exceptions:**

- **BusinessException**: BusinessException：对应错误码的详细介绍请参见 上传下载错误码 。

| code | description |
| --- | --- |
| 13400003 | Task service ability error. |
| 21900006 | Task removed or not found. |


**Example:**

```cangjie
// index.cj

import kit.BasicServicesKit.*
import kit.PerformanceAnalysisKit.*
import ohos.base.BusinessException

try {
 remove("12345")
} catch (e: BusinessException) {
 Hilog.error(0, "TaskRemove", "${e}")
}
```

### public func search(): Array<String>

```cangjie
public func search(): Array<String>
```
功能： 根据默认 Filter 过滤条件查找任务id。

**Returns:**

| type | description |
| --- | --- |
| Array<String> | 返回满足条件任务id。 |

**Exceptions:**

- **BusinessException**: BusinessException：对应错误码的详细介绍请参见 上传下载错误码 与 通用错误码说明文档 。

| code | description |
| --- | --- |
| 401 | parameter error. Possible causes: 1. Incorrect parameter type 2. Parameter verification failed. |
| 13400003 | Task service ability error. |


**Example:**

```cangjie
// index.cj

import kit.BasicServicesKit.*
import kit.PerformanceAnalysisKit.*
import ohos.base.BusinessException

try {
 let tids = search()
} catch (e: BusinessException) {
 Hilog.error(0, "TaskRemove", "${e}")
}
```

### public func search(filter: Filter): Array<String>

```cangjie
public func search(filter: Filter): Array<String>
```
功能： 根据 Filter 过滤条件查找任务id。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| Filter | 是 | 过滤条件。 | filter | - |

**Returns:**

| type | description |
| --- | --- |
| Array<String> | 返回满足条件任务id。 |

**Exceptions:**

- **BusinessException**: BusinessException：对应错误码的详细介绍请参见 上传下载错误码 与 通用错误码说明文档

| code | description |
| --- | --- |
| 401 | parameter error. Possible causes: 1. Incorrect parameter type 2. Parameter verification failed. |
| 13400003 | Task service ability error. |


**Example:**

```cangjie
// index.cj

import kit.BasicServicesKit.*
import kit.PerformanceAnalysisKit.*
import ohos.base.*

try {
 let tids: Array<String> = search(Filter(state: State.INITIALIZED))
} catch (e: BusinessException) {
 Hilog.error(0, "SearchTask", "Failed to search task, ${e}")
}
```

### public func show(id: String): TaskInfo

```cangjie
public func show(id: String): TaskInfo
```
功能： 根据任务id查询任务的详细信息。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| String | 是 | 任务id。 | id | - |

**Returns:**

| type | description |
| --- | --- |
| TaskInfo | 返回任务详细信息的TaskInfo对象。 |

**Exceptions:**

- **BusinessException**: BusinessException：对应错误码的详细介绍请参见 上传下载错误码 与 通用错误码说明文档 。

| code | description |
| --- | --- |
| 401 | parameter error. Possible causes: 1. Missing mandatory parameters 2. Incorrect parameter type. |
| 13400003 | Task service ability error. |
| 21900006 | Task removed or not found. |


**Example:**

```cangjie
// index.cj

import kit.BasicServicesKit.*
import kit.PerformanceAnalysisKit.*
import ohos.base.*

try {
 let taskInfo = show("123456")
} catch (e: BusinessException) {
 Hilog.error(0, "ShowTask", "Failed to show task, ${e}")
}
```

### public func touch(id: String, token: String): TaskInfo

```cangjie
public func touch(id: String, token: String): TaskInfo
```
功能： 根据任务id和token查询任务的详细信息。

**Parameters:**

| type | required | description | name | default |
| --- | --- | --- | --- | --- |
| String | 是 | 任务id。 | id | - |
| String | 是 | 任务查询token。 | token | - |

**Returns:**

| type | description |
| --- | --- |
| TaskInfo | 返回任务详细信息的TaskInfo对象。 |

**Exceptions:**

- **BusinessException**: BusinessException：对应错误码的详细介绍请参见 上传下载错误码 与 通用错误码说明文档

| code | description |
| --- | --- |
| 401 | parameter error. Possible causes: 1. Missing mandatory parameters 2. Incorrect parameter type 3. Parameter verification failed. |
| 13400003 | Task service ability error. |
| 21900006 | Task removed or not found. |


**Example:**

```cangjie
// index.cj

import kit.BasicServicesKit.*
import kit.PerformanceAnalysisKit.*
import ohos.base.*

try {
 let taskInfo = touch("123456", "token123456")
} catch (e: BusinessException) {
 Hilog.error(0, "TouchTask", "Failed to touch task, ${e}")
}
```


## Classes

### Config

class Config
```cangjie
public class Config { public Config( public var action!: Action, public var url!: String, public var title!: ?String = None, public var description!: ?String = None, public var mode!: ?Mode = None, public var overwrite!: Bool = false, public var method!: ?String= None, public var headers!: ?HashMap<String, String> = None, public var data!: ?ConfigDataType = None, public var saveas!: ?String = None, public var network!: Network = Network.ANY, public var metered!: Bool = false, public var roaming!: Bool = true, public var retry!: Bool = true, public var redirect!: Bool = true, public var index!: UInt32 = 0, public var begins!: Int64 = 0, public var ends!: Int64 = -1, public var gauge!: Bool = false, public var precise!: Bool = false, public var token!: ?String = None, public var priority!: UInt32 = 0, public var extras!: ?HashMap<String, String> = None ) }
```
功能： 上传/下载任务的配置信息。

#### var action

```cangjie
public var action: Action
```
功能： 任务操作选项，UPLOAD表示上传任务，DOWNLOAD表示下载任务。
Type: Action; Readable: true; Writable: true

#### var begins

```cangjie
public var begins: Int64 = 0
```
功能： 文件起点，通常用于断点续传。默认值为0，取值为闭区间。下载时，请求读取服务器开始下载文件时的起点位置（http协议中设置"Range"选项）。上传时，在上传开始时读取。
Type: Int64; Readable: true; Writable: true

#### var data

```cangjie
public var data: ?ConfigDataType = None
```
功能： 下载时，data为字符串类型，通常使用json(object将被转换为json文本)，默认为空。上传时，data是表单项数组Array<FormItem>，默认为空。
Type: ? ConfigDataType; Readable: true; Writable: true

#### var description

```cangjie
public var description: ?String = None
```
功能： 任务的详细信息，其最大长度为1024个字符，默认值为空字符串。
Type: ?String; Readable: true; Writable: true

#### var ends

```cangjie
public var ends: Int64 = - 1
```
功能： 文件终点，通常用于断点续传。默认值为-1，取值为闭区间。下载时，请求读取服务器开始下载文件时的结束位置（http协议中设置"Range"选项）。上传时，在上传时结束读取。
Type: Int64; Readable: true; Writable: true

#### var extras

```cangjie
public var extras: ?HashMap<String, String>= None
```
功能： 配置的附加功能，默认为空。
Type: ?HashMap<String, String>; Readable: true; Writable: true

#### var gauge

```cangjie
public var gauge: Bool = false
```
功能： 后台任务的过程进度通知策略，仅应用于后台任务，默认值为false。false：代表仅完成或失败的通知。true：发出每个进度已完成或失败的通知。
Type: Bool; Readable: true; Writable: true

#### var headers

```cangjie
public var headers: ?HashMap<String, String>= None
```
功能： 添加要包含在任务中的HTTP协议标志头。对于上传请求，默认的Content-Type为"multipart/form-data"。对于下载请求，默认的Content-Type为"application/json"。
Type: ?HashMap<String, String>; Readable: true; Writable: true

#### var index

```cangjie
public var index: UInt32 = 0
```
功能： 任务的路径索引，通常用于任务断点续传，默认为0。
Type: UInt32; Readable: true; Writable: true

#### var metered

```cangjie
public var metered: Bool = false
```
功能： 是否允许在按流量计费的网络中工作，默认为false。true：是。false：否。
Type: Bool; Readable: true; Writable: true

#### var method

```cangjie
public var method: ?String = None
```
功能： 上传或下载的HTTP标准方法，包括GET、POST和PUT，不区分大小写。上传时，使用PUT或POST，默认值为PUT。下载时，使用GET或POST，默认值为GET。
Type: ?String; Readable: true; Writable: true

#### var mode

```cangjie
public var mode: ?Mode = None
```
功能： 任务模式, 默认为后台任务。
Type: ? Mode; Readable: true; Writable: true

#### var network

```cangjie
public var network: Network = Network.ANY
```
功能： 网络选项，当前支持无线网络WIFI和蜂窝数据网络CELLULAR，默认为ANY（WIFI或CELLULAR）。
Type: Network; Readable: true; Writable: true

#### var overwrite

```cangjie
public var overwrite: Bool = false
```
功能： 下载过程中路径已存在时的解决方案选择，默认为false。true：覆盖已存在的文件。false：下载失败。
Type: Bool; Readable: true; Writable: true

#### var precise

```cangjie
public var precise: Bool = false
```
功能： 如果设置为true，在上传/下载无法获取文件大小时任务失败。如果设置为false，将文件大小设置为-1时任务继续。默认值为false。
Type: Bool; Readable: true; Writable: true

#### var priority

```cangjie
public var priority: UInt32 = 0
```
功能： 任务的优先级。任务模式相同的情况下，该配置项的数字越小优先级越高，默认值为0。
Type: UInt32; Readable: true; Writable: true

#### var redirect

```cangjie
public var redirect: Bool = true
```
功能： 是否允许重定向，默认为true。true：是。false：否。
Type: Bool; Readable: true; Writable: true

#### var retry

```cangjie
public var retry: Bool = true
```
功能： 是否为后台任务启用自动重试，仅应用于后台任务，默认为true。true：是。false：否。
Type: Bool; Readable: true; Writable: true

#### var roaming

```cangjie
public var roaming: Bool = true
```
功能： 是否允许在漫游网络中工作，默认为true。true：是。false：否。
Type: Bool; Readable: true; Writable: true

#### var saveas

```cangjie
public var saveas: ?String = None
```
功能： 保存下载文件的路径，包括如下几种： -相对路径，位于调用方的缓存路径下，如"./xxx/yyy/zzz.html"、"xxx/yyy/zzz.html"。 -internal协议路径，仅支持"internal://cache/"及其子路径，如"internal://cache/path/to/file.txt"。-应用沙箱目录，只支持到base及其子目录下，如"/data/storage/el1/base/path/to/file.txt"。 -file协议路径，必须匹配应用包名，只支持到base及其子目录下，如"file://com.example.test/data/storage/el2/base/file.txt"。 默认为相对路径，即下载至调用方当前缓存路径下。
Type: ?String; Readable: true; Writable: true

#### var title

```cangjie
public var title: ?String = None
```
功能： 任务标题，其最大长度为256个字符，默认值为小写的upload或download，与上面的action保持一致。
Type: ?String; Readable: true; Writable: true

#### var token

```cangjie
public var token: ?String = None
```
功能： 当创建了一个带有token的任务后，token则为正常查询期间必须提供的，否则将无法通过查询进行检索。其最小长度为8个字节，最大长度为2048个字节。默认为空。
Type: ?String; Readable: true; Writable: true

#### var url

```cangjie
public var url: String
```
功能： 资源地址，其最大长度为2048个字符。
Type: String; Readable: true; Writable: true


### FileSpec

class FileSpec
```cangjie
public class FileSpec { public FileSpec( public var path!: String, public var mimeType!: ?String = None, public var filename!: ?String = None, public var extras!: ?HashMap<String, String> = None ) }
```
功能： 表单项的文件信息。

#### var extras

```cangjie
public var extras: ?HashMap<String, String>= None
```
功能： 文件信息的附加内容。
Type: ?HashMap<String, String>; Readable: true; Writable: true

#### var filename

```cangjie
public var filename: ?String = None
```
功能： 文件名，默认值通过路径获取。
Type: ?String; Readable: true; Writable: true

#### var mimeType

```cangjie
public var mimeType: ?String = None
```
功能： 文件的mimetype通过文件名获取。
Type: ?String; Readable: true; Writable: true

#### var path

```cangjie
public var path: String
```
功能： 文件路径：位于调用方的缓存文件夹下的相对路径或用户公共文件，如"file://media/Photo/path/to/file.img"。 仅支持前端任务。
Type: String; Readable: true; Writable: true


### Filter

class Filter
```cangjie
public class Filter { public Filter ( var bundle!: ?String = None, public var before!: ?Int64 = None, public var after!: ?Int64 = None, public var state!: ?State = None, public var action!: ?Action = None, public var mode!: ?Mode = None ) }
```
功能： 过滤条件。

#### var action

```cangjie
public var action: ?Action = None
```
功能： 任务操作选项。UPLOAD表示上传任务。DOWNLOAD表示下载任务。
Type: ? Action; Readable: true; Writable: true

#### var after

```cangjie
public var after: ?Int64 = None
```
功能： 开始的Unix时间戳（毫秒），默认值为调用时刻减24小时。
Type: ?Int64; Readable: true; Writable: true

#### var before

```cangjie
public var before: ?Int64 = None
```
功能： 结束的Unix时间戳（毫秒），默认为调用时刻。
Type: ?Int64; Readable: true; Writable: true

#### var mode

```cangjie
public var mode: ?Mode = None
```
功能： 任务模式。FOREGROUND表示前端任务。BACKGROUND表示后台任务。如果未填写，则查询所有任务。
Type: ? Mode; Readable: true; Writable: true

#### var state

```cangjie
public var state: ?State = None
```
功能： 指定任务的状态。
Type: ? State; Readable: true; Writable: true


### FormItem

class FormItem
```cangjie
public class FormItem { public FormItem( public var name!: String, public var value!: FormItemValueType ) }
```
功能： 上传/下载任务的配置信息。

#### var name

```cangjie
public var name: String
```
功能： 表单参数名。
Type: String; Readable: true; Writable: true

#### var value

```cangjie
public var value: FormItemValueType
```
功能： 表单参数值。
Type: FormItemValueType; Readable: true; Writable: true


### HttpResponseMessage

class HttpResponseMessage
```cangjie
public class HttpResponseMessage { public let version: String, public let statusCode: Int32, public let reason: String, public let headers: HashMap<String, Array<String>> }
```
功能： 任务响应头的数据结构。

#### let headers

```cangjie
public let headers: HashMap<String, Array<String>>
```
功能： Http响应头部。
Type: HashMap<String, Array<String>>; Readable: true; Writable: false

#### let reason

```cangjie
public let reason: String
```
功能： Http响应原因。
Type: String; Readable: true; Writable: false

#### let statusCode

```cangjie
public let statusCode: Int32
```
功能： Http响应状态码。
Type: Int32; Readable: true; Writable: false

#### let version

```cangjie
public let version: String
```
功能： Http版本。
Type: String; Readable: true; Writable: false


### Progress

class Progress
```cangjie
public class Progress { public Progress( public let state!: State, public let index!: UInt32, public let processed!: Int64, public let sizes!: Array<Int64>, public let extras!: HashMap<String, String> ) }
```
功能： 任务进度的数据结构。

#### let extras

```cangjie
public let extras: HashMap<String, String>
```
功能： 交互的额外内容，例如来自服务器的响应的header和body。
Type: ?HashMap<String, String>; Readable: true; Writable: false

#### let index

```cangjie
public let index: UInt32
```
功能： 任务中当前正在处理的文件索引。
Type: UInt32; Readable: true; Writable: false

#### let processed

```cangjie
public let processed: Int64
```
功能： 任务中当前文件的已处理数据大小，单位为B。
Type: Int64; Readable: true; Writable: false

#### let sizes

```cangjie
public let sizes: Array<Int64>
```
功能： 任务中文件的大小，单位为B。
Type: Array<Int64>; Readable: true; Writable: false

#### let state

```cangjie
public let state: State
```
功能： 任务当前的状态。
Type: State; Readable: true; Writable: false


### Task

class Task
```cangjie
public class Task { public Task( public let tid: String, public let config: Config ) }
```
功能： 上传或下载任务。使用该方法前需要先获取Task对象，通过create获取。

#### let config

```cangjie
public let config: Config
```
功能： 任务的配置信息。
Type: Config; Readable: true; Writable: false

#### let tid

```cangjie
public let tid: String
```
功能： 任务id，在系统上是唯一的，由系统自动生成。
Type: String; Readable: true; Writable: false


### TaskInfo

class TaskInfo
```cangjie
public class TaskInfo { public let uid: ?String public let bundle: ?String public let saveas: ?String public let url: ?String public let data: ?ConfigDataType public let tid: String public let title: String public let description: String public let action: Action public let mode: Mode public let priority: UInt32 public let mimeType: String public let progress: Progress public let gauge: Bool public let ctime: UInt64 public let mtime: UInt64 public let retry: Bool public let tries: UInt32 public let faults: ?Faults public let reason: String public let extras: ?HashMap<String, String> public init( uid!: ?String = None, bundle!: ?String = None, saveas!: ?String = None, url!: ?String = None, data!: ?ConfigDataType = None, tid!: String, title!: String, description!: String, action!: Action, mode!: Mode, priority!: UInt32, mimeType!: String, progress!: Progress, gauge!: Bool, ctime!: UInt64, mtime!: UInt64, retry!: Bool, tries!: UInt32, reason!: String, faults!: ?Faults, extras!: ?HashMap<String, String> ) }
```
功能： 查询结果的任务信息数据结构，提供普通查询和系统查询，两种字段的可见范围不同。

#### let action

```cangjie
public let action: Action
```
功能： 任务操作选项。UPLOAD表示上传任务。DOWNLOAD表示下载任务。
Type: Action; Readable: true; Writable: false

#### let ctime

```cangjie
public let ctime: UInt64
```
功能： 创建任务的Unix时间戳（毫秒），由当前设备的系统生成。
Type: UInt64; Readable: true; Writable: false

#### let data

```cangjie
public let data: ?ConfigDataType = None
```
功能： 任务值。
Type: ? ConfigDataType; Readable: true; Writable: false

#### let description

```cangjie
public let description: String
```
功能： 任务描述。
Type: String; Readable: true; Writable: false

#### let extras

```cangjie
public let extras: ?HashMap<String, String>
```
功能： 任务的额外部分。
Type: ?HashMap<String, String>; Readable: true; Writable: false

#### let faults

```cangjie
public let faults: ?Faults
```
功能： 任务的失败原因。OTHERS表示其他故障。DISCONNECT表示网络断开连接。TIMEOUT表示任务超时。PROTOCOL表示协议错误。FSIO表示文件系统io错误。
Type: ? Faults; Readable: true; Writable: false

#### let gauge

```cangjie
public let gauge: Bool
```
功能： 后台任务的进度通知策略。
Type: Bool; Readable: true; Writable: false

#### let mimeType

```cangjie
public let mimeType: String
```
功能： 任务配置中的mimetype。
Type: String; Readable: true; Writable: false

#### let mode

```cangjie
public let mode: Mode
```
功能： 指定任务模式。FOREGROUND表示前端任务。BACKGROUND表示后台任务。
Type: Mode; Readable: true; Writable: false

#### let mtime

```cangjie
public let mtime: UInt64
```
功能： 任务状态改变时的Unix时间戳（毫秒），由当前设备的系统生成。
Type: UInt64; Readable: true; Writable: false

#### let priority

```cangjie
public let priority: UInt32
```
功能： 任务配置中的优先级。前端任务的优先级比后台任务高。相同模式的任务，数字越小优先级越高。
Type: UInt32; Readable: true; Writable: false

#### let progress

```cangjie
public let progress: Progress
```
功能： 任务的过程进度。
Type: Progress; Readable: true; Writable: false

#### let reason

```cangjie
public let reason: String
```
功能： 等待/失败/停止/暂停任务的原因。
Type: String; Readable: true; Writable: false

#### let retry

```cangjie
public let retry: Bool
```
功能： 任务的重试开关，仅应用于后台任务。
Type: Bool; Readable: true; Writable: false

#### let saveas

```cangjie
public let saveas: ?String = None
```
功能： 保存下载文件的路径。
Type: ?String; Readable: true; Writable: false

#### let tid

```cangjie
public let tid: String
```
功能： 任务id。
Type: String; Readable: true; Writable: false

#### let title

```cangjie
public let title: String
```
功能： 任务标题。
Type: String; Readable: true; Writable: false

#### let tries

```cangjie
public let tries: UInt32
```
功能： 任务的尝试次数。
Type: UInt32; Readable: true; Writable: false

#### let url

```cangjie
public let url: ?String = None
```
功能： 任务的url。
Type: ?String; Readable: true; Writable: false



## Enums

### Action

enum Action
```cangjie
public enum Action <: ToString { | DOWNLOAD | UPLOAD | ... }
```
功能： 定义操作选项。

#### DOWNLOAD

```cangjie
DOWNLOAD
```
功能： 表示下载任务。

#### UPLOAD

```cangjie
UPLOAD
```
功能： 表示上传任务。


### BroadcastEvent

enum BroadcastEvent
```cangjie
public enum BroadcastEvent { | COMPLETE | ... }
```
功能： 定义自定义系统事件。用户可以使用公共事件接口获取该事件。上传下载SA具有'ohos.permission.SEND_TASK_COMPLETE_EVENT' 该权限，用户可以配置事件的metadata 指向的二级配置文件来拦截其他事件发送者。使用CommonEventData 类型传输公共事件相关数据。成员的内容填写和 CommonEventData介绍 介绍的有所区别，其中CommonEventData.code 表示任务的状态，目前为0x40 COMPLETE或0x41 FAILED; CommonEventData.data 表示任务的taskId。

#### COMPLETE

```cangjie
COMPLETE
```
功能： 表示任务完成事件。

#### prop value

```cangjie
public prop value: String
```
功能： 返回该BroadcastEvent的字符串形式。


### ConfigDataType

enum ConfigDataType
```cangjie
public enum ConfigDataType { | STR(String) | FORMITEMS(Array<FormItem>) | ... }
```
功能： 上传/下载任务的data配置枚举类型。

#### FORMITEMS(Array<FormItem>)

```cangjie
FORMITEMS(Array<FormItem>)
```
功能： 表示上传时，data是表单项数组Array<FormItem>，默认为空。

#### STR(String)

```cangjie
STR(String)
```
功能： 下载时，data为字符串类型，通常使用json(object将被转换为json文本)，默认为空。


### Faults

enum Faults
```cangjie
public enum Faults <: ToString { | OTHERS | DISCONNECTED | TIMEOUT | PROTOCOL | FSIO | ... }
```
功能： 定义任务失败的原因。

#### DISCONNECTED

```cangjie
DISCONNECTED
```
功能： 表示网络断开连接。

#### FSIO

```cangjie
FSIO
```
功能： 表示文件系统io错误，例如打开/查找/读取/写入/关闭。

#### OTHERS

```cangjie
OTHERS
```
功能： 表示其他故障。

#### PROTOCOL

```cangjie
PROTOCOL
```
功能： 表示协议错误，例如：服务器内部错误（500）、无法处理的数据区间（416）等。

#### TIMEOUT

```cangjie
TIMEOUT
```
功能： 表示任务超时。


### FormItemValueType

enum FormItemValueType
```cangjie
public enum FormItemValueType { | STR(String) | FILE(FileSpec) | FILES(Array<FileSpec>) | ... }
```
功能： 表单项的文件信息枚举类型。

#### FILE(FileSpec)

```cangjie
FILE(FileSpec)
```
功能： 表示文件信息。

#### FILES(Array<FileSpec>)

```cangjie
FILES(Array<FileSpec>)
```
功能： 表示多个文件信息。

#### STR(String)

```cangjie
STR(String)
```
功能： 表示文件路径。


### Mode

enum Mode
```cangjie
public enum Mode <: ToString { | BACKGROUND | FOREGROUND | ... }
```
功能： 定义模式选项。前端任务在应用切换到后台一段时间后失败/暂停；后台任务不受影响。

#### BACKGROUND

```cangjie
BACKGROUND
```
功能： 表示后台任务。

#### FOREGROUND

```cangjie
FOREGROUND
```
功能： 表示前端任务。


### Network

enum Network
```cangjie
public enum Network <: ToString { | ANY | WIFI | CELLULAR | ... }
```
功能： 定义网络选项。网络不满足设置条件时，未执行的任务等待执行，执行中的任务失败/暂停。

#### ANY

```cangjie
ANY
```
功能： 表示不限网络类型。

#### CELLULAR

```cangjie
CELLULAR
```
功能： 表示蜂窝数据网络。

#### WIFI

```cangjie
WIFI
```
功能： 表示无线网络。


### State

enum State
```cangjie
public enum State <: ToString { | INITIALIZED | WAITING | RUNNING | RETRYING | PAUSED | STOPPED | COMPLETED | FAILED | REMOVED | ... }
```
功能： 定义任务当前的状态。

#### COMPLETED

```cangjie
COMPLETED
```
功能： 表示任务完成。

#### FAILED

```cangjie
FAILED
```
功能： 表示任务失败。

#### INITIALIZED

```cangjie
INITIALIZED
```
功能： 通过配置信息（Config）创建初始化任务。

#### PAUSED

```cangjie
PAUSED
```
功能： 表示任务暂停，通常后续会恢复任务。

#### REMOVED

```cangjie
REMOVED
```
功能： 表示任务移除。

#### RETRYING

```cangjie
RETRYING
```
功能： 表示任务至少失败一次，现在正在再次处理中。

#### RUNNING

```cangjie
RUNNING
```
功能： 表示正在处理的任务。

#### STOPPED

```cangjie
STOPPED
```
功能： 表示任务停止。

#### WAITING

```cangjie
WAITING
```
功能： 表示任务缺少运行或重试的资源与网络状态不匹配。



